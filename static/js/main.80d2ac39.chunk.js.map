{"version":3,"sources":["data/us-states.csv","components/util/constants.js","components/Footnotes.js","components/appGapminder/appParams.js","context/dataContext.js","context/statesContext.js","context/selectionContext.js","components/appGapminder/chart/CirclesGapminder.js","components/appGapminder/interface/OpacitySlider.js","components/appGapminder/interface/DayCounterSlider.js","components/appGapminder/chart/ChartGapminder.js","components/appGapminder/pickers/FilterRegion.js","components/appGapminder/pickers/FilterGovernor.js","components/appGapminder/pickers/FilterPopulation.js","components/appGapminder/pickers/FilterGdp.js","components/appGapminder/pickers/FilterBatch.js","components/appGapminder/FilterDashboard.js","components/appGapminder/pickers/ParamPicker.js","components/appGapminder/interface/Navbar.js","components/appGapminder/gapminderData.js","components/appGapminder/AppGapminder.js","components/util/MouseMove.js","components/appCovidCompare/chart/Line.js","components/appCovidCompare/chart/ChartUSCompare.js","components/appCovidCompare/components/FilterValues.js","components/appCovidCompare/pickers/FilterCases.js","components/appCovidCompare/pickers/FilterPopulation.js","components/appCovidCompare/components/FilterCategories.js","components/appCovidCompare/pickers/FilterRegion.js","components/appCovidCompare/pickers/BatchSelect.js","components/appCovidCompare/pickers/Dashboard.js","components/appCovidCompare/interface/FilterBarCovidCompare.js","components/util/ResponsiveDesign.js","components/appCovidCompare/AppCovidCompare.js","styles/theme.js","styles/colors.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","date","dateFormatter","d3","dateParser","dimensions","top","right","bottom","left","bounded","width","window","innerWidth","height","margin","useStyles","makeStyles","theme","rootGrid","footnoteText","color","palette","text","primary","textAlign","padding","fontSize","marginLeft","marginRight","footerButton","secondary","Footnotes","props","darkMode","setDarkMode","classes","useTheme","path","location","pathname","replace","Grid","container","className","item","Tooltip","title","placement","IconButton","onClick","saveSvgAsPng","document","querySelector","backgroundColor","background","default","encoderOptions","fonts","url","format","wrapper","wrapperWidth","wrapperHeight","innerHeight","marginTop","marginBottom","chartParams","chartType","toTimestamp","multiple","normalize","xParam","output","type","selected","alt1","options","yParam","zParam","cParam","tParam","dataContext","React","createContext","statesContext","selectionContext","CirclesGapminder","data","dayCounter","selector","scales","opacityNotSel","xScale","yScale","colorScale","infoStates","useContext","selectedCircles","setSelectedCircles","circlesRef","useRef","circle","stroke","opacity","circleSelected","strokeWidth","bisectDay","valueAt","values","day","i","length","a","b","t","useEffect","current","selectAll","map","d","state","region","join","sort","attr","htmlFormat","includes","call","append","casesPerThousand","toFixed","cases","toLocaleString","deathsPerThousand","deaths","on","mouseOverCircle","style","mouseOutCircle","notSelected","filter","s","ref","OpacitySlider","setOpacityNotSel","Typography","variant","Slider","id","value","valueLabelDisplay","step","min","max","onChange","e","newVal","DayCounterSlider","setDayCounter","cParamCategories","division","governor","ChartGapminder","dataStates","useState","setScales","mqSmall","useMediaQuery","breakpoints","down","rootSVG","display","position","verticalAlign","overflow","chartWrapper","bounds","axes","legend","fontWeight","sliderContainer","flexDirection","justifyContent","alignItems","slider","boundsRef","yAxisRef","xAxisRef","legendRef","domain","range","yAxisGenerator","scale","xAxisGenerator","axis","enter","transition","duration","update","exit","remove","renderChart","viewBox","preserveAspectRatio","transform","regionOptions","name","chartParam","FilterRegion","handleFilter","anchorEl","setAnchorEl","MenuItem","dense","currentTarget","Menu","open","Boolean","onClose","o","key","FilterGovernor","FilterPopulation","nStates","populationOptions","n","FilterGdp","gdpOptions","button","chipContainer","listStyle","main","chip","contrastText","spacing","FilterBatch","filters","handleDeleteFilter","handleMenu","handleFilters","currSelection","forEach","newFilter","filtered","Object","keys","handleFilterCategories","slice","handleFilterValues","prevState","all","Button","MenuList","Paper","component","f","Chip","size","label","onDelete","dashboard","dashboardTitle","dashboardDivider","filterBatch","FilterDashboard","setFilters","setNStates","handleChange","target","FormGroup","FormControlLabel","control","TextField","InputProps","inputProps","defaultValue","Divider","deletedFilter","newFilterList","checked","Checkbox","rootContainer","maxWidth","minWidth","filterSelector","filterMenuItem","ParamPicker","handleSelector","p","FormControl","InputLabel","Select","root","appBar","transitions","create","easing","sharp","leavingScreen","appBarShift","easeOut","enteringScreen","menuButton","hide","drawer","flexShrink","drawerPaper","drawerHeader","mixins","toolbar","tab","menuItem","Navbar","setOpen","handleDrawer","handleParamMenu","AppBar","clsx","Toolbar","edge","disableRipple","List","href","ClickAwayListener","onClickAway","x","y","Drawer","anchor","paper","gapminderData","stateInfo","newData","eachState","push","navbar","AppGapminder","setData","setSelector","then","res","Provider","param","MouseMove","focus","overlay","linesStates","selectedStates","wrapperDim","boundedDim","dayOfOutbreak","x0","invert","this","bisectDate","dataEachState","stateHTML","dataEachStateRangeY","dataEachStateRangeX","dataEachStateRangeDate","dataEachStateRangeCases","frozen","select","abbreviation","split","Line","labelParams","mqMedium","up","mqLarge","setLinesStates","filterStates","statesObject","lineGenerator","linesObject","lastDayOfOutbreak","lastCasesPerThousand","lockdownDay","lockdown","lockdownDayDatum","line","lineLabelX","lineLabelY","lockdownMarkerX","lockdownMarkerY","console","log","xShift","yShift","fill","strokeLinejoin","strokeLinecap","r","cx","cy","fontFamily","axisLabel","footnotes","ChartUSCompare","svgRef","textAnchor","FilterValues","filterOptions","handleSelectedFilter","FilterCases","FilterCategories","BatchSelect","setSelectedStates","selectedFilter","setSelectedFilter","Date","newSelectedFilter","newSelection","info","aria-controls","aria-haspopup","Dashboard","handleSelectedStates","handleSelectAllStates","handleDeselectAllStates","FilterBarCovidCompare","ResponsiveDesign","setWrapperDim","setBoundedDim","chartTitle","xLabel","yLabel","AppCovidCompare","setInfoStates","utils","DateFnsUtils","ThemeProvider","revisedStates","createMuiTheme","contrastThreshold","typography","overrides","MuiFormControlLabel","textColor","MuiButton","MuiBase","MuiInputBase","paddingLeft","MuiPickersCalendarHeader","switchHeader","MuiPickersDay","daySelected","dayDisabled","getTheme","colors","App","setDataStates","startsWith","lockdownEnd","nested","entries","lastIndex","latestCaseCount","latestCaseCountPerThou","population","USStates","fips","parseInt","stateData","mortalityRate","CssBaseline","exact","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.80d2ac39.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/us-states.6a820e7c.csv\";","import * as d3 from \"d3\";\r\n\r\nconst date = {\r\n  dateFormatter: d3.timeFormat(\"%m-%d-%y\"),\r\n  dateParser: d3.timeParse(\"%m-%d-%y\"),\r\n};\r\n\r\nconst dimensions = {\r\n  width: window.innerWidth,\r\n  height: 750,\r\n  margin: {\r\n    top: 80,\r\n    right: 100,\r\n    bottom: 140,\r\n    left: 100,\r\n  },\r\n};\r\n\r\nconst bounded = {\r\n  width: dimensions.width - dimensions.margin.left - dimensions.margin.right,\r\n  height: dimensions.height - dimensions.margin.top - dimensions.margin.bottom,\r\n};\r\n\r\nexport { date, dimensions, bounded };\r\n","import React from 'react';\r\nimport { saveSvgAsPng } from 'save-svg-as-png';\r\n\r\n// constants\r\nimport { dimensions, bounded } from './util/constants';\r\n\r\n// styles\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport '../styles/styles.css';\r\nimport { IconButton, Tooltip, Grid } from '@material-ui/core';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\r\n\r\nconst { margin } = dimensions;\r\nconst { width, height } = bounded;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\trootGrid: {\r\n\t\twidth: width - margin.left,\r\n\t\tmargin: \"0 auto\"\r\n\t},\r\n    footnoteText: {\r\n        color: theme.palette.text.primary,\r\n        textAlign: 'left',\r\n        padding: 0,\r\n        fontSize: 10,\r\n        marginLeft: margin.left,\r\n        marginRight: margin.right\r\n    },\r\n    footerButton: {\r\n\t\tcolor: theme.palette.text.secondary,\r\n        marginRight: \"auto\",\r\n        padding: 6\r\n    },\r\n}));\r\n\r\nconst Footnotes = (props) => {\r\n\tconst {darkMode, setDarkMode} = props;\r\n    const classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tconst path = window.location.pathname.replace('/','');\r\n\r\n    const saveImage = () => {\r\n        saveSvgAsPng(document.querySelector(`#${path}`), \"covid-19_chart.png\", {\r\n\t\t\tbackgroundColor: theme.palette.background.default,\r\n\t\t\tencoderOptions: 1,\r\n\t\t\tfonts: [\r\n\t\t\t\t{\r\n\t\t\t\t\turl: \"../../styles/ralewaymedium/raleway-medium-webfont.woff\",\r\n\t\t\t\t\tformat: \"application/font-woff\",\r\n\t\t\t\t\ttext: \"@font-face {font-family: 'ralewaymedium'; src: url('./ralewaymedium/raleway-medium-webfont.woff2') format('woff2'), url('./ralewaymedium/raleway-medium-webfont.woff') format('woff'); font-weight: normal;font-style: normal;}\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n        });\r\n\t};\r\n\r\n    return (\r\n\t\t<Grid container className={classes.rootGrid}>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<Tooltip title=\"Save chart as image\" placement=\"right\">\r\n\t\t\t\t\t<IconButton onClick={saveImage} className={classes.footerButton}>\r\n\t\t\t\t\t\t<SaveIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<Tooltip title=\"Toggle dark/light theme\" placement=\"right\">\r\n\t\t\t\t\t<IconButton onClick={() => setDarkMode(!darkMode)} className={classes.footerButton}>\r\n\t\t\t\t\t\t<Brightness7Icon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n    )\r\n};\r\n\r\nexport { Footnotes };","export const wrapper = {\r\n\twrapperWidth: window.innerWidth * .8,\r\n\twrapperHeight: window.innerHeight * .8,\r\n\tmarginTop: 30,\r\n\tmarginRight: 30,\r\n\tmarginBottom: 40,\r\n\tmarginLeft: 60\r\n  };\r\n  \r\nexport const bounded = {\r\n\twidth: wrapper.wrapperWidth - wrapper.marginLeft - wrapper.marginRight,\r\n\theight: wrapper.wrapperHeight - wrapper.marginTop - wrapper.marginBottom,\r\n};\r\n\r\n// Chart params: define params for drawing axes and chart\r\nexport const chartParams = {\r\n\tchartType: \"bubble\",\r\n\ttoTimestamp: null,\r\n\tmultiple: true,\r\n\tnormalize: true,\r\n\txParam: { // x-axis\r\n\t\toutput: 'x-axis',\r\n\t\ttype: 'linear',\r\n\t\tformat: 'none',\r\n\t\tselected: 'casesPerThousand',\r\n\t\talt1: 'cases',\r\n\t\toptions: [\r\n\t\t\t\"casesPerThousand\",\r\n\t\t\t\"cases\",\r\n\t\t\t\"deathsPerThousand\",\r\n\t\t\t\"deaths\"\r\n\t\t]\r\n\t},\r\n\tyParam: { // y-axis\r\n\t\toutput: 'y-axis',\r\n\t\ttype: 'linear',\r\n\t\tformat: 'none',\r\n\t\tselected: 'deathsPerThousand',\r\n\t\talt1: 'deaths',\r\n\t\toptions: [ \r\n\t\t\t\"casesPerThousand\",\r\n\t\t\t\"cases\",\r\n\t\t\t\"deathsPerThousand\",\r\n\t\t\t\"deaths\"\r\n\t\t], \r\n\t},\r\n\tzParam: {// z-axis (3rd dimension) (eg. size)\r\n\t\toutput: 'circle-area',\r\n\t\ttype: \"linear\",\r\n\t\tformat: \"none\",\r\n\t\tselected: \"population\",\r\n\t\toptions: [ \r\n\t\t\t\"population\",\r\n\t\t\t\"populationDensity\",\r\n\t\t\t\"gdp\",\r\n\t\t\t\"none\"\r\n\t\t]\r\n\t},\r\n\tcParam: { // color axis (categorical/ordinal data) (eg. gender, birthplace, etc.)\r\n\t\toutput: 'color-grouping',\r\n\t\ttype: \"categorical\",\r\n\t\tselected: \"region\",\r\n\t\toptions: [ \r\n\t\t\t\"region\",\r\n\t\t\t\"division\",\r\n\t\t\t\"governor\"\r\n\t\t],\r\n\t},\r\n\ttParam: { // time axis (4th dimension) (ie. for animated charts)\r\n\t\toutput: 'time',\r\n\t\ttype: 'time',\r\n\t\tselected: \"dayOfOutbreak\",\r\n\t\toptions: [\r\n\t\t\t\"dayOfOutbreak\",\r\n\t\t\t\"date\"\r\n\t\t]\r\n\t},\r\n};\r\n\r\n// Label params:\r\nexport const labelParams = {\r\n\tchartTitle: \"COVID-19 State Comparison\",\r\n\txLabel: \"Cases per Thousand\",\r\n\tyLabel: \"Deaths per Thousand\"\r\n};","import React from 'react';\r\n\r\nconst dataContext = React.createContext();\r\n\r\nexport { dataContext };","import React from 'react';\r\n\r\nconst statesContext = React.createContext();\r\n\r\nexport { statesContext };","import React from 'react';\r\n\r\nexport const selectionContext = React.createContext();\r\n","import React, { useEffect, useContext, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\n// context\r\nimport { statesContext } from '../../../context/statesContext';\r\nimport { selectionContext } from '../../../context/selectionContext';\r\n\r\n// style \r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport const CirclesGapminder = (props) => {\r\n\tconst { data, dayCounter, selector, scales, opacityNotSel } = props;\r\n\tconst { xParam, yParam, zParam, cParam } = selector;\r\n\tconst { xScale, yScale, colorScale } = scales;\r\n\r\n\t// context and ref\r\n\tconst { infoStates } = useContext(statesContext);\r\n\tconst { selectedCircles, setSelectedCircles } = useContext(selectionContext); \r\n\tconst circlesRef = useRef(null);\r\n\r\n\t// styles\r\n\tconst useStyles = makeStyles((theme) => ({\r\n\t\tcircle: {\r\n\t\t\tstroke: 'none',\r\n\t\t\topacity: opacityNotSel\r\n\t\t},\r\n\t\tcircleSelected: {\r\n\t\t\tstroke: \"#e91e63\",\r\n\t\t\tstrokeWidth: 2,\r\n\t\t\topacity: .8,\r\n\t\t}\r\n\t}));\r\n\tconst classes = useStyles();\r\n\r\n\tconst bisectDay = d3.bisector(([d]) => d).left;\r\n\r\n\tfunction dataAt(day) {\r\n\t\treturn data.map(d => ({\r\n\t\t\tstate: d.state,\r\n\t\t\tregion: d.region,\r\n\t\t\t[xParam.selected]: valueAt(d[xParam.selected], day),\r\n\t\t\t[yParam.selected]: valueAt(d[yParam.selected], day)\r\n\t\t}));\r\n\t};\r\n\r\n\tfunction valueAt(values, day) {\r\n\t\tconst i = bisectDay(values, day, 0, values.length - 1);\r\n\t\tconst a = values[i];\r\n\r\n\t\tif (i > 0) {\r\n\t\t\tconst b = values[i - 1];\r\n\t\t\tconst t = (day - a[0]) / (b[0] - a[0]);\r\n\t\t\treturn a[1] * (1 - t) + b[1] * t;\r\n\t\t}\r\n\t\treturn a[1];\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (data) {\r\n\t\t\tconst circle = d3.select(circlesRef.current).selectAll('circle')\r\n\t\t\t.data(dataAt(dayCounter), d => d)\r\n\t\t\t.join('circle')\r\n\t\t\t\t.sort((a,b) => d3.descending(a[zParam], b[zParam]))\r\n\t\t\t\t.attr('r', d => zParam.selected === \"population\" \r\n\t\t\t\t\t? infoStates[d.state][zParam.selected] / 1000000 \r\n\t\t\t\t\t: zParam.selected === \"populationDensity\"\r\n\t\t\t\t\t? infoStates[d.state][zParam.selected] / 100\r\n\t\t\t\t\t: zParam.selected === \"gdp\"\r\n\t\t\t\t\t? infoStates[d.state][zParam.selected] / 100000\r\n\t\t\t\t\t: 5\r\n\t\t\t\t)\r\n\t\t\t\t.attr('cx', d => xScale(d[xParam.selected]))\r\n\t\t\t\t.attr('cy', d => yScale(d[yParam.selected]))\r\n\t\t\t\t.attr('fill', d => colorScale(infoStates[d.state][cParam.selected]))\r\n\t\t\t\t.attr('id', d => `circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\t.attr('class', d =>\r\n\t\t\t\t\tselectedCircles.selected.includes(d.state) \r\n\t\t\t\t\t\t? classes.circleSelected\r\n\t\t\t\t\t\t: classes.circle\r\n\t\t\t\t)\r\n\t\t\t\t.call(circle => circle\r\n\t\t\t\t\t.append('title')\r\n\t\t\t\t\t.text(d => [\r\n\t\t\t\t\t\td.state,\r\n\t\t\t\t\t\t`Day ${dayCounter}`,\r\n\t\t\t\t\t\txParam.selected === \"casesPerThousand\"\r\n\t\t\t\t\t\t\t? `Cases/1000: ${d.casesPerThousand && d.casesPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: xParam.selected === \"cases\"\r\n\t\t\t\t\t\t\t? `Cases: ${d.cases && d.cases.toLocaleString()}`\r\n\t\t\t\t\t\t\t: xParam.selected === \"deathsPerThousand\"\r\n\t\t\t\t\t\t\t? `Deaths/1000: ${d.deathsPerThousand && d.deathsPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: xParam.selected === \"deaths\"\r\n\t\t\t\t\t\t\t? `Deaths: ${d.deaths && d.deaths.toLocaleString()}`\r\n\t\t\t\t\t\t\t: \"error\",\r\n\t\t\t\t\t\tyParam.selected === \"casesPerThousand\" \r\n\t\t\t\t\t\t\t? `Cases/1000: ${d.casesPerThousand && d.casesPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: yParam.selected === \"cases\"\r\n\t\t\t\t\t\t\t? `Cases: ${d.cases && d.cases.toLocaleString()}`\r\n\t\t\t\t\t\t\t: yParam.selected === \"deathsPerThousand\"\r\n\t\t\t\t\t\t\t? `Deaths/1000: ${d.deathsPerThousand && d.deathsPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: yParam.selected === \"deaths\"\r\n\t\t\t\t\t\t\t? `Deaths: ${d.deaths && d.deaths.toLocaleString()}`\r\n\t\t\t\t\t\t\t: \"error\"\r\n\t\t\t\t\t\t].join(\"\\n\")\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\r\n\t\t\tcircle.on('mouseover', d => {\r\n\t\t\t\tconst mouseOverCircle = d3.select(`#circle-${infoStates[d.state].htmlFormat}`)\t\t\t\r\n\t\t\t\tif (opacityNotSel !== 0 || selectedCircles.selected.includes(d.state)) {\r\n\t\t\t\t\tmouseOverCircle\r\n\t\t\t\t\t\t.attr('cursor', 'pointer')\r\n\t\t\t\t\t\t.style(\"opacity\", .9)\r\n\t\t\t\t\t\t.style(\"stroke\", \"#e91e63\")\r\n\t\t\t\t\t\t.style(\"stroke-width\", 2)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcircle.on('mouseout', d => { \r\n\t\t\t\tconst mouseOutCircle = d3.select(`#circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\tif (selectedCircles.notSelected.includes(d.state)) {\r\n\t\t\t\t\tmouseOutCircle\r\n\t\t\t\t\t\t.style(\"opacity\", opacityNotSel)\r\n\t\t\t\t\t\t.style(\"stroke\", \"none\")\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcircle.on('click', d => { \r\n\t\t\t\tif (selectedCircles.selected.includes(d.state)) {\r\n\t\t\t\t\tsetSelectedCircles({\r\n\t\t\t\t\t\t...selectedCircles,\r\n\t\t\t\t\t\tselected: selectedCircles.selected.filter(s => s !== d.state),\r\n\t\t\t\t\t\tnotSelected: [...selectedCircles.notSelected, d.state]\r\n\t\t\t\t\t})\r\n\t\t\t\t\td3.select(`#circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\t\t\t.style(\"opacity\", opacityNotSel)\r\n\t\t\t\t\t\t.style(\"stroke\", \"none\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetSelectedCircles({\r\n\t\t\t\t\t\t...selectedCircles,\r\n\t\t\t\t\t\tselected: [...selectedCircles.selected, d.state],\r\n\t\t\t\t\t\tnotSelected: selectedCircles.notSelected.filter(s => s !== d.state)\r\n\t\t\t\t\t})\r\n\t\t\t\t\td3.select(`#circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\t\t\t.style(\"opacity\", .9)\r\n\t\t\t\t\t\t.style(\"stroke\", \"#e91e63\")\r\n\t\t\t\t\t\t.style(\"stroke-width\", 2)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t}, [dayCounter, selector, scales, selectedCircles, opacityNotSel]);\r\n\r\n\treturn (\r\n\t\t<>\t\t\r\n\t\t\t<g ref={circlesRef} />\r\n\t\t</>\r\n\t)\r\n};","import React from 'react';\r\nimport { Slider, Typography } from \"@material-ui/core\";\r\n\r\nexport const OpacitySlider = (props) => {\r\n\tconst { opacityNotSel, setOpacityNotSel } = props;\r\n\r\n\treturn (\r\n\t\t<>\t\r\n\t\t\t<Typography variant=\"caption\">Non-selected opacity</Typography>\r\n\t\t\t<Slider \r\n\t\t\t\tid=\"opacity-slider\"\r\n\t\t\t\tvalue={opacityNotSel}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tstep={.1}\r\n\t\t\t\tmin={0}\r\n\t\t\t\tmax={1}\r\n\t\t\t\tonChange={(e, newVal) => setOpacityNotSel(newVal)}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n};\r\n\r\n","import React from 'react';\r\nimport { Slider, Typography } from \"@material-ui/core\";\r\n\r\nexport const DayCounterSlider = (props) => {\r\n\tconst { dayCounter, setDayCounter } = props;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Typography variant=\"caption\">Day of Outbreak</Typography>\r\n\t\t\t<Slider \r\n\t\t\t\tid=\"day-counter-slider\"\r\n\t\t\t\tvalue={dayCounter}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tstep={1}\r\n\t\t\t\tmin={1}\r\n\t\t\t\tmax={60}\r\n\t\t\t\tonChange={(e, newVal) => setDayCounter(newVal)}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n};\r\n\r\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\n// context\r\nimport { dataContext } from \"../../../context/dataContext\";\r\n\r\n// components\r\nimport { CirclesGapminder } from \"./CirclesGapminder\";\r\nimport { OpacitySlider } from \"../interface/OpacitySlider\";\r\nimport { DayCounterSlider } from \"../interface/DayCounterSlider\";\r\n\r\n// style\r\nimport { Grid, useMediaQuery } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst cParamCategories = {\r\n    region: [\"Northeast\", \"Midwest\", \"South\", \"West\"],\r\n    division: [\r\n        \"New England\",\r\n        \"Mid-Atlantic\",\r\n        \"East North Central\",\r\n        \"West North Central\",\r\n        \"South Atlantic\",\r\n        \"East South Central\",\r\n        \"West South Central\",\r\n        \"Mountain\",\r\n        \"Pacific\",\r\n    ],\r\n    governor: [\"Republican\", \"Democrat\", \"n/a\"],\r\n};\r\n\r\nexport const ChartGapminder = props => {\r\n    const { data, selector, wrapper, bounded } = props;\r\n    const { xParam, yParam, cParam } = selector;\r\n    const {\r\n        wrapperWidth,\r\n        wrapperHeight,\r\n        marginTop,\r\n        marginBottom,\r\n        marginLeft,\r\n        marginRight,\r\n    } = wrapper;\r\n\tconst { width, height } = bounded;\r\n\r\n    const { dataStates } = useContext(dataContext);\r\n    const [scales, setScales] = useState(null);\r\n\tconst [dayCounter, setDayCounter] = useState(1);\r\n\tconst [opacityNotSel, setOpacityNotSel] = useState(0.6);\r\n\r\n\tconst theme = useTheme();\r\n\tconst mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\tconst useStyles = makeStyles(theme => ({\r\n\t\trootSVG: {\r\n\t\t\tdisplay: \"inline-block\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\t// paddingBottom: \"100%\",\r\n\t\t\tverticalAlign: \"middle\",\r\n\t\t\toverflow: \"hidden\",\r\n\t\t},\r\n\t\tchartWrapper: {\r\n\t\t\tdisplay: \"inline-block\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t},\r\n\t\tbounds: {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t},\r\n\t\taxes: {\r\n\t\t\tcolor: theme.palette.text.primary,\r\n\t\t},\r\n\t\tlegend: {\r\n\t\t\tfontWeight: 700,\r\n\t\t\tfontSize: \".8rem\",\r\n\t\t},\r\n\t\tsliderContainer: {\r\n\t\t\tflexDirection: mqSmall ? \"column\" : \"row\",\r\n\t\t\tjustifyContent: mqSmall ? \"center\" : \"space-between\",\r\n\t\t\twidth: width,\r\n\t\t\tmargin: \"0 auto\",\r\n\t\t\talignItems: \"center\",\r\n\t\t},\r\n\t\tslider: {\r\n\t\t\twidth: mqSmall ? width : width / 2.2,\r\n\t\t},\r\n\t}));\r\n\r\n    const classes = useStyles();\r\n\r\n    const boundsRef = useRef(null);\r\n    const yAxisRef = useRef(null);\r\n    const xAxisRef = useRef(null);\r\n    const legendRef = useRef(null);\r\n\r\n    const renderChart = () => {\r\n        const xScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d[xParam.selected]))\r\n            .range([0, width]);\r\n        const yScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d[yParam.selected]))\r\n            .range([height, 0]);\r\n        let colorScale;\r\n\r\n        if (cParam.selected === \"region\") {\r\n            colorScale = d3\r\n                .scaleOrdinal()\r\n                .domain(cParamCategories.region)\r\n                .range(d3.schemePaired);\r\n        } else if (cParam.selected === \"division\") {\r\n            colorScale = d3\r\n                .scaleOrdinal()\r\n                .domain(cParamCategories.division)\r\n                .range(d3.schemePaired);\r\n        } else if (cParam.selected === \"governor\") {\r\n            colorScale = d3\r\n                .scaleOrdinal()\r\n                .domain(cParamCategories.governor)\r\n                .range([\"#B61515\", \"#2E84D5\", \"#009C72\"]);\r\n        }\r\n\r\n        setScales({\r\n            xScale: xScale,\r\n            yScale: yScale,\r\n            colorScale: colorScale,\r\n        });\r\n\r\n        // Axes\r\n        const yAxisGenerator = d3.axisLeft().scale(yScale);\r\n        const xAxisGenerator = d3.axisBottom().scale(xScale);\r\n\r\n        const xAxis = d3\r\n            .select(xAxisRef.current)\r\n            .call(xAxisGenerator)\r\n            .call(axis => axis.append(\"text\").attr(\"class\", \"xLabel\"));\r\n\r\n        xAxis\r\n            .selectAll(\".xLabel\")\r\n            .data(xParam.selected, d => d)\r\n            .join(\"text\")\r\n            .attr(\"x\", width)\r\n            .attr(\"y\", 40)\r\n            .attr(\"class\", \"xLabel\")\r\n            .attr(\"text-anchor\", \"end\")\r\n            .attr(\"fill\", \"white\")\r\n            .text(xParam.selected);\r\n\r\n        const yAxis = d3\r\n            .select(yAxisRef.current)\r\n            .call(yAxisGenerator)\r\n            .call(axis => axis.append(\"text\").attr(\"class\", \"yLabel\"));\r\n\r\n        yAxis\r\n            .selectAll(\".yLabel\")\r\n            .data(yParam.selected, d => d)\r\n            .join(\"text\")\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", -40)\r\n            .attr(\"class\", \"yLabel\")\r\n            .attr(\"text-anchor\", \"end\")\r\n            .attr(\"transform\", \"rotate(-90)\")\r\n            .attr(\"fill\", \"white\")\r\n            .text(yParam.selected);\r\n\r\n        // legend\r\n        d3.select(legendRef.current)\r\n            .selectAll(\"text\")\r\n            .data(cParamCategories[cParam.selected], d => d)\r\n            .join(\r\n                enter =>\r\n                    enter\r\n                        .append(\"text\")\r\n                        .attr(\"x\", \"1rem\")\r\n                        .attr(\"y\", -1000)\r\n                        .attr(\"fill\", d => colorScale(d))\r\n                        .attr(\"text-anchor\", \"start\")\r\n                        .text(d => d)\r\n                        .call(enter =>\r\n                            enter\r\n                                .transition()\r\n                                .duration(750)\r\n                                .attr(\"y\", (d, i) => -height + 10 + 20 * i)\r\n                        ),\r\n                update =>\r\n                    update\r\n                        .append(\"text\")\r\n                        .attr(\"fill\", d => colorScale(d))\r\n                        .attr(\"text-anchor\", \"start\")\r\n                        .attr(\"y\", 60)\r\n                        .text(d => d)\r\n                        .call(update => update.transition().duration(750)),\r\n                exit =>\r\n                    exit\r\n                        .attr(\"fill\", \"gray\")\r\n                        .attr(\"text-anchor\", \"start\")\r\n                        .text(d => d)\r\n                        .call(exit =>\r\n                            exit\r\n                                .transition()\r\n                                .duration(750)\r\n                                .attr(\"y\", 0)\r\n                                .remove()\r\n                        )\r\n            );\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (dataStates) {\r\n            renderChart();\r\n        }\r\n    }, [dataStates, selector]);\r\n\r\n    useEffect(() => {\r\n\t\td3.select(\".counter-display\")\r\n\t\t\t.join(\"text\")\r\n\t\t\t.text(`Day ${dayCounter}`);\r\n    }, [dayCounter]);\r\n\r\n    return (\r\n        <>\r\n\t\t\t<div>\t\t\t\r\n            <svg\r\n                id=\"gapminder\"\r\n                height={wrapperHeight}\r\n\t\t\t\twidth={wrapperWidth}\r\n\t\t\t\tclassName={classes.rootSVG}\r\n\t\t\t\tviewBox={`0 0 ${wrapperWidth} ${wrapperHeight}`}\r\n\t\t\t\tpreserveAspectRatio\r\n            >\r\n                <g\r\n                    ref={boundsRef}\r\n                    className={classes.bounds}\r\n\t\t\t\t\ttransform={`translate(${marginLeft}, ${marginTop})`}\r\n                >\r\n                    <g\r\n                        ref={xAxisRef}\r\n                        transform={`translate(0, ${height})`}\r\n                        className={classes.axes}\r\n                    />\r\n                    <g ref={yAxisRef} className={classes.axes} />\r\n                    <g\r\n                        ref={legendRef}\r\n                        transform={`translate(0, ${height})`}\r\n                        className={classes.legend}\r\n                    />\r\n                    {data && scales ? (\r\n                        <CirclesGapminder\r\n                            {...props}\r\n                            scales={scales}\r\n                            dayCounter={dayCounter}\r\n                            opacityNotSel={opacityNotSel}\r\n                        />\r\n                    ) : (\r\n                        <></>\r\n                    )}\r\n                </g>\r\n            </svg>\r\n\t\t\t</div>\r\n            <Grid container className={classes.sliderContainer}>\r\n                <Grid item className={classes.slider}>\r\n\t\t\t\t\t<DayCounterSlider \r\n\t\t\t\t\t\tdayCounter={dayCounter}\r\n\t\t\t\t\t\tsetDayCounter={setDayCounter}\r\n\t\t\t\t\t/>\r\n                </Grid>\r\n\t\t\t\t<Grid item className={classes.slider}>\r\n\t\t\t\t\t<OpacitySlider \r\n\t\t\t\t\t\topacityNotSel={opacityNotSel} \r\n\t\t\t\t\t\tsetOpacityNotSel={setOpacityNotSel}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n            </Grid>\r\n        </>\r\n    );\r\n};\r\n","import React, { useState, useContext } from 'react'\r\n\r\n// context\r\nimport { statesContext } from '../../../context/statesContext';\r\n\r\n// style\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nconst regionOptions = [\r\n\t{id: \"northeast\", name: \"Northeast\", type: \"Region\", chartParam: \"region\"},\r\n\t{id: \"midwest\", name: \"Midwest\", type: \"Region\", chartParam: \"region\"},\r\n\t{id: \"south\", name: \"South\", type: \"Region\", chartParam: \"region\"},\r\n\t{id: \"west\", name: \"West\", type: \"Region\", chartParam: \"region\"}\r\n];\r\n\r\nexport const FilterRegion = (props) => {\r\n\tconst { handleFilter } = props;\r\n\r\n\tconst { infoStates } = useContext(statesContext);\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\tsetAnchorEl(e.currentTarget);\r\n\t};\r\n\r\n\tconst handleMenuClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MenuItem id=\"region-btn\" dense={true} onClick={handleMenu}>\r\n\t\t\t\tRegion\r\n\t\t\t<ChevronRightIcon style={{marginLeft: \"auto\"}}/>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"region-btn\") : false}\r\n\t\t\t\tonClose={handleMenuClose}\r\n\t\t\t>\r\n\t\t\t\t{infoStates \r\n\t\t\t\t\t&& regionOptions.map(o => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\t\t\tkey={o.id} \r\n\t\t\t\t\t\t\t\tid={o.id} \r\n\t\t\t\t\t\t\t\tonClick={() => handleFilter(o)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{o.name}\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</Menu>\r\n\t\t</MenuItem>\r\n\t)\r\n};","import React, { useState, useContext } from 'react'\r\n\r\n// context\r\nimport { statesContext } from '../../../context/statesContext';\r\n\r\n// style\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nconst regionOptions = [\r\n\t{id: \"democrat\", name: \"Democrat\", type: \"Governor\", chartParam: \"governor\"},\r\n\t{id: \"republican\", name: \"Republican\", type: \"Governor\", chartParam: \"governor\"},\r\n];\r\n\r\n\r\nexport const FilterGovernor = (props) => {\r\n\tconst { handleFilter } = props;\r\n\r\n\tconst { infoStates } = useContext(statesContext);\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\tsetAnchorEl(e.currentTarget);\r\n\t};\r\n\r\n\tconst handleMenuClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MenuItem id=\"governor-btn\" dense={true} onClick={handleMenu}>\r\n\t\t\tGov. party\r\n\t\t\t<ChevronRightIcon style={{marginLeft: \"auto\"}}/>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"governor-btn\") : false}\r\n\t\t\t\tonClose={handleMenuClose}\r\n\t\t\t>\r\n\t\t\t\t{infoStates \r\n\t\t\t\t\t&& regionOptions.map(o => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\t\t\tkey={o.id} \r\n\t\t\t\t\t\t\t\tid={o.id} \r\n\t\t\t\t\t\t\t\tonClick={() => handleFilter(o)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{o.name}\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</Menu>\r\n\t\t</MenuItem>\r\n\t)\r\n};","import React, { useState } from 'react';\r\n\r\n// style\r\nimport { Menu, MenuItem, Button } from '@material-ui/core';\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nexport const FilterPopulation = (props) => {\r\n\tconst { handleFilter, nStates } = props;\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\t\r\n\tconst handleMenu = (e) => {\r\n\t\tsetAnchorEl(e.currentTarget);\r\n\t};\r\n\r\n\tconst handleMenuClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\tconst populationOptions = [\r\n\t\t{id: \"pop-high\", name: `Top ${nStates} (pop. total)`, type: \"Pop.\", chartParam: \"population\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"pop-low\", name: `Bottom ${nStates} (pop. total)`, type: \"Pop.\", chartParam: \"population\", sort: \"ascending\", n: nStates},\r\n\t\t{id: \"pop-density-high\", name: `Top ${nStates} (pop. density)`, type: \"Pop.\", chartParam: \"populationDensity\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"pop-density-low\", name: `Bottom ${nStates} (pop. density)`, type: \"Pop.\", chartParam: \"populationDensity\", sort: \"ascending\", n: nStates}\r\n\t];\r\n\r\n\treturn (\r\n\t\t<MenuItem id=\"pop-btn\" dense={true} onClick={handleMenu}>\r\n\t\t\tPopulation\r\n\t\t\t<ChevronRightIcon style={{marginLeft: \"auto\"}}/>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"pop-btn\") : false}\r\n\t\t\t\tonClose={handleMenuClose}\r\n\t\t\t>\r\n\t\t\t\t{populationOptions.map(o => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\t\tkey={o.id} \r\n\t\t\t\t\t\t\tid={o.id}\r\n\t\t\t\t\t\t\tonClick={() => handleFilter(o)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{o.name}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</Menu>\r\n\t\t</MenuItem>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\n\r\n// style\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nexport const FilterGdp = (props) => {\r\n\tconst { handleFilter, nStates } = props;\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\t\r\n\tconst handleMenu = (e) => {\r\n\t\tsetAnchorEl(e.currentTarget);\r\n\t};\r\n\r\n\tconst handleMenuClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\tconst gdpOptions = [\r\n\t\t{id: \"gdp-high\", name: `Top ${nStates} (2019 GDP)`, type: \"GDP\", chartParam: \"gdp\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"gdp-low\", name: `Bottom ${nStates} (2019 GDP)`, type: \"GDP\", chartParam: \"gdp\", sort: \"ascending\", n: nStates},\r\n\t];\r\n\t\r\n\treturn (\r\n\t\t<MenuItem id=\"gdp-btn\" dense={true} onClick={handleMenu}>\r\n\t\t\t\tGDP\r\n\t\t\t\t<ChevronRightIcon style={{marginLeft: \"auto\"}}/>\r\n\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"gdp-btn\") : false}\r\n\t\t\t\tonClose={handleMenuClose}\r\n\t\t\t>\r\n\t\t\t\t{gdpOptions.map(o => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\t\tkey={o.id} \r\n\t\t\t\t\t\t\tid={o.id} \r\n\t\t\t\t\t\t\tonClick={() => handleFilter(o)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{o.name}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</Menu>\r\n\t\t</MenuItem>\r\n\t);\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\n// context\r\nimport { selectionContext } from \"../../../context/selectionContext\";\r\nimport { statesContext } from \"../../../context/statesContext\";\r\n\r\n// components\r\nimport { FilterRegion } from \"./FilterRegion\";\r\nimport { FilterGovernor } from \"./FilterGovernor\";\r\nimport { FilterPopulation } from \"./FilterPopulation\";\r\nimport { FilterGdp } from \"./FilterGdp\";\r\n\r\n// style\r\nimport { Typography, Menu, Button, Chip, Paper, MenuList } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    button: {\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n    chipContainer: {\r\n        listStyle: \"none\",\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n    chip: {\r\n\t\tcolor: theme.palette.primary.main,\r\n        backgroundColor: theme.palette.primary.contrastText,\r\n        padding: theme.spacing(0.5),\r\n        margin: theme.spacing(0.5),\r\n        fontSize: \".7rem\",\r\n    },\r\n}));\r\n\r\nexport const FilterBatch = props => {\r\n    const {\r\n        filters,\r\n        handleDeleteFilter,\r\n        handleFilter,\r\n        nStates,\r\n    } = props;\r\n    const { setSelectedCircles } = useContext(\r\n        selectionContext\r\n    );\r\n    const { infoStates } = useContext(statesContext);\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const classes = useStyles();\r\n\r\n    const handleMenu = e => {\r\n        !anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n    };\r\n\r\n    const handleFilterCategories = newFilter => {\r\n        const filtered = Object.keys(infoStates).filter(\r\n            s => infoStates[s][newFilter.chartParam] === newFilter.name\r\n\t\t);\r\n\r\n        setAnchorEl(null);\r\n        return filtered;\r\n    };\r\n\r\n    const handleFilterValues = newFilter => {\r\n        const n = newFilter.n;\r\n        const filtered = Object.keys(infoStates)\r\n            .sort((a, b) =>\r\n                newFilter.sort === \"descending\"\r\n                    ? infoStates[b][newFilter.chartParam] -\r\n                      infoStates[a][newFilter.chartParam]\r\n                    : infoStates[a][newFilter.chartParam] -\r\n                      infoStates[b][newFilter.chartParam]\r\n            )\r\n            .slice(0, n);\r\n\r\n        setAnchorEl(null);\r\n        return filtered;\r\n    };\r\n\r\n    const handleFilters = () => {\r\n        let selected = [];\r\n        let currSelection = [];\r\n        filters.forEach((d, i) => {\r\n            if (d.type === \"Region\" || d.type === \"Governor\") {\r\n                currSelection = handleFilterCategories(d);\r\n            } else if (d.type === \"Pop.\" || d.type === \"GDP\") {\r\n                currSelection = handleFilterValues(d);\r\n            }\r\n\r\n            selected =\r\n                selected.length < 1\r\n                    ? currSelection\r\n                    : currSelection.filter(s => selected.includes(s));\r\n        });\r\n\r\n        setSelectedCircles(prevState => ({\r\n            ...prevState,\r\n            selected: selected,\r\n            notSelected: prevState.all.filter(s => !selected.includes(s)),\r\n        }));\r\n    };\r\n\r\n    useEffect(() => {\r\n        filters.length > 0\r\n            ? handleFilters()\r\n            : setSelectedCircles(prevState => ({\r\n                  ...prevState,\r\n                  selected: [],\r\n                  notSelected: prevState.all,\r\n              }));\r\n    }, [filters]);\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                id=\"select-filter\"\r\n                onClick={handleMenu}\r\n                className={classes.button}\r\n            >\r\n                New Filter\r\n                <ChevronRightIcon style={{ marginLeft: \"auto\" }} />\r\n            </Button>\r\n\r\n            <Menu\r\n                anchorEl={anchorEl}\r\n                open={\r\n                    anchorEl ? Boolean(anchorEl.id === \"select-filter\") : false\r\n                }\r\n                onClose={handleMenu}\r\n            >\r\n\t\t\t\t<MenuList>\r\n\t\t\t\t\t<FilterRegion handleFilter={handleFilter} />\r\n\t\t\t\t\t<FilterGovernor handleFilter={handleFilter} />\r\n\t\t\t\t\t<FilterPopulation handleFilter={handleFilter} nStates={nStates} />\r\n\t\t\t\t\t<FilterGdp handleFilter={handleFilter} nStates={nStates} />\r\n\t\t\t\t</MenuList>\r\n            </Menu>\r\n\r\n            <Paper component=\"ul\" className={classes.chipContainer}>\r\n                {filters.length > 0 ? (\r\n                    filters.map(f => {\r\n                        return (\r\n                            <li key={f.id}>\r\n                                <Chip\r\n                                    size=\"small\"\r\n                                    className={classes.chip}\r\n                                    label={f.name}\r\n                                    onDelete={() => handleDeleteFilter(f)}\r\n                                />\r\n                            </li>\r\n                        );\r\n                    })\r\n                ) : (\r\n                    <Typography>No filters</Typography>\r\n                )}\r\n            </Paper>\r\n        </>\r\n    );\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport {\r\n    IconButton,\r\n    FormControlLabel,\r\n    FormGroup,\r\n    Checkbox,\r\n    Typography,\r\n\tDivider,\r\n\tTextField,\r\n} from \"@material-ui/core\";\r\n\r\n// components\r\nimport {FilterBatch} from \"./pickers/FilterBatch\";\r\n\r\n// context\r\nimport { selectionContext } from \"../../context/selectionContext\";\r\n\r\n// styles\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    dashboard: {\r\n        alignItems: \"left\",\r\n        backgroundColor: theme.palette.primary.main,\r\n        color: theme.palette.text.primary,\r\n\t},\r\n\tdashboardTitle: {\r\n\t\tcolor: theme.palette.primary.contrastText,\r\n\t\tfontWeight: 700,\r\n\t\tfontSize: \"1.2rem\" \r\n\t},\r\n\tdashboardDivider: {\r\n\t\tbackgroundColor: theme.palette.primary.contrastText,\r\n\t\tmarginBottom: \".2rem\",\r\n\t},\r\n\tfilterBatch: {\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\tcolor: theme.palette.text.primary,\r\n\t},\r\n}));\r\n\r\nexport const FilterDashboard = (props) => {\r\n    const { selectedCircles, setSelectedCircles } = useContext(selectionContext);\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\r\n\tconst [filters, setFilters] = useState([]);\r\n\tconst [nStates, setNStates] = useState(12);\r\n\r\n    const handleChange = e => {\r\n        const state = e.target.name;\r\n\r\n        if (selectedCircles.selected.includes(state)) {\r\n            setSelectedCircles({\r\n                ...selectedCircles,\r\n                selected: selectedCircles.selected.filter(d => d !== state),\r\n                notSelected: [...selectedCircles.notSelected, state],\r\n            });\r\n        } else {\r\n            setSelectedCircles({\r\n                ...selectedCircles,\r\n                selected: [...selectedCircles.selected, state],\r\n                notSelected: selectedCircles.notSelected.filter(\r\n                    d => d !== state\r\n                ),\r\n            });\r\n        }\r\n\t};\r\n\r\n\tconst handleFilter = (newFilter) => {\r\n\t\tif (filters.length > 0) {\r\n\t\t\tsetFilters(prevState => [...prevState, newFilter])\r\n\t\t} else (\r\n\t\t\tsetFilters([newFilter])\r\n\t\t)\t\r\n\t};\r\n\t\r\n\tconst handleDeleteFilter = deletedFilter => {\r\n        const newFilterList = filters.filter(f => f.id !== deletedFilter.id);\r\n        setFilters(newFilterList);\r\n    };\r\n\r\n    const handleDeselectAll = () => {\r\n\t\tsetFilters([]);\r\n        setSelectedCircles(prevState => ({\r\n            ...prevState,\r\n            selected: [],\r\n            notSelected: prevState.all,\r\n        }));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <FormGroup className={classes.dashboard}>\r\n\r\n\t\t\t<FormControlLabel\r\n                    id=\"deselect-all\"\r\n                    label=\"Deselect All\"\r\n                    name=\"Deselect All\"\r\n                    onClick={handleDeselectAll}\r\n                    control={\r\n                        <IconButton\r\n                            id=\"deselector-all\"\r\n                            name=\"deselect-all\"\r\n                            style={{ color: \"red\" }}\r\n                        >\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                    }\r\n                /><br />\r\n\r\n\t\t\t\t<TextField \r\n\t\t\t\t\tid=\"n-states\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\tlabel=\"Filter n states\"\r\n\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\tinputProps: {\r\n\t\t\t\t\t\t\tmin: 1,\r\n\t\t\t\t\t\t\tmax: 50\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdefaultValue={nStates}\r\n\t\t\t\t\tonChange={(e) => setNStates(e.target.value)}\r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<Typography className={classes.dashboardTitle}>\r\n\t\t\t\t\tFilters\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Divider className={classes.dashboardDivider} />\r\n\t\t\t\t<FilterBatch \r\n\t\t\t\t\tclassName={classes.filterBatch}\r\n\t\t\t\t\tnStates={nStates}\r\n\t\t\t\t\tsetNStates={setNStates}\r\n\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\tsetFilters={setFilters}\r\n\t\t\t\t\thandleDeleteFilter={handleDeleteFilter}\r\n\t\t\t\t\thandleFilter={handleFilter}\r\n\t\t\t\t/>\r\n\r\n                <Typography className={classes.dashboardTitle}>\r\n                    Selected\r\n                </Typography>\r\n                <Divider className={classes.dashboardDivider} />\r\n                {selectedCircles.selected ? (\r\n                    selectedCircles.selected.sort().map((state, i) => {\r\n                        return (\r\n                            <FormControlLabel\r\n                                key={i}\r\n                                name={state}\r\n                                checked={selectedCircles.selected.includes(\r\n                                    state\r\n                                )}\r\n                                onChange={handleChange}\r\n                                control={<Checkbox name={state} style={{color: theme.palette.primary.contrastText}} />}\r\n                                label={state}\r\n                            />\r\n                        );\r\n                    })\r\n                ) : (\r\n                    <div />\r\n                )}\r\n                <br />\r\n\r\n                <Typography className={classes.dashboardTitle}>\r\n                    Not Selected\r\n                </Typography>\r\n                <Divider className={classes.dashboardDivider} />\r\n                {selectedCircles.notSelected ? (\r\n                    selectedCircles.notSelected.sort().map((state, i) => {\r\n                        return (\r\n                            <FormControlLabel\r\n                                key={i}\r\n                                name={state}\r\n                                checked={selectedCircles.selected.includes(\r\n                                    state\r\n                                )}\r\n                                onChange={handleChange}\r\n                                control={<Checkbox name={state} style={{color: theme.palette.primary.contrastText}} />}\r\n                                label={state}\r\n                            />\r\n                        );\r\n                    })\r\n                ) : (\r\n                    <div />\r\n                )}\r\n            </FormGroup>\r\n        </>\r\n    );\r\n};\r\n","import React from \"react\";\r\n\r\n// style\r\nimport { FormControl, InputLabel, Select, MenuItem, MenuList, Grid, useMediaQuery } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\trootContainer: {\r\n\t\tmaxWidth: 750,\r\n\t\tminWidth: 175,\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\tpadding: 0,\r\n\t\tmargin: 0,\r\n\t},\r\n\tfilterSelector: {\r\n        minWidth: 150,\r\n        fontWeight: 500,\r\n        fontSize: \".8rem\",\r\n        // marginRight: 30,\r\n    },\r\n    filterMenuItem: {\r\n        color: theme.palette.text.primary,\r\n        fontWeight: 500,\r\n        fontSize: \".8rem\",\r\n    },\r\n}));\r\n\r\nexport const ParamPicker = (props) => {\r\n\tconst { selector, handleSelector } = props;\r\n\tconst theme = useTheme();\r\n\r\n\tconst mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\tconst classes = useStyles();\r\n\r\n    return (\r\n\t\t<Grid container className={classes.rootContainer} style={mqSmall \r\n\t\t\t? {flexDirection: \"column\", alignItems: \"center\"} \r\n\t\t\t: {flexDirection: \"row\"}}\r\n\t\t>\r\n            {Object.keys(selector).map((p) => {\r\n                return (\r\n                    <FormControl key={selector[p].output}>\r\n                        <InputLabel>{selector[p].output}</InputLabel>\r\n                        <Select\r\n                            name={p}\r\n                            value={selector[p].selected}\r\n                            onChange={handleSelector}\r\n                            className={classes.filterSelector}\r\n                        >\r\n                            {selector[p].options.map((o) => {\r\n                                return (\r\n                                    <MenuItem\r\n                                        key={o}\r\n                                        value={o}\r\n                                        className={classes.filterMenuItem}\r\n                                    >\r\n                                        {o}\r\n                                    </MenuItem>\r\n                                );\r\n                            })}\r\n                        </Select>\r\n                    </FormControl>\r\n                );\r\n            })}\r\n        </Grid>\r\n    );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\n// components\r\nimport { FilterDashboard } from \"../FilterDashboard\";\r\nimport { ParamPicker } from \"../pickers/ParamPicker\";\r\n\r\n// style\r\nimport {\r\n    AppBar,\r\n    Toolbar,\r\n    IconButton,\r\n    Drawer,\r\n\tClickAwayListener,\r\n\tTooltip,\r\n\tuseMediaQuery,\r\n\tMenu,\r\n\tMenuList,\r\n\tTypography,\r\n\tButton,\r\n\tList\r\n} from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport BubbleChartIcon from \"@material-ui/icons/BubbleChart\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\n \r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: \"flex\",\r\n    },\r\n    appBar: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n        color: theme.palette.primary.contrastText,\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    menuButton: {\r\n        color: theme.palette.primary.contrastText,\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n    hide: {\r\n        display: \"none\",\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 1,\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n    },\r\n    drawerHeader: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        padding: theme.spacing(0, 1),\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: \"flex-end\",\r\n        backgroundColor: theme.palette.background.default,\r\n    },\r\n    tab: {\r\n        opacity: 0.7,\r\n    },\r\n    menuItem: {\r\n        opacity: 0.7,\r\n        \"&:hover\": {\r\n            opacity: 1,\r\n        },\r\n        toolbar: {\r\n            display: \"flex\",\r\n            justifyContent: \"flex-start\",\r\n        },\r\n    },\r\n}));\r\n\r\nexport const Navbar = (props) => {\r\n    const { data, selector, handleSelector } = props;\r\n\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n\tconst mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\r\n    const handleDrawer = () => {\r\n        setOpen(!open);\r\n\t};\r\n\t\r\n\tconst handleParamMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\r\n    const handleClickAway = (e) => {\r\n        if (e.x > drawerWidth && e.y > 70 && open) {\r\n            setOpen(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <AppBar\r\n                position=\"relative\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar className={classes.toolbar}>\r\n                    <IconButton\r\n                        onClick={handleDrawer}\r\n                        edge=\"start\"\r\n                        disableRipple\r\n                        className={clsx(\r\n                            classes.menuButton,\r\n                            open && classes.hide\r\n                        )}\r\n                    >\r\n                        <MenuIcon className={classes.menuButton} />\r\n                    </IconButton>\r\n\t\t\t\t\t{mqSmall \r\n\t\t\t\t\t\t? <span>\r\n\t\t\t\t\t\t\t\t<Tooltip title=\"Chart parameters\">\r\n\t\t\t\t\t\t\t\t\t<IconButton \r\n\t\t\t\t\t\t\t\t\t\tid=\"parameters-btn\" \r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.menuButton} \r\n\t\t\t\t\t\t\t\t\t\tonClick={handleParamMenu}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<AssessmentIcon />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\t\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"parameters-btn\") : false}\r\n\t\t\t\t\t\t\t\t\tonClose={handleParamMenu}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<List>\r\n\t\t\t\t\t\t\t\t\t<ParamPicker\r\n\t\t\t\t\t\t\t\t\t\tdata={data}\r\n\t\t\t\t\t\t\t\t\t\tselector={selector}\r\n\t\t\t\t\t\t\t\t\t\thandleSelector={handleSelector}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.filters}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t: <ParamPicker\r\n\t\t\t\t\t\t\tdata={data}\r\n\t\t\t\t\t\t\tselector={selector}\r\n\t\t\t\t\t\t\thandleSelector={handleSelector}\r\n\t\t\t\t\t\t\tclassName={classes.filters}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<span style={{marginLeft: \"auto\"}}>\r\n\t\t\t\t\t\t<Tooltip title=\"Line chart\">\r\n\t\t\t\t\t\t\t<IconButton component=\"a\" href=\"/covidcompare/#/line\" className={classes.menuButton}>\r\n\t\t\t\t\t\t\t\t<TimelineIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t<Tooltip title=\"Gapminder chart\">\r\n\t\t\t\t\t\t\t<IconButton component=\"a\" href=\"/covidcompare/#/gapminder\" className={classes.menuButton}>\r\n\t\t\t\t\t\t\t\t<BubbleChartIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</span>\r\n                </Toolbar>\r\n\r\n                <ClickAwayListener onClickAway={handleClickAway}>\r\n                    <Drawer\r\n                        className={classes.drawer}\r\n                        variant=\"persistent\"\r\n                        anchor=\"left\"\r\n                        open={open}\r\n                        classes={{\r\n                            paper: classes.drawerPaper,\r\n                        }}\r\n                    >\r\n                        <div\r\n                            className={classes.drawerHeader}\r\n                            style={{\r\n                                backgroundColor: theme.palette.primary.main,\r\n                            }}\r\n                        >\r\n                            <IconButton\r\n                                color=\"inherit\"\r\n                                edge=\"end\"\r\n                                onClick={handleDrawer}\r\n                                style={{\r\n                                    color: theme.palette.primary.contrastText,\r\n                                }}\r\n                            >\r\n                                <ChevronLeftIcon />\r\n                            </IconButton>\r\n                        </div>\r\n                        <FilterDashboard data={data} />\r\n                    </Drawer>\r\n                </ClickAwayListener>\r\n            </AppBar>\r\n        </>\r\n    );\r\n};\r\n","export const gapminderData = async (data, stateInfo, chartParams) => {\r\n\tconst { xParam, yParam, tParam } = chartParams;\r\n\tlet newData = [];\r\n\tObject.keys(stateInfo).forEach((state,i) => {\r\n\t\tlet eachState = {\r\n\t\t\tstate: state,\r\n\t\t\tregion: stateInfo[state].region,\r\n\t\t\t[tParam.selected]: [],\r\n\t\t\t[xParam.selected]: [],\r\n\t\t\t[xParam.alt1]: [],\r\n\t\t\t[yParam.selected]: [],\r\n\t\t\t[yParam.alt1]: [],\r\n\t\t};\r\n\r\n\t\tconst filtered = data.filter(d => d.state === state);\r\n\t\tfiltered.forEach((d,i) => {\r\n\t\t\teachState[tParam.selected].push([d[tParam.selected], d[tParam.selected]]);\r\n\t\t\teachState[xParam.selected].push([d[tParam.selected], d[xParam.selected]]);\r\n\t\t\teachState[yParam.selected].push([d[tParam.selected], d[yParam.selected]]);\r\n\t\t\teachState[xParam.alt1].push([d[tParam.selected], d[xParam.alt1]]);\r\n\t\t\teachState[yParam.alt1].push([d[tParam.selected], d[yParam.alt1]]);\r\n\t\t});\r\n\t\tnewData.push(eachState);\r\n\t});\r\n\r\n\treturn newData;\r\n};","import React, { useState, useEffect, useContext } from 'react';\r\n\r\n// params\r\nimport { wrapper, bounded, chartParams, labelParams } from \"./appParams\";\r\n\r\n// components\r\nimport { ChartGapminder } from './chart/ChartGapminder'; \r\nimport { Navbar } from './interface/Navbar';\r\n\r\n// context\r\nimport { dataContext } from '../../context/dataContext';\r\nimport { selectionContext } from '../../context/selectionContext';\r\n\r\n// data\r\nimport stateInfo from '../../data/stateInfo.json';\r\nimport { gapminderData } from './gapminderData';\r\n\r\n// style\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tnavbar: {\r\n\t\twidth: bounded.width,\r\n\t\tmarginLeft: wrapper.marginLeft,\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-start',\r\n\t}\r\n}))\r\n\r\nexport const AppGapminder = () => {\r\n\tconst {dataStates} = useContext(dataContext);\r\n\tconst [data, setData] = useState(null);\r\n\tconst [selector, setSelector] = useState({\r\n\t\txParam: chartParams.xParam, \r\n\t\tyParam: chartParams.yParam, \r\n\t\tzParam: chartParams.zParam, \r\n\t\tcParam: chartParams.cParam, \r\n\t});\r\n\tconst [selectedCircles, setSelectedCircles] = useState({\r\n\t\tselected: [], \r\n\t\tnotSelected: Object.keys(stateInfo), \r\n\t\tall: Object.keys(stateInfo)\r\n\t});\r\n\r\n\t// style\r\n\tconst { wrapperWidth, wrapperHeight, marginTop, marginBottom, marginLeft, marginRight } = wrapper;\r\n\tconst { width, height } = bounded;\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleSelector = (e) => {\r\n\t\tconst param = e.target.name;\r\n\r\n\t\tsetSelector({\r\n\t\t\t...selector,\r\n\t\t\t[param]: {\r\n\t\t\t\t...selector[param],\r\n\t\t\t\tselected: e.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (dataStates.length > 0) {\r\n\t\t\tgapminderData(dataStates, stateInfo, chartParams)\r\n\t\t\t\t.then(res => setData(res))\r\n\t\t}\r\n\t}, [dataStates]);\r\n\r\n\treturn (\r\n\t\t<selectionContext.Provider value={{selectedCircles, setSelectedCircles}}>\r\n\t\t\t<Navbar \t\t\t\t\t\t\t\t\r\n\t\t\t\tdata={data} \r\n\t\t\t\tselector={selector} \r\n\t\t\t\thandleSelector={handleSelector}\r\n\t\t\t\tclassName={classes.navbar}\r\n\t\t\t/>\r\n\t\t\t<div transform={`translate(${marginLeft}, ${marginTop})`}>\r\n\t\t\t\t{data \r\n\t\t\t\t\t&& <ChartGapminder \r\n\t\t\t\t\t\tselector={selector}\r\n\t\t\t\t\t\tdata={data}\r\n\t\t\t\t\t\twrapper={wrapper} \r\n\t\t\t\t\t\tbounded={bounded} \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</selectionContext.Provider>\r\n\t)\r\n};\r\n","import { useEffect, useContext } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\n// context\r\nimport { dataContext } from '../../context/dataContext';\r\n\r\n// constants\r\nimport { date } from '../util/constants';\r\n\r\nexport const MouseMove = (props) => {\r\n\tconst { focus, overlay, linesStates, selectedStates, wrapperDim, boundedDim } = props;\r\n\tconst {\r\n        wrapperWidth,\r\n        wrapperHeight,\r\n        marginLeft,\r\n        marginRight,\r\n        marginBottom,\r\n        marginTop,\r\n    } = wrapperDim;\r\n    const { width, height } = boundedDim;\r\n\tconst { dataStates } = useContext(dataContext);\r\n\t\r\n    const xScale = d3.scaleLinear().domain(d3.extent(dataStates, d => d.dayOfOutbreak)).range([0, width]);\r\n    const yScale = d3.scaleLinear().domain(d3.extent(dataStates, d => d.casesPerThousand)).range([height, 0]);\r\n\r\n    useEffect(() => {\r\n        if (overlay && selectedStates) {\r\n\t\t\t\r\n            overlay.on('mousemove', mousemove);\r\n\r\n            let frozen = false;\r\n\r\n            function mousemove() {\r\n                let x0 = xScale.invert(d3.mouse(this)[0]);\r\n\t\t\t\tconst bisectDate = d3.bisector(d => d.dayOfOutbreak).left;\r\n\r\n                Object.keys(selectedStates).sort()\r\n                    .filter(s => selectedStates[s].selected === true)\r\n                    .forEach(state => {\r\n                        const dataEachState = dataStates.filter(d => d.state === state);\r\n                        const stateHTML = selectedStates[state].htmlFormat;\r\n                        const i = bisectDate(dataEachState, x0, 0);\r\n\r\n                        let dataEachStateRangeY = dataEachState[i]\r\n                            ? dataEachState[i].casesPerThousand \r\n                            : dataEachState[dataEachState.length - 1].casesPerThousand;\r\n                        let dataEachStateRangeX = dataEachState[i] \r\n                            ? dataEachState[i].dayOfOutbreak \r\n                            : dataEachState[dataEachState.length - 1].dayOfOutbreak;\r\n                        let dataEachStateRangeDate = dataEachState[i] \r\n                            ? date.dateFormatter(dataEachState[i].date) \r\n                            : date.dateFormatter(dataEachState[dataEachState.length - 1].date);\r\n                        let dataEachStateRangeCases = dataEachState[i]\r\n                            ? dataEachState[i].cases \r\n                            : dataEachState[dataEachState.length - 1].cases;\r\n\r\n                        const toggleFreeze = () => {\r\n\t\t\t\t\t\t\tfrozen = !frozen;\r\n                        };\r\n\r\n                        overlay.on('click', toggleFreeze);\r\n\r\n                        if (!frozen) {\r\n                            focus.select(`#circle-${stateHTML}`)\r\n                                .attr('cy', yScale(dataEachStateRangeY))\r\n                                .attr('cx', xScale(dataEachStateRangeX));\r\n\r\n                            focus.select(`#d-label-${stateHTML}`)\r\n                                .text(`${selectedStates[state].abbreviation} => Day ${dataEachStateRangeX} (${dataEachStateRangeDate.split(\"-\").slice(0,2).join(\"-\")})`)\r\n\t\t\t\t\t\t\t\t.attr('fill', selectedStates[state].color)\r\n\r\n                            focus.select(`#d-label-b-${stateHTML}`)\r\n                                .text(`${dataEachStateRangeY.toFixed(3)} (${dataEachStateRangeCases} tot.)`)\r\n                                .attr('fill', selectedStates[state].color)\r\n                        } \r\n                    });\r\n                }\r\n\t\t\t}\r\n\t}, [linesStates]);\r\n\t\r\n    return null;\r\n};","import React, { useState, useContext, useEffect } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\n// functions\r\nimport { MouseMove } from \"../../util/MouseMove\";\r\n\r\n// context\r\nimport { dataContext } from \"../../../context/dataContext\";\r\nimport { statesContext } from \"../../../context/statesContext\";\r\n\r\n// style\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport { useMediaQuery } from \"@material-ui/core\";\r\n\r\nexport const Line = props => {\r\n    const {\r\n        chartParams,\r\n\t\tlabelParams,\r\n        focus,\r\n\t\toverlay,\r\n        selectedStates,\r\n        wrapperDim,\r\n\t\tboundedDim,\r\n    } = props;\r\n    const { xParam, yParam } = chartParams;\r\n    const {\r\n        wrapperWidth,\r\n        wrapperHeight,\r\n        marginLeft,\r\n        marginRight,\r\n        marginBottom,\r\n        marginTop,\r\n    } = wrapperDim;\r\n    const { width, height } = boundedDim;\r\n\r\n    // context\r\n    const { dataStates } = useContext(dataContext);\r\n\tconst { infoStates } = useContext(statesContext);\r\n\r\n    // style\r\n    const theme = useTheme();\r\n\tconst mqMedium = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n\tconst mqLarge = useMediaQuery(theme.breakpoints.up(\"lg\"));\r\n\r\n\tconst [linesStates, setLinesStates] = useState([]);\r\n\r\n\tconst filterStates = statesObject => {\r\n\t\tlet filtered = Object.keys(statesObject)\r\n\t\t\t.sort()\r\n\t\t\t.filter(s => statesObject[s].selected === true);\r\n\t\treturn filtered;\r\n\t};\r\n\r\n    useEffect(() => {\r\n        if (selectedStates && dataStates.length > 0) {\r\n\t\t\t// Scales\r\n            const xScale = d3\r\n                .scaleLinear()\r\n                .domain(d3.extent(dataStates, d => d.dayOfOutbreak))\r\n                .range([0, width]);\r\n            const yScale = d3\r\n                .scaleLinear()\r\n                .domain(d3.extent(dataStates, d => d.casesPerThousand))\r\n                .range([height, 0]);\r\n\r\n            // Lines\r\n            const lineGenerator = d3\r\n                .line()\r\n                .x(d => xScale(d.dayOfOutbreak))\r\n                .y(d => yScale(d.casesPerThousand));\r\n\r\n            const linesObject = {};\r\n\r\n\t\t\tconst filtered = filterStates(selectedStates)\r\n\t\t\tfiltered\r\n                .forEach((state, i) => {\r\n                    const dataEachState = dataStates.filter(\r\n                        d => d.state === state\r\n                    );\r\n                    // Line label placement\r\n                    const lastDayOfOutbreak =\r\n                        dataEachState[dataEachState.length - 1].dayOfOutbreak;\r\n                    const lastCasesPerThousand =\r\n                        dataEachState[dataEachState.length - 1]\r\n                            .casesPerThousand;\r\n\r\n                    // markers for lockdown date\r\n                    const lockdownDate = selectedStates[state].lockdown;\r\n                    const lockdownDay =\r\n                        (lockdownDate - dataEachState[0].date) /\r\n                            (24 * 60 * 60 * 10 * 10 * 10) +\r\n                        1;\r\n                    const lockdownDayDatum = dataEachState.filter(\r\n                        d => d.dayOfOutbreak === lockdownDay\r\n                    )[0];\r\n\r\n                    if (lockdownDayDatum) {\r\n                        linesObject[state] = {\r\n                            line: lineGenerator(dataEachState),\r\n                            lineLabelX: xScale(lastDayOfOutbreak) + 3,\r\n                            lineLabelY: yScale(lastCasesPerThousand),\r\n                            lockdownMarkerX: xScale(lockdownDay),\r\n                            lockdownMarkerY: yScale(\r\n                                lockdownDayDatum.casesPerThousand\r\n                            ),\r\n                        };\r\n                    } else {\r\n                        linesObject[state] = {\r\n                            line: lineGenerator(dataEachState),\r\n                            lineLabelX: xScale(lastDayOfOutbreak) + 3,\r\n                            lineLabelY: yScale(lastCasesPerThousand),\r\n                        };\r\n                    }\r\n                });\r\n            setLinesStates(linesObject);\r\n        };\r\n\t}, [dataStates, selectedStates, theme]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(\"Planning to append focus\")\r\n\t\tif (selectedStates) {\r\n\t\t\tconsole.log(\"Appending focus\")\r\n\t\t\tconst filtered = filterStates(selectedStates);\r\n\r\n\t\t\tfiltered\r\n\t\t\t.forEach((state, i) => {\r\n\t\t\t\tconst stateHTML = infoStates[state].htmlFormat;\r\n\t\t\t\t// for mousemove\r\n\t\t\t\tlet xShift = 0;\r\n\t\t\t\tlet yShift = 0;\r\n\r\n\t\t\t\tif (i > 11) {\r\n\t\t\t\t\tif (mqLarge) {\r\n\t\t\t\t\t\txShift = 180;\r\n\t\t\t\t\t\tyShift = 12 * 40;\r\n\t\t\t\t\t} else if (mqMedium) {\r\n\t\t\t\t\t\txShift = 120;\r\n\t\t\t\t\t\tyShift = 12 * 40;\r\n\t\t\t\t\t} \r\n\t\t\t\t}\r\n\r\n\t\t\t\tfocus\r\n\t\t\t\t\t.append(\"circle\")\r\n\t\t\t\t\t.attr(\"id\", `circle-${stateHTML}`)\r\n\t\t\t\t\t.attr(\"r\", 5)\r\n\t\t\t\t\t.attr(\"fill\", selectedStates[state].color)\r\n\t\t\t\t\t.attr(\"stroke\", theme.palette.text.primary);\r\n\r\n\t\t\t\tif (mqMedium ? i < 24 : i < 12) {\r\n\t\t\t\t\tfocus\r\n\t\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t\t.attr(\"id\", `d-label-${stateHTML}`)\r\n\t\t\t\t\t\t.attr(\"x\", 10 + xShift)\r\n\t\t\t\t\t\t.attr(\"y\", d => mqMedium ? 10 + i * 40 - yShift : 10 + i * 30)\r\n\t\t\t\t\t\t.style(\"font-size\", d => mqLarge ? \".8rem\" : \".6rem\")\r\n\t\t\t\t\t\t.style(\r\n\t\t\t\t\t\t\t\"font-family\",\r\n\t\t\t\t\t\t\t\"ralewaymedium, Helvetica, Arial, sans-serif\"\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\tfocus\r\n\t\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t\t.attr(\"id\", `d-label-b-${stateHTML}`)\r\n\t\t\t\t\t\t.attr(\"x\", 10 + xShift)\r\n\t\t\t\t\t\t.attr(\"y\", d => mqMedium ? 25 + i * 40 - yShift : 25 + i * 30)\r\n\t\t\t\t\t\t.style(\"font-size\", d => mqLarge ? \".8rem\" : \".6rem\")\r\n\t\t\t\t\t\t.style(\r\n\t\t\t\t\t\t\t\"font-family\",\r\n\t\t\t\t\t\t\t\"ralewaymedium, Helvetica, Arial, sans-serif\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tfocus.selectAll(\"circle\").remove();\r\n\t\t\tfocus.selectAll(\"text\").remove();\r\n        };\r\n\t}, [linesStates]);\r\n\r\n    return (\r\n        <>\t\r\n            <MouseMove\r\n                focus={focus}\r\n\t\t\t\toverlay={overlay}\r\n\t\t\t\tlinesStates={linesStates}\r\n                {...props}\r\n            />\r\n            {dataStates.length > 0 ? (\r\n                Object.keys(linesStates)\r\n                    .sort()\r\n                    .map((state, i) => {\r\n                        const stateHTML = infoStates[state].htmlFormat;\r\n\r\n                        return (\r\n\t\t\t\t\t\t\t<>\r\n                            <g key={i} id={`bounds-render-${stateHTML}`}>\r\n                                <path\r\n                                    fill=\"none\"\r\n                                    stroke={selectedStates[state].color}\r\n                                    strokeWidth={2.5}\r\n                                    strokeLinejoin=\"round\"\r\n                                    strokeLinecap=\"round\"\r\n                                    d={linesStates[state].line}\r\n                                />\r\n                                <circle\r\n                                    id=\"line-marker-lockdown\"\r\n                                    r={4}\r\n                                    fill={\r\n                                        linesStates[state].lockdownMarkerX\r\n                                            ? selectedStates[state].color\r\n                                            : \"none\"\r\n                                    }\r\n                                    cx={linesStates[state].lockdownMarkerX}\r\n                                    cy={linesStates[state].lockdownMarkerY}\r\n                                />\r\n                                <text\r\n                                    id={`line-label-${stateHTML}`}\r\n                                    className=\"line-label\"\r\n                                    style={{\r\n                                        fill: theme.palette.text.primary,\r\n                                        fontSize: \"14px\",\r\n                                        fontFamily:\r\n                                            \"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n                                    }}\r\n                                    x={linesStates[state].lineLabelX}\r\n                                    y={linesStates[state].lineLabelY}\r\n                                >\r\n                                    {selectedStates[state].abbreviation}\r\n                                </text>\r\n                            </g>\r\n\t\t\t\t\t\t\t</>\r\n                        );\r\n                    })\r\n            ) : (\r\n                <g></g>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import React, { useContext, useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\n// Components\r\nimport { Line } from \"./Line\";\r\n\r\n// Context\r\nimport { dataContext } from \"../../../context/dataContext\";\r\n\r\n// Styles\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    title: {\r\n        fill: theme.palette.text.primary,\r\n        fontSize: \"1.2rem\",\r\n    },\r\n    axes: {\r\n        fill: theme.palette.text.primary,\r\n    },\r\n    axisLabel: {\r\n        fill: theme.palette.text.primary,\r\n        fontSize: \".8rem\",\r\n    },\r\n    footnotes: {\r\n        fontSize: \".6rem\",\r\n    },\r\n}));\r\n\r\nexport const ChartUSCompare = props => {\r\n\tconst { wrapperDim, boundedDim } = props;\r\n\tconst { wrapperWidth, wrapperHeight, marginLeft, marginRight, marginBottom, marginTop } = wrapperDim;\r\n\tconst { width, height } = boundedDim;\r\n\tconst { dataStates } = useContext(dataContext);\r\n\r\n\tconst theme = useTheme();\r\n\tlet classes = useStyles();\r\n\r\n    const yAxisRef = useRef(null);\r\n    const xAxisRef = useRef(null);\r\n    const svgRef = useRef(null);\r\n\tconst boundsRef = useRef(null);\r\n\r\n\tconst getFocus = () => {\r\n\t\treturn d3\r\n\t\t\t.select(boundsRef.current)\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"focus\")\r\n\t\t\t.style(\"display\", \"none\");\r\n\t};\r\n\tconst focus = getFocus();\r\n\r\n\tconst getOverlay = () => {\r\n\t\treturn d3\r\n\t\t\t.select(boundsRef.current)\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"overlay\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height)\r\n\t\t\t.attr(\"opacity\", \"0\")\r\n\t\t\t.on(\"mouseover\", () => focus.style(\"display\", null));\r\n\t};\r\n\tconst overlay = getOverlay();\r\n\r\n    useEffect(() => {\r\n        // Scales\r\n        const xScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d.dayOfOutbreak))\r\n            .range([0, width]);\r\n        const yScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d.casesPerThousand))\r\n            .range([height, 0]);\r\n\r\n        // Axes\r\n        const yAxisGenerator = d3.axisLeft().scale(yScale);\r\n        const xAxisGenerator = d3.axisBottom().scale(xScale);\r\n        d3.select(xAxisRef.current).call(xAxisGenerator);\r\n        d3.select(yAxisRef.current).call(yAxisGenerator);\r\n\t}, [dataStates, theme]);\r\n\r\n    return (\r\n\t\t<>\r\n            <svg id=\"covidcompare\" height={wrapperHeight} width={wrapperWidth} ref={svgRef}>\r\n                <text\r\n                    className={classes.title}\r\n                    style={{\r\n                        fill: theme.palette.text.primary,\r\n                        fontFamily:\r\n                            \"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n                    }}\r\n                    textAnchor=\"middle\"\r\n                    transform={`translate (${\r\n                        marginLeft + width / 2\r\n                    }, ${marginTop / 2})`}\r\n                >\r\n                    COVID-19 US State Comparison\r\n                </text>\r\n                <text\r\n                    className={classes.axisLabel}\r\n                    style={{\r\n                        fill: theme.palette.text.primary,\r\n                        fontFamily:\r\n                            \"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n                    }}\r\n                    textAnchor=\"middle\"\r\n                    transform={`translate(${marginLeft + width / 2}, ${\r\n                        height + marginTop + 40\r\n                    })`}\r\n                >\r\n                    Day of Outbreak\r\n                </text>\r\n                <text\r\n                    className={classes.axisLabel}\r\n                    style={{\r\n                        fill: theme.palette.text.primary,\r\n                        fontFamily:\r\n                            \"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n                    }}\r\n                    textAnchor=\"middle\"\r\n                    transform={`translate(${\r\n                        marginLeft * .6\r\n                    }, ${height / 2}) rotate(-90)`}\r\n                >\r\n                    Cases per 1000 people\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{\r\n                        fill: theme.palette.text.primary,\r\n                        fontFamily:\r\n                            \"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n                    }}\r\n                    transform={`translate(${marginLeft}, ${\r\n                        height + marginTop + 60\r\n                    })`}\r\n                >\r\n                    *Data from The New York Times, based on reports from state\r\n                    and local health agencies.\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{\r\n                        fill: theme.palette.text.primary,\r\n                        fontFamily:\r\n                            \"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n                    }}\r\n                    transform={`translate(${marginLeft}, ${\r\n                        height + marginTop + 80\r\n                    })`}\r\n                >\r\n                    **Population data from US Census Bureau (2019).\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{\r\n                        fill: theme.palette.text.primary,\r\n                        fontFamily:\r\n                            \"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n                    }}\r\n                    transform={`translate(${marginLeft}, ${\r\n                        height + marginTop + 100\r\n                    })`}\r\n                >\r\n                    ***2/27 is earliest possible 'Day 1,' since prior cases were\r\n                    isolated and may skew insights of \"community spread\"\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{\r\n                        fill: theme.palette.text.primary,\r\n                        fontFamily:\r\n                            \"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n                    }}\r\n                    transform={`translate(${marginLeft}, ${\r\n                        height + marginTop + 120\r\n                    })`}\r\n                >\r\n                    Legend will display up to 24 states (alphabetical order)\r\n                </text>\r\n                <g\r\n                    id=\"bounds\"\r\n                    transform={`translate(${marginLeft}, ${marginTop})`}\r\n                    ref={boundsRef}\r\n                >\r\n                    <g\r\n                        ref={yAxisRef}\r\n                        id=\"y-axis\"\r\n                        style={{\r\n                            color: theme.palette.text.primary,\r\n                            fontFamily:\r\n                                \"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n                        }}s\r\n                    />\r\n                    <g\r\n                        ref={xAxisRef}\r\n                        id=\"x-axis\"\r\n                        transform={`translate(0,${height})`}\r\n                        style={{\r\n                            color: theme.palette.text.primary,\r\n                            fontFamily:\r\n                                \"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n                        }}\r\n                    />\r\n                    <Line focus={focus} overlay={overlay} {...props} />\r\n                </g>\r\n            </svg>\r\n\t\t</>\r\n    );\r\n};\r\n","// REUSABLE COMPONENT\r\n\r\nimport React from 'react';\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { MenuItem } from \"@material-ui/core\";\r\n\r\nexport const FilterValues = (props) => {\r\n\tconst { filterOptions, handleSelectedFilter, handleMenu } = props;\r\n\r\n\tconst handleMenuClick = (newFilter) => {\r\n\t\thandleMenu();\r\n\t\thandleSelectedFilter(newFilter);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{filterOptions.map(o => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\tkey={o.id}\r\n\t\t\t\t\t\tid={o.id} \r\n\t\t\t\t\t\tonClick={() => handleMenuClick(o)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{o.name}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nFilterValues.propTypes = {\r\n\tfilterOptions: PropTypes.shape([{\r\n\t\tid: PropTypes.string.isRequired, // unique ID; html format \r\n\t\tname: PropTypes.string, // user-facing name of filter \r\n\t\ttype: PropTypes.string, // user-facing parameter being filtered (eg. \"GDP\")\r\n\t\tchartParam: PropTypes.string.isRequired, // match exact parameter name (eg. \"realGDP2019\")\r\n\t\tn: PropTypes.number.isRequired, // number of cases (ie. rows or documents) to filter\r\n\t\tsort: PropTypes.string.isRequired // \"ascending or descending\"\r\n\t}]),\r\n\tinfo: PropTypes.objectOf(PropTypes.object).isRequired\r\n};","// WRAPPER COMPONENT (FilterValues)\r\n\r\nimport React, { useState } from 'react';\r\nimport { FilterValues } from \"../components/FilterValues\";\r\n\r\nimport { Menu, Button } from \"@material-ui/core\";\r\n\r\nexport const FilterCases = (props) => {\r\n\tconst { nStates, handleSelectedFilter } = props;\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\t\r\n\tconst filterOptions = [\r\n\t\t{id: \"cases-high\", name: `Top ${nStates} (total)`, type: \"Cases\", chartParam: \"latestCaseCount\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"cases-low\", name: `Bottom ${nStates} (total)`, type: \"Cases\", chartParam: \"latestCaseCount\", sort: \"ascending\", n: nStates},\r\n\t\t{id: \"cases-per-1000-high\", name: `Top ${nStates} (per 1000)`, type: \"Cases\", chartParam: \"latestCaseCountPerThou\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"cases-per-1000-low\", name: `Bottom ${nStates} (per 1000)`, type: \"Cases\", chartParam: \"latestCaseCountPerThou\", sort: \"ascending\", n: nStates},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button id=\"cases-btn\" onClick={handleMenu}>\r\n\t\t\t\tFilter By Case\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"cases-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t<FilterValues \r\n\t\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t\t\thandleMenu={handleMenu}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n};\r\n","// WRAPPER COMPONENT (FilterValues)\r\n\r\nimport React, { useState } from 'react';\r\nimport { FilterValues } from \"../components/FilterValues\";\r\n\r\nimport { Menu, Button } from \"@material-ui/core\";\r\n\r\nexport const FilterPopulation = (props) => {\r\n\tconst { nStates, handleSelectedFilter } = props;\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\t\r\n\tconst filterOptions = [\r\n\t\t{id: \"pop-high\", name: `Top ${nStates} (pop. total)`, type: \"Pop.\", chartParam: \"population\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"pop-low\", name: `Bottom ${nStates} (pop. total)`, type: \"Pop.\", chartParam: \"population\", sort: \"ascending\", n: nStates},\r\n\t\t{id: \"pop-density-high\", name: `Top ${nStates} (pop. density)`, type: \"Pop.\", chartParam: \"populationDensity\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"pop-density-low\", name: `Bottom ${nStates} (pop. density)`, type: \"Pop.\", chartParam: \"populationDensity\", sort: \"ascending\", n: nStates}\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button id=\"population-btn\" onClick={handleMenu}>\r\n\t\t\t\tFilter By Population\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"population-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t<FilterValues \r\n\t\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t\t\thandleMenu={handleMenu}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n};\r\n","// REUSABLE COMPONENT\r\n\r\nimport React from 'react';\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { MenuItem } from \"@material-ui/core\";\r\n\r\nexport const FilterCategories = (props) => {\r\n\tconst { filterOptions, handleSelectedFilter, handleMenu } = props;\r\n\r\n\tconst handleMenuClick = (newFilter) => {\r\n\t\thandleMenu();\r\n\t\thandleSelectedFilter(newFilter);\r\n\t}; \r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{filterOptions.map(o => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\tkey={o.id}\r\n\t\t\t\t\t\tid={o.id} \r\n\t\t\t\t\t\tonClick={() => handleMenuClick(o)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{o.name}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nFilterCategories.propTypes = {\r\n\tfilterOptions: PropTypes.shape([{\r\n\t\tid: PropTypes.string.isRequired, // unique ID; html format \r\n\t\tname: PropTypes.string, // user-facing name of filter \r\n\t\ttype: PropTypes.string, // user-facing parameter being filtered (eg. \"Region\")\r\n\t\tchartParam: PropTypes.string.isRequired, // match exact parameter name (eg. \"region\")\r\n\t}]),\r\n\tinfo: PropTypes.objectOf(PropTypes.object).isRequired\r\n};","// WRAPPER COMPONENT (FilterCategories)\r\n\r\nimport React, { useState } from 'react';\r\n\r\n// components\r\nimport { FilterCategories } from \"../components/FilterCategories\";\r\n\r\nimport { Menu, Button } from \"@material-ui/core\";\r\n\r\nexport const FilterRegion = (props) => {\r\n\tconst { handleSelectedFilter } = props;\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\t\r\n\tconst filterOptions = [\r\n\t\t{id: \"northeast\", name: \"Northeast\", type: \"Region\", chartParam: \"region\"},\r\n\t\t{id: \"midwest\", name: \"Midwest\", type: \"Region\", chartParam: \"region\"},\r\n\t\t{id: \"south\", name: \"South\", type: \"Region\", chartParam: \"region\"},\r\n\t\t{id: \"west\", name: \"West\", type: \"Region\", chartParam: \"region\"}\r\n\t];\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button id=\"region-btn\" onClick={handleMenu}>\r\n\t\t\t\tFilter By Region\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"region-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t<FilterCategories \r\n\t\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t\t\thandleMenu={handleMenu}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n};\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { Button, Menu, MenuItem, Typography, Divider } from \"@material-ui/core\";\r\nimport { DatePicker } from \"@material-ui/pickers\";\r\n\r\n// components\r\nimport { FilterCases } from \"./FilterCases\";\r\nimport { FilterGDP } from \"./FilterGDP\";\r\nimport { FilterPopulation } from \"./FilterPopulation\";\r\nimport { FilterRegion } from \"./FilterRegion\";\r\n\r\n// context\r\nimport { statesContext } from \"../../../context/statesContext\";\r\n\r\n// styles\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    tab: {\r\n        opacity: 0.7,\r\n    },\r\n    menuItem: {\r\n        opacity: 0.7,\r\n        \"&:hover\": {\r\n            opacity: 1,\r\n        },\r\n    },\r\n}));\r\n\r\nexport const BatchSelect = props => {\r\n    const { selectedStates, setSelectedStates } = props;\r\n\r\n    // ref and context\r\n\tconst { infoStates } = useContext(statesContext);\r\n\r\n    // assign\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const [selectedFilter, setSelectedFilter] = useState(null);\r\n    const [selectedDate, setDateChange] = useState(new Date());\r\n\r\n    // style\r\n    const classes = useStyles();\r\n\r\n    const handleMenu = e => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n    };\r\n\r\n    const handleDateChange = e => {\r\n        setDateChange(e);\r\n\t};\r\n\t\r\n\tconst handleSelectedFilter = (newSelectedFilter) => {\r\n\t\tsetSelectedFilter(newSelectedFilter);\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\tconst handleFilterCategories = (newFilter, info) => {\r\n        const filtered = Object.keys(info).filter(\r\n            s => info[s][newFilter.chartParam] === newFilter.name\r\n\t\t);\r\n\r\n\t\tlet newSelection = {};\r\n\t\tObject.keys(info).forEach(s => {\r\n\t\t\tif (filtered.includes(s)) {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: true}\r\n\t\t\t} else {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: false}\r\n\t\t\t}\r\n\t\t});\r\n\r\n        return newSelection;\r\n    };\r\n\t\r\n    const handleFilterValues = (newFilter, info) => {\r\n\t\tconst n = newFilter.n;\r\n\t\tlet filtered;\r\n\r\n\t\tfiltered = Object.keys(info)\r\n\t\t.sort((a, b) =>\r\n\t\t\tnewFilter.sort === \"descending\"\r\n\t\t\t\t? info[b][newFilter.chartParam] -\r\n\t\t\t\t\tinfo[a][newFilter.chartParam]\r\n\t\t\t\t: info[a][newFilter.chartParam] -\r\n\t\t\t\t\tinfo[b][newFilter.chartParam]\r\n\t\t)\r\n\t\t.slice(0, n);\r\n\t\t\t\r\n\t\tlet newSelection = {};\r\n\t\tObject.keys(info).forEach(s => {\r\n\t\t\tif (filtered.includes(s)) {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: true}\r\n\t\t\t} else {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: false}\r\n\t\t\t}\r\n\t\t});\r\n\r\n        return newSelection;\r\n    };\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (selectedFilter) {\r\n\t\t\tconst newSelection = selectedFilter.n \r\n\t\t\t\t? handleFilterValues(selectedFilter, infoStates)\r\n\t\t\t\t: handleFilterCategories(selectedFilter, infoStates);\r\n\t\t\tsetSelectedStates(newSelection);\r\n\t\t}\r\n\t},[selectedFilter]);\r\n\r\n    return (\r\n        <span>\r\n\t\t\t<FilterCases\r\n\t\t\t\taria-controls=\"cases-btn\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tclassName={classes.tab}\r\n\t\t\t\tnStates={12}\r\n\t\t\t\tselectedStates={selectedStates}\r\n\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t/>\r\n\t\t\t<FilterPopulation\r\n\t\t\t\taria-controls=\"population-btn\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tclassName={classes.tab}\r\n\t\t\t\tnStates={12}\r\n\t\t\t\tselectedStates={selectedStates}\r\n\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t/>\r\n\t\t\t<FilterRegion\r\n\t\t\t\taria-controls=\"region-btn\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tclassName={classes.tab}\r\n\t\t\t\tselectedStates={selectedStates}\r\n\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t/>\r\n        </span>\r\n    );\r\n};","import React, { useContext } from \"react\";\r\nimport {\r\n    IconButton,\r\n    FormControlLabel,\r\n    FormGroup,\r\n    Checkbox,\r\n    Typography,\r\n    Divider,\r\n} from \"@material-ui/core\";\r\n\r\n// context\r\nimport { dataContext } from \"../../../context/dataContext\";\r\n\r\n// styles\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\n\r\nexport const Dashboard = props => {\r\n    const {\r\n        selectedStates,\r\n        handleSelectedStates,\r\n        handleSelectAllStates,\r\n        handleDeselectAllStates,\r\n    } = props;\r\n\r\n    const theme = useTheme();\r\n\r\n    return (\r\n        <div>\r\n            <FormGroup\r\n                style={{\r\n                    alignItems: \"left\",\r\n                    backgroundColor: theme.palette.primary.main,\r\n                    color: theme.palette.text.primary,\r\n                }}\r\n            >\r\n                <FormControlLabel\r\n                    id=\"select-all\"\r\n                    label=\"Select All\"\r\n                    name=\"Select All\"\r\n                    onClick={handleSelectAllStates}\r\n                    control={\r\n                        <IconButton\r\n                            id=\"selector-all\"\r\n                            name=\"select-all\"\r\n                            style={{ color: \"white\" }}\r\n                        >\r\n                            <CheckIcon />\r\n                        </IconButton>\r\n                    }\r\n                />\r\n                <FormControlLabel\r\n                    id=\"deselect-all\"\r\n                    label=\"Deselect All\"\r\n                    name=\"Deselect All\"\r\n                    onClick={handleDeselectAllStates}\r\n                    control={\r\n                        <IconButton\r\n                            id=\"deselector-all\"\r\n                            name=\"deselect-all\"\r\n                            style={{ color: \"red\" }}\r\n                        >\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                    }\r\n                />\r\n                <br />\r\n                <Typography\r\n                    variant=\"h6\"\r\n                    style={{ color: theme.palette.primary.contrastText }}\r\n                >\r\n                    Selected\r\n                </Typography>\r\n                <Divider\r\n                    style={{\r\n                        backgroundColor: theme.palette.primary.contrastText,\r\n                    }}\r\n                />\r\n                {selectedStates ? (\r\n                    Object.keys(selectedStates)\r\n                        .sort()\r\n                        .filter(s => selectedStates[s].selected === true)\r\n                        .map((state, i) => {\r\n                            return (\r\n                                <FormControlLabel\r\n                                    key={i}\r\n                                    id={selectedStates[state].htmlFormat}\r\n                                    name={state}\r\n                                    checked={selectedStates[state].selected}\r\n                                    onChange={handleSelectedStates}\r\n                                    control={\r\n                                        <Checkbox\r\n                                            name={state}\r\n                                            style={{\r\n                                                color:\r\n                                                    selectedStates[state].color,\r\n                                            }}\r\n                                        />\r\n                                    }\r\n                                    label={`${state} (${selectedStates[state].abbreviation})`}\r\n                                />\r\n                            );\r\n                        })\r\n                ) : (\r\n                    <div />\r\n                )}\r\n                <br />\r\n                <Typography\r\n                    variant=\"h6\"\r\n                    style={{ color: theme.palette.primary.contrastText }}\r\n                >\r\n                    Not Selected\r\n                </Typography>\r\n                <Divider\r\n                    style={{\r\n                        backgroundColor: theme.palette.primary.contrastText,\r\n                    }}\r\n                />\r\n                {selectedStates ? (\r\n                    Object.keys(selectedStates)\r\n                        .sort()\r\n                        .filter(s => selectedStates[s].selected === false)\r\n                        .map((state, i) => {\r\n                            return (\r\n                                <FormControlLabel\r\n                                    key={i}\r\n                                    id={selectedStates[state].htmlFormat}\r\n                                    name={state}\r\n                                    checked={selectedStates[state].selected}\r\n                                    onChange={handleSelectedStates}\r\n                                    control={\r\n                                        <Checkbox\r\n                                            name={state}\r\n                                            style={{\r\n                                                color:\r\n                                                    selectedStates[state].color,\r\n                                            }}\r\n                                        />\r\n                                    }\r\n                                    label={`${state} (${selectedStates[state].abbreviation})`}\r\n                                />\r\n                            );\r\n                        })\r\n                ) : (\r\n                    <div />\r\n                )}\r\n            </FormGroup>\r\n        </div>\r\n    );\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n    AppBar,\r\n    Toolbar,\r\n    IconButton,\r\n    ClickAwayListener,\r\n    Drawer,\r\n    Divider,\r\n    Menu,\r\n\tMenuItem,\r\n\tTooltip,\r\n} from \"@material-ui/core\";\r\nimport clsx from \"clsx\";\r\n\r\n// components\r\nimport { BatchSelect } from \"../pickers/BatchSelect\";\r\nimport { Dashboard } from \"../pickers/Dashboard\";\r\n\r\n// styles\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\r\nimport BubbleChartIcon from \"@material-ui/icons/BubbleChart\";\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: \"flex\",\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n    appBar: {\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    menuButton: {\r\n        color: theme.palette.primary.contrastText,\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n    hide: {\r\n        display: \"none\",\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 1,\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n    },\r\n    drawerHeader: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        padding: theme.spacing(0, 1),\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: \"flex-end\",\r\n        backgroundColor: theme.palette.background.default,\r\n    },\r\n    tab: {\r\n        opacity: 0.7,\r\n    },\r\n    menuItem: {\r\n        opacity: 0.7,\r\n        \"&:hover\": {\r\n            opacity: 1,\r\n        },\r\n    },\r\n}));\r\n\r\nexport const FilterBarCovidCompare = props => {\r\n    const [open, setOpen] = useState(false);\r\n    const [menuOpen, setMenuOpen] = useState(false);\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n\t\r\n\tconst theme = useTheme();\r\n    const classes = useStyles();\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleClickAway = e => {\r\n        if (e.x > drawerWidth && e.y > 70 && open) {\r\n            setOpen(false);\r\n        }\r\n    };\r\n\r\n    const handleMenu = e => {\r\n        !anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar\r\n                position=\"relative\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n                style={{\r\n                    backgroundColor: theme.palette.primary.main,\r\n                    color: theme.palette.primary.contrastText,\r\n                }}\r\n            >\r\n                <Toolbar>\r\n                    <IconButton\r\n                        onClick={handleDrawerOpen}\r\n                        className={clsx(\r\n                            classes.menuButton,\r\n                            open && classes.hide\r\n                        )}\r\n                        style={{ color: theme.palette.text.primary }}\r\n                        disableRipple\r\n                    >\r\n                        <MenuIcon className={classes.menuButton} />\r\n                    </IconButton>\r\n                    <BatchSelect {...props} />\r\n\t\t\t\t\t<span style={{marginLeft: \"auto\"}}>\r\n\t\t\t\t\t\t<Tooltip title=\"Line chart\">\r\n\t\t\t\t\t\t\t<IconButton component=\"a\" href=\"/covidcompare/#/line\" className={classes.menuButton}>\r\n\t\t\t\t\t\t\t\t<TimelineIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t<Tooltip title=\"Gapminder chart\">\r\n\t\t\t\t\t\t\t<IconButton component=\"a\" href=\"/covidcompare/#/gapminder\" className={classes.menuButton}>\r\n\t\t\t\t\t\t\t\t<BubbleChartIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</span>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <ClickAwayListener onClickAway={handleClickAway}>\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    anchor=\"left\"\r\n                    open={open}\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    style={{ color: theme.palette.text.primary }}\r\n                >\r\n                    <div\r\n                        className={classes.drawerHeader}\r\n                        style={{ backgroundColor: theme.palette.primary.main }}\r\n                    >\r\n                        <IconButton\r\n                            color=\"inherit\"\r\n                            edge=\"end\"\r\n                            onClick={handleDrawerClose}\r\n                            style={{\r\n                                color: theme.palette.primary.contrastText,\r\n                            }}\r\n                        >\r\n                            <ChevronLeftIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <Dashboard {...props} />\r\n                </Drawer>\r\n            </ClickAwayListener>\r\n        </div>\r\n    );\r\n};\r\n","import { useEffect } from 'react';\r\nimport { useMediaQuery } from \"@material-ui/core\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\n\r\nexport const ResponsiveDesign = (props) => {\r\n\tconst { wrapperDim, setWrapperDim, setBoundedDim } = props;\r\n\r\n\tconst theme = useTheme();\r\n\tconst mqSmall = useMediaQuery(theme.breakpoints.up(\"sm\"));\r\n\tconst mqMedium = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n\t  \r\n\tconst dimensions = {\r\n\t\t// wrapperWidth: mqMedium ? window.innerWidth * .8 : window.innerWidth * .9,\r\n\t\twrapperWidth: window.innerWidth * .8,\r\n\t\twrapperHeight: window.innerHeight * .9,\r\n\t\tmarginTop: 60,\r\n\t\tmarginRight: 20,\r\n\t\tmarginBottom: 130,\r\n\t\tmarginLeft: 80,\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tsetWrapperDim(dimensions);\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetBoundedDim({\r\n\t\t\twidth: dimensions.wrapperWidth - dimensions.marginLeft - dimensions.marginRight,\r\n\t\t\theight: dimensions.wrapperHeight - dimensions.marginTop - dimensions.marginBottom,\r\n\t\t});\r\n\t}, [wrapperDim]);\r\n\r\n\treturn null;\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\n\r\n// components\r\nimport { ChartUSCompare } from \"./chart/ChartUSCompare\";\r\nimport { FilterBarCovidCompare } from './interface/FilterBarCovidCompare';\r\nimport { ResponsiveDesign } from \"../util/ResponsiveDesign\";\r\n\r\n// context\r\nimport { statesContext } from \"../../context/statesContext\";\r\n\r\n// styles\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\n\r\n// Chart params: define params for drawing axes and chart\r\nconst chartParams = {\r\n\tchartType: \"line\",\r\n\ttoTimestamp: null,\r\n\tmultiple: true,\r\n\tnormalize: true,\r\n\txParam: { // x-axis\r\n\t\ttype: 'linear',\r\n\t\tformat: 'number',\r\n\t\tselected: 'dayOfOutbreak',\r\n\t\talt1: null,\r\n\t\toptions: [\r\n\t\t\t\"dayOfOutbreak\",\r\n\t\t]\r\n\t},\r\n\tyParam: { // y-axis\r\n\t\ttype: 'linear',\r\n\t\tformat: 'number',\r\n\t\tselected: 'casesPerThousand',\r\n\t\talt1: 'deathsPerThousand',\r\n\t\toptions: [ \r\n\t\t\t\"casesPerThousand\",\r\n\t\t\t\"cases\",\r\n\t\t\t\"deathsPerThousand\",\r\n\t\t\t\"deaths\"\r\n\t\t],\r\n\t},\r\n\tzParam: {// z-axis (3rd dimension) (eg. size)\r\n\t\ttype: null,\r\n\t\tformat: null,\r\n\t\tselected: null,\r\n\t\toptions: [ \r\n\t\t\tnull\r\n\t\t]\r\n\t},\r\n\tcParam: { // color axis (categorical/ordinal data) (eg. gender, birthplace, etc.)\r\n\t\ttype: \"categorical\",\r\n\t\tselected: \"region\",\r\n\t\toptions: [ \r\n\t\t\t\"region\",\r\n\t\t\t\"division\",\r\n\t\t\t\"governor\"\r\n\t\t],\r\n\t},\r\n\ttParam: { // time axis (4th dimension) (ie. for animated charts)\r\n\t\ttype: null,\r\n\t\tselected: null,\r\n\t\toptions: [\r\n\t\t\tnull\r\n\t\t]\r\n\t},\r\n};\r\n\r\n// Label params:\r\nconst labelParams = {\r\n\tchartTitle: \"COVID-19 State Comparison\",\r\n\txLabel: \"Cases per Thousand\",\r\n\tyLabel: \"Deaths per Thousand\"\r\n};\r\n\r\nexport const AppCovidCompare = () => {\r\n\tconst { infoStates, setInfoStates } = useContext(statesContext);\r\n\tconst [wrapperDim, setWrapperDim] = useState();\r\n\tconst [boundedDim, setBoundedDim] = useState();\r\n\t\r\n\t// assign\r\n\tconst [selectedStates, setSelectedStates] = useState(null);\r\n\r\n\t// style\r\n\tconst theme = useTheme();\r\n\r\n\tconst handleSelectedStates = (e) => {\r\n        setSelectedStates({\r\n            ...selectedStates,\r\n            [e.target.name]: {\r\n                ...selectedStates[e.target.name],\r\n                selected: e.target.checked\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleSelectAllStates = (e) => {\r\n        const revisedStates = {}\r\n        Object.keys(selectedStates).forEach((s,i) => {\r\n            revisedStates[s] = {\r\n                ...selectedStates[s],\r\n                selected: true\r\n            }\r\n        });\r\n        setSelectedStates(revisedStates);\r\n    };\r\n\r\n    const handleDeselectAllStates = (e) => {\r\n        const revisedStates = {}\r\n        Object.keys(selectedStates).forEach((s,i) => {\r\n            revisedStates[s] = {\r\n                ...selectedStates[s],\r\n                selected: false\r\n            }\r\n         });\r\n        setSelectedStates(revisedStates);\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (infoStates) {\r\n\t\t\tsetSelectedStates(infoStates);\r\n\t\t}\r\n\t }, [infoStates]);\r\n\r\n  return (\r\n    <>\r\n\t\t<ResponsiveDesign wrapperDim={wrapperDim} setWrapperDim={setWrapperDim} setBoundedDim={setBoundedDim} />\r\n      \t\t<MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n\t\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t\t{wrapperDim &&\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<FilterBarCovidCompare \r\n\t\t\t\t\t\t\t\tchartParams={chartParams}\r\n\t\t\t\t\t\t\t\tselectedStates={selectedStates} \r\n\t\t\t\t\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\t\t\t\t\thandleSelectedStates={handleSelectedStates}\r\n\t\t\t\t\t\t\t\thandleSelectAllStates={handleSelectAllStates}\r\n\t\t\t\t\t\t\t\thandleDeselectAllStates={handleDeselectAllStates}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<ChartUSCompare \r\n\t\t\t\t\t\t\t\tchartParams={chartParams}\r\n\t\t\t\t\t\t\t\tlabelParams={labelParams}\r\n\t\t\t\t\t\t\t\tselectedStates={selectedStates} \r\n\t\t\t\t\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\t\t\t\t\twrapperDim={wrapperDim}\r\n\t\t\t\t\t\t\t\tboundedDim={boundedDim}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t}\r\n\t\t\t\t</ThemeProvider>\r\n      \t\t</MuiPickersUtilsProvider>\r\n    </>\r\n  );\r\n};","import { createMuiTheme } from \"@material-ui/core/styles\";\r\n\r\nconst darkPrimary = \"#000018\";\r\nconst darkSecondary = \"#1c847f\";\r\nconst darkText = \"#fff\";\r\nconst darkBackground = \"#29293d\";\r\n\r\nconst lightPrimary = \"#1c847f\";\r\nconst lightText = \"#29293d\";\r\nconst lightBackground = \"#fff\";\r\n\r\n\r\nexport const theme = createMuiTheme({\r\n    palette: {\r\n        type: \"dark\",\r\n        primary: {\r\n            main: \"#000018\",\r\n            contrastText: \"#fff\",\r\n        },\r\n        secondary: {\r\n            main: darkSecondary,\r\n            contrastText: darkText,\r\n        },\r\n        text: {\r\n            primary: \"#fff\",\r\n            secondary: \"#fff\",\r\n\t\t},\r\n\t\tbackground: {\r\n\t\t\tdefault: darkBackground,\r\n\t\t},\r\n        contrastThreshold: 3,\r\n    },\r\n    typography: {\r\n        fontFamily: [\"ralewaymedium\", \"Helvetica\", \"Arial\", \"sans-serif\"].join(\r\n            \",\"\r\n        ),\r\n    },\r\n    overrides: {\r\n        MuiFormControlLabel: {\r\n            root: {\r\n                color: \"#fff\",\r\n                textColor: \"#fff\",\r\n            },\r\n            label: {\r\n                color: \"#fff\",\r\n                textColor: \"#fff\",\r\n            },\r\n        },\r\n        MuiButton: {\r\n            root: {\r\n                color: \"#fff\",\r\n            },\r\n            label: {\r\n                color: \"#fff\",\r\n            },\r\n            text: {\r\n                color: \"#fff\",\r\n            },\r\n        },\r\n        MuiBase: {\r\n            root: {\r\n                color: \"#fff\",\r\n            },\r\n        },\r\n        MuiInputBase: {\r\n            root: {\r\n                color: \"#fff\",\r\n                maxWidth: 115,\r\n                paddingLeft: 10,\r\n            },\r\n        },\r\n        MuiPickersCalendarHeader: {\r\n            switchHeader: {\r\n                backgroundColor: darkPrimary,\r\n            },\r\n        },\r\n        MuiPickersDay: {\r\n            day: {\r\n                color: \"#29293d\",\r\n            },\r\n            daySelected: {\r\n                backgroundColor: \"#29293d\",\r\n            },\r\n            dayDisabled: {\r\n                color: \"#29293d\",\r\n            },\r\n            current: {\r\n                color: \"#29293d\",\r\n            },\r\n        },\r\n    },\r\n});\r\n\r\nexport const getTheme = (theme, darkMode) => {\r\n\tif (darkMode) {\r\n \t\treturn createMuiTheme({\r\n\t\t\t...theme,\r\n\t\t\tpalette: {\r\n\t\t\t\t...theme.palette,\r\n\t\t\t\ttype: \"dark\",\r\n\t\t\t\tprimary: {\r\n\t\t\t\t\tmain: \"#000018\",\r\n\t\t\t\t\tcontrastText: \"#fff\",\r\n\t\t\t\t},\r\n\t\t\t\tbackground: {\r\n\t\t\t\t\tdefault: \"#29293d\",\r\n\t\t\t\t},\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tprimary: \"#fff\",\r\n\t\t\t\t\tsecondary: \"#fff\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\t\t\r\n\t} else {\r\n\t\treturn createMuiTheme({\r\n\t\t\t...theme,\r\n\t\t\tpalette: {\r\n\t\t\t\t...theme.palette,\r\n\t\t\t\ttype: \"light\",\r\n\t\t\t\tprimary: {\r\n\t\t\t\t\tmain: \"#1c847f\",\r\n\t\t\t\t\tcontrastText: \"#fff\",\r\n\t\t\t\t},\r\n\t\t\t\tbackground: {\r\n\t\t\t\t\tdefault: \"#fff\",\r\n\t\t\t\t},\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tprimary: \"#29293d\",\r\n\t\t\t\t\tsecondary: \"#000018\",\r\n        \t\t},\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n  }","export const colors = [\r\n\t\"#7FFFD4\",\r\n\t\"#8EE5EE\",\r\n\t\"#76EE00\",\r\n\t\"#D2691E\",\r\n\t\"#FF7F50\",\r\n\t\"#00CDCD\",\r\n\t\"#DC143C\",\r\n\t\"#00EE00\",\r\n\t\"#00EE76\",\r\n\t\"#8B5A2B\",\r\n\t\"#EE5C42\",\r\n\t\"#00C5CD\",\r\n\t\"#EE3A8C\",\r\n\t\"#9ACD32\",\r\n\t\"#43CD80\",\r\n\t\"#EE0000\",\r\n\t\"#7D26CD\",\r\n\t\"#EE9A00\",\r\n\t\"#C71585\",\r\n\t\"#9F79EE\",\r\n\t\"#8B5742\",\r\n\t\"#CDC673\",\r\n\t\"#218868\",\r\n\t\"#CD5555\",\r\n\t\"#CD9B1D\",\r\n\t\"#79CDCD\",\r\n\t\"#9BCD9B\",\r\n\t\"#FF7F00\",\r\n\t\"#EE3B3B\",\r\n\t\"#BF3EFF\",\r\n\t\"#00CED1\",\r\n\t\"#EE1289\",\r\n\t\"#228B22\",\r\n\t\"#CDAD00\",\r\n\t\"#00CD00\",\r\n\t\"#EE6AA7\",\r\n\t\"#CD5555\",\r\n\t\"#CD8C95\",\r\n\t\"#20B2AA\",\r\n\t\"#CD8162\",\r\n\t\"#CDCDB4\",\r\n\t\"#CD00CD\",\r\n\t\"#E066FF\",\r\n\t\"#00FA9A\",\r\n\t\"#C71585\",\r\n\t\"#FF4500\",\r\n\t\"#EE799F\",\r\n\t\"#CD96CD\",\r\n\t\"#912CEE\",\r\n\t\"#EEB4B4\",\r\n\t\"#4EEE94\"\r\n  ];","import React, { useState, useEffect } from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\n\r\n// data\r\nimport USStates from \"./data/us-states.csv\";\r\nimport stateInfo from \"./data/stateInfo.json\";\r\n\r\n// components\r\nimport { Footnotes } from \"./components/Footnotes\";\r\nimport { AppGapminder } from \"./components/appGapminder/AppGapminder\";\r\nimport { AppCovidCompare } from \"./components/appCovidCompare/AppCovidCompare\";\r\n\r\n// context\r\nimport { dataContext } from \"./context/dataContext\";\r\nimport { statesContext } from \"./context/statesContext\";\r\n\r\n// styles\r\nimport { theme, getTheme } from \"./styles/theme\";\r\nimport { colors } from \"./styles/colors\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nfunction App() {\r\n    const [dataStates, setDataStates] = useState([]);\r\n    const [infoStates, setInfoStates] = useState(null);\r\n    const [darkMode, setDarkMode] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // clean stateInfo data and assign selectedStates\r\n        const dateParser = d3.timeParse(\"%m-%d-%y\");\r\n        const revisedStates = {};\r\n\r\n        Object.keys(stateInfo).forEach((s, i) => {\r\n            revisedStates[s] = {\r\n                ...stateInfo[s],\r\n                lockdown: stateInfo[s].lockdown.startsWith(\"none\")\r\n                    ? stateInfo[s].lockdown\r\n                    : dateParser(stateInfo[s].lockdown),\r\n                lockdownEnd: stateInfo[s].lockdownEnd.startsWith(\"none\")\r\n                    ? stateInfo[s].lockdownEnd\r\n                    : dateParser(stateInfo[s].lockdownEnd),\r\n                color: colors[i],\r\n            };\r\n        });\r\n\r\n        const nested = d3\r\n            .nest()\r\n            .key(d => d.state)\r\n            .entries(dataStates);\r\n\r\n        Object.keys(nested).forEach(i => {\r\n            const s = nested[i].key;\r\n\r\n            const lastIndex = nested[i].values.length - 1;\r\n            const latestCaseCount = nested[i].values[lastIndex].cases;\r\n            const latestCaseCountPerThou =\r\n                (nested[i].values[lastIndex].cases / stateInfo[s].population) *\r\n                1000;\r\n\r\n            revisedStates[s] = {\r\n                ...revisedStates[s],\r\n                latestCaseCount: latestCaseCount,\r\n                latestCaseCountPerThou: latestCaseCountPerThou,\r\n            };\r\n        });\r\n        setInfoStates(revisedStates);\r\n    }, [dataStates]);\r\n\r\n    useEffect(() => {\r\n        // get COVID-19 state data\r\n        d3.csv(USStates).then(data => {\r\n            // clean data\r\n            const dateParser = d3.timeParse(\"%Y-%m-%d\");\r\n\r\n            data.forEach(d => {\r\n                d.date = dateParser(d.date);\r\n                d.fips = parseInt(d.fips);\r\n                d.cases = parseInt(d.cases);\r\n                d.deaths = parseInt(d.deaths);\r\n            });\r\n\r\n            // Filter data:\r\n            // Prior to 02-27-20, Washington had 1 or 2 cases from January.\r\n            // However, these were isolated cases and this graph is trying to track Covid-19 spread\r\n            // Also filter out territories Guam, Puerto Rico, etc.\r\n            data = data.filter(\r\n                d =>\r\n                    d.date > new Date(2020, 1, 26) &&\r\n                    Object.keys(stateInfo).includes(d.state)\r\n            );\r\n\r\n            // Normalize data:\r\n            // Add \"dayOfOutbreak\" to show elapsed time\r\n            // Add state population\r\n            // Add \"casesPerThousand\", \"deathsPerThousand\", \"mortalityRate\"\r\n            Object.keys(stateInfo).forEach(state => {\r\n                const stateData = data.filter(d => d.state === state);\r\n                stateData.forEach(d => {\r\n                    d.dayOfOutbreak =\r\n                        (d.date - stateData[0].date) /\r\n                            (24 * 60 * 60 * 10 * 10 * 10) +\r\n                        1; // day - day one, convert ms to days\r\n                    d.casesPerThousand =\r\n                        (d.cases / stateInfo[state].population) * 1000;\r\n                    d.deathsPerThousand =\r\n                        (d.deaths / stateInfo[state].population) * 1000;\r\n                    d.mortalityRate = (d.deaths / d.cases) * 100;\r\n                });\r\n            });\r\n            setDataStates(data);\r\n            console.log(\"imported dataset\");\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <ThemeProvider theme={getTheme(theme, darkMode)}>\r\n                <CssBaseline />\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                    <dataContext.Provider value={{ dataStates, setDataStates }}>\r\n                        <statesContext.Provider\r\n                            value={{ infoStates, setInfoStates }}\r\n                        >\r\n\t\t\t\t\t\t\t{/* <Router> */}\r\n\t\t\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\t\t\tpath=\"/line\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"line-app\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent={AppCovidCompare}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\t\t\t\tpath={[\"/\", \"/gapminder\"]}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"gapminder-app\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent={AppGapminder}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Footnotes\r\n\t\t\t\t\t\t\t\t\t\tdarkMode={darkMode}\r\n\t\t\t\t\t\t\t\t\t\tsetDarkMode={setDarkMode}\r\n\t\t\t\t\t\t\t\t\t/>\r\n                            {/* </Router> */}\r\n                        </statesContext.Provider>\r\n                    </dataContext.Provider>\r\n                </MuiPickersUtilsProvider>\r\n            </ThemeProvider>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { HashRouter as Router } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n    <Router>\r\n        <App />\r\n    </Router>,\r\n    document.getElementById(\"root\")\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}