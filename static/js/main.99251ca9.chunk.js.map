{"version":3,"sources":["data/us-states.csv","components/appGapminder/appParams.js","context/dataContext.js","context/statesContext.js","context/selectionContext.js","components/appGapminder/chart/CirclesGapminder.js","components/appGapminder/interface/OpacitySlider.js","components/appGapminder/interface/DayCounterSlider.js","components/appGapminder/chart/ChartGapminder.js","components/appGapminder/pickers/ParamPicker.js","components/sharedComponents/SectionTitle.js","components/appGapminder/interface/ParamDashboard.js","components/appGapminder/sharedComponents/pickers/Filter.js","components/appGapminder/pickers/FilterBatch.js","components/appGapminder/pickers/SelectedStatus.js","components/appGapminder/pickers/NumberPicker.js","components/appGapminder/interface/FilterDashboard.js","components/sharedComponents/ChartPicker.js","components/appGapminder/interface/MenuDrawer.js","context/ThemeContext.js","components/Settings.js","components/appGapminder/interface/Navbar.js","components/appGapminder/gapminderData.js","components/appGapminder/styles/dimensions.js","components/appGapminder/AppGapminder.js","components/util/constants.js","components/util/MouseMove.js","components/appCovidCompare/chart/Line.js","components/appCovidCompare/chart/ChartCovidCompare.js","components/appCovidCompare/components/FilterValues.js","components/appCovidCompare/pickers/FilterCases.js","components/appCovidCompare/pickers/FilterPopulation.js","components/appCovidCompare/components/FilterCategories.js","components/appCovidCompare/pickers/FilterRegion.js","components/appCovidCompare/pickers/BatchSelect.js","components/appCovidCompare/pickers/Dashboard.js","components/appCovidCompare/interface/Navbar.js","components/appCovidCompare/appParams.js","components/appCovidCompare/AppCovidCompare.js","styles/dimensions.js","styles/theme.js","styles/colors.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","chartParams","chartType","toTimestamp","multiple","normalize","xParam","output","type","format","selected","alt1","options","yParam","zParam","cParam","tParam","cParamCategories","region","division","governor","dataContext","React","createContext","statesContext","selectionContext","CirclesGapminder","props","data","dayCounter","selector","scales","opacityNotSel","xScale","yScale","colorScale","infoStates","useContext","selectedCircles","setSelectedCircles","circlesRef","useRef","classes","makeStyles","theme","circle","stroke","opacity","circleSelected","strokeWidth","circleLabel","fill","palette","text","primary","fontSize","useStyles","useTheme","bisectDay","d3","left","dataAt","day","map","d","state","valueAt","values","i","length","a","b","t","useEffect","current","selectAll","join","sort","attr","htmlFormat","includes","call","append","casesPerThousand","toFixed","cases","toLocaleString","deathsPerThousand","deaths","on","mouseOverCircle","style","mouseOutCircle","notSelected","filter","s","label","abbreviation","ref","OpacitySlider","setOpacityNotSel","Typography","variant","Slider","id","value","valueLabelDisplay","step","min","max","onChange","e","newVal","DayCounterSlider","setDayCounter","ChartGapminder","wrapper","bounds","wrapperWidth","wrapperHeight","margin","width","height","dataStates","useState","setScales","mqSmall","useMediaQuery","breakpoints","down","bodyWrapper","paddingLeft","up","rootSVG","display","position","verticalAlign","overflow","chartTitle","textAnchor","fontWeight","chartSubtitle","chartWrapper","top","axes","color","legend","contrastText","sliderContainer","flexDirection","justifyContent","maxWidth","alignItems","slider","svgRef","boundsRef","yAxisRef","xAxisRef","legendRef","domain","range","yAxisGenerator","scale","xAxisGenerator","axis","enter","transition","duration","update","exit","remove","renderChart","Box","className","viewBox","transform","Grid","container","item","rootContainer","minWidth","padding","filterSelector","filterMenuItem","ParamPicker","handleSelector","Object","keys","p","FormControl","key","InputLabel","Select","name","o","MenuItem","typography","divider","backgroundColor","marginBottom","SectionTitle","href","innerProps","defaultClasses","clsx","children","Divider","defaultProps","menuButton","filterBody","spacing","ParamDashboard","Filter","forwardRef","handleFilter","filterData","anchorEl","setAnchorEl","handleMenu","currentTarget","onClick","onClose","button","chipContainer","listStyle","chip","main","FilterBatch","filters","handleDeleteFilter","nStates","filterParams","category","params","chartParam","n","handleFilters","currSelection","forEach","newFilter","filtered","handleFilterCategories","slice","handleFilterValues","prevState","all","f","component","Chip","size","onDelete","stateLabelList","deselectAll","alignContent","paddingTop","deselectAllButton","selectedLabel","notSelectedLabel","SelectedStatus","handleChange","handleDeselectAll","Tooltip","title","IconButton","FormControlLabel","checked","control","Checkbox","input","NumberPicker","setNStates","TextField","InputProps","inputProps","defaultValue","target","filterBatch","selectedStatus","marginTop","FilterDashboard","setFilters","FormGroup","deletedFilter","newFilterList","secondary","ChartPicker","drawer","flexShrink","drawerPaper","drawerHeader","mixins","toolbar","MenuDrawer","mobileOpen","handleDrawer","persistent","Hidden","mdUp","Drawer","anchor","direction","open","paper","ModalProps","keepMounted","Toolbar","smDown","drawerContainer","ThemeContext","Settings","darkMode","setDarkMode","rootGrid","window","innerWidth","footerButton","pathArray","location","split","queryID","saveSvgAsPng","document","querySelector","background","default","encoderOptions","fonts","url","placement","root","appBar","dark","appBarShift","marginLeft","transitions","create","easing","easeOut","enteringScreen","hide","Navbar","setMobileOpen","handleOptions","AppBar","edge","disableRipple","Button","Menu","Boolean","MenuList","gapminderData","stateInfo","newData","eachState","push","innerHeight","right","bottom","AppGapminder","setData","setSelector","navbar","then","res","Provider","param","date","dateFormatter","dateParser","dimensions","MouseMove","focus","overlay","linesStates","selectedStates","dayOfOutbreak","x0","invert","this","bisectDate","dataEachState","stateHTML","dataEachStateRangeY","dataEachStateRangeX","dataEachStateRangeDate","dataEachStateRangeCases","frozen","select","Line","mqMedium","mqLarge","setLinesStates","filterStates","statesObject","lineGenerator","x","y","linesObject","lastDayOfOutbreak","lastCasesPerThousand","lockdownDay","lockdown","lockdownDayDatum","line","lineLabelX","lineLabelY","lockdownMarkerX","lockdownMarkerY","xShift","yShift","strokeLinejoin","strokeLinecap","r","cx","cy","fontFamily","ChartCovidCompare","axisLabel","footnotes","FilterValues","filterOptions","handleSelectedFilter","FilterCases","FilterPopulation","FilterCategories","FilterRegion","tab","menuItem","BatchSelect","setSelectedStates","selectedFilter","setSelectedFilter","newSelectedFilter","newSelection","info","aria-controls","aria-haspopup","sectionTitleTypography","drawerBody","alignText","selectAllButton","stateLabelSelected","stateLabelNotSelected","Dashboard","handleSelectedStates","handleSelectAllStates","handleDeselectAllStates","sharp","leavingScreen","setOpen","handleFilterMenu","ClickAwayListener","onClickAway","labelParams","xLabel","yLabel","AppCovidCompare","mqOrientPortrait","flexBasis","utils","DateFnsUtils","revisedStates","lightTheme","light","darkTheme","createMuiTheme","overrides","MuiInputBase","getTheme","colors","App","setDataStates","setInfoStates","startsWith","lockdownEnd","nested","entries","lastIndex","latestCaseCount","latestCaseCountPerThou","population","USStates","fips","parseInt","Date","stateData","mortalityRate","console","log","ThemeProvider","CssBaseline","path","render","exact","from","to","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"iGAAAA,EAAOC,QAAU,IAA0B,uC,qgcCA9BC,EAAc,CAC1BC,UAAW,SACXC,YAAa,KACbC,UAAU,EACVC,WAAW,EACXC,OAAQ,CACPC,OAAQ,SACRC,KAAM,SACNC,OAAQ,OACRC,SAAU,mBACVC,KAAM,QACNC,QAAS,CACR,mBACA,QACA,oBACA,WAGFC,OAAQ,CACPN,OAAQ,SACRC,KAAM,SACNC,OAAQ,OACRC,SAAU,oBACVC,KAAM,SACNC,QAAS,CACR,mBACA,QACA,oBACA,WAGFE,OAAQ,CACPP,OAAQ,cACRC,KAAM,SACNC,OAAQ,OACRC,SAAU,aACVE,QAAS,CACR,aACA,oBACA,MACA,SAGFG,OAAQ,CACPR,OAAQ,iBACRC,KAAM,cACNE,SAAU,SACVE,QAAS,CACR,SACA,WACA,aAGFI,OAAQ,CACPT,OAAQ,OACRC,KAAM,OACNE,SAAU,gBACVE,QAAS,CACR,gBACA,UAaUK,EAAmB,CAC5BC,OAAQ,CAAC,YAAa,UAAW,QAAS,QAC1CC,SAAU,CACN,cACA,eACA,qBACA,qBACA,iBACA,qBACA,qBACA,WACA,WAEJC,SAAU,CAAC,aAAc,WAAY,QCnFnCC,EAAcC,IAAMC,gB,QCApBC,EAAgBF,IAAMC,gBCAfE,EAAmBH,IAAMC,gB,iBCQzBG,EAAmB,SAACC,GAAW,IACnCC,EAAsDD,EAAtDC,KAAMC,EAAgDF,EAAhDE,WAAYC,EAAoCH,EAApCG,SAAUC,EAA0BJ,EAA1BI,OAAQC,EAAkBL,EAAlBK,cACpC1B,EAAmCwB,EAAnCxB,OAAQO,EAA2BiB,EAA3BjB,OAAQC,EAAmBgB,EAAnBhB,OAAQC,EAAWe,EAAXf,OACxBkB,EAA+BF,EAA/BE,OAAQC,EAAuBH,EAAvBG,OAAQC,EAAeJ,EAAfI,WAGhBC,EAAeC,qBAAWb,GAA1BY,WANkC,EAOMC,qBAAWZ,GAAnDa,EAPkC,EAOlCA,gBAAiBC,EAPiB,EAOjBA,mBACnBC,EAAaC,iBAAO,MAkBpBC,EAfYC,aAAW,SAACC,GAAD,MAAY,CACxCC,OAAQ,CACPC,OAAQ,OACRC,QAASf,GAEVgB,eAAgB,CACfF,OAAQ,UACRG,YAAa,EACbF,QAAS,IAEVG,YAAa,CACZC,KAAMP,EAAMQ,QAAQC,KAAKC,QACzBC,SAAU,YAGIC,GACVZ,EAAQa,cAERC,EAAYC,KAAY,0CAAYC,KAE1C,SAASC,EAAOC,GACf,OAAOlC,EAAKmC,KAAI,SAAAC,GAAC,gBAChBC,MAAOD,EAAEC,MACT/C,OAAQ8C,EAAE9C,QAFM,cAGfZ,EAAOI,SAAWwD,EAAQF,EAAE1D,EAAOI,UAAWoD,IAH/B,cAIfjD,EAAOH,SAAWwD,EAAQF,EAAEnD,EAAOH,UAAWoD,IAJ/B,KAQlB,SAASI,EAAQC,EAAQL,GACxB,IAAMM,EAAIV,EAAUS,EAAQL,EAAK,EAAGK,EAAOE,OAAS,GAC9CC,EAAIH,EAAOC,GAEjB,GAAIA,EAAI,EAAG,CACV,IAAMG,EAAIJ,EAAOC,EAAI,GACfI,GAAKV,EAAMQ,EAAE,KAAOC,EAAE,GAAKD,EAAE,IACnC,OAAOA,EAAE,IAAM,EAAIE,GAAKD,EAAE,GAAKC,EAEhC,OAAOF,EAAE,GA6HV,OA1HAG,qBAAU,WACT,GAAI7C,EAAM,CACT,IAAMiB,EAASc,IAAUnB,EAAWkC,SAASC,UAAU,UACtD/C,KAAKiC,EAAOhC,IAAa,SAAAmC,GAAC,OAAIA,KAC9BY,KAAK,UAEJC,MAAK,SAACP,EAAEC,GAAH,OAASZ,IAAcvB,EAAWkC,EAAEL,OAAOnD,EAAOJ,UAAW0B,EAAWmC,EAAEN,OAAOnD,EAAOJ,cAC7FoE,KAAK,KAAK,SAAAd,GAAC,MAAwB,eAApBlD,EAAOJ,SACpB0B,EAAW4B,EAAEC,OAAOnD,EAAOJ,UAAY,IACnB,sBAApBI,EAAOJ,SACP0B,EAAW4B,EAAEC,OAAOnD,EAAOJ,UAAY,IACnB,QAApBI,EAAOJ,SACP0B,EAAW4B,EAAEC,OAAOnD,EAAOJ,UAAY,IACvC,KAEFoE,KAAK,MAAM,SAAAd,GAAC,OAAI/B,EAAO+B,EAAE1D,EAAOI,cAChCoE,KAAK,MAAM,SAAAd,GAAC,OAAI9B,EAAO8B,EAAEnD,EAAOH,cAChCoE,KAAK,QAAQ,SAAAd,GAAC,OAAI7B,EAAWC,EAAW4B,EAAEC,OAAOlD,EAAOL,cACxDoE,KAAK,MAAM,SAAAd,GAAC,uBAAc5B,EAAW4B,EAAEC,OAAOc,eAC9CD,KAAK,SAAS,SAAAd,GAAC,OACf1B,EAAgB5B,SAASsE,SAAShB,EAAEC,OACjCvB,EAAQM,eACRN,EAAQG,UAEXoC,MAAK,SAAApC,GAAM,OAAIA,EACdqC,OAAO,SACP7B,MAAK,SAAAW,GAAC,MAAI,CACVA,EAAEC,MADQ,cAEHpC,GACa,qBAApBvB,EAAOI,SAAP,sBACkBsD,EAAEmB,kBAAoBnB,EAAEmB,iBAAiBC,QAAQ,IAC5C,UAApB9E,EAAOI,SAAP,iBACUsD,EAAEqB,OAASrB,EAAEqB,MAAMC,kBACT,sBAApBhF,EAAOI,SAAP,uBACgBsD,EAAEuB,mBAAqBvB,EAAEuB,kBAAkBH,QAAQ,IAC/C,WAApB9E,EAAOI,SAAP,kBACWsD,EAAEwB,QAAUxB,EAAEwB,OAAOF,kBAChC,QACiB,qBAApBzE,EAAOH,SAAP,sBACkBsD,EAAEmB,kBAAoBnB,EAAEmB,iBAAiBC,QAAQ,IAC5C,UAApBvE,EAAOH,SAAP,iBACUsD,EAAEqB,OAASrB,EAAEqB,MAAMC,kBACT,sBAApBzE,EAAOH,SAAP,uBACgBsD,EAAEuB,mBAAqBvB,EAAEuB,kBAAkBH,QAAQ,IAC/C,WAApBvE,EAAOH,SAAP,kBACWsD,EAAEwB,QAAUxB,EAAEwB,OAAOF,kBAChC,SACDV,KAAK,YAIV/B,EAAO4C,GAAG,aAAa,SAAAzB,GACtB,IAAM0B,EAAkB/B,IAAA,kBAAqBvB,EAAW4B,EAAEC,OAAOc,cAC3C,IAAlB/C,GAAuBM,EAAgB5B,SAASsE,SAAShB,EAAEC,SAC9DyB,EACEZ,KAAK,SAAU,WACfa,MAAM,UAAW,IACjBA,MAAM,SAAU,WAChBA,MAAM,eAAgB,MAI1B9C,EAAO4C,GAAG,YAAY,SAAAzB,GACrB,IAAM4B,EAAiBjC,IAAA,kBAAqBvB,EAAW4B,EAAEC,OAAOc,aAC5DzC,EAAgBuD,YAAYb,SAAShB,EAAEC,QAC1C2B,EACED,MAAM,UAAW3D,GACjB2D,MAAM,SAAU,WAIpB9C,EAAO4C,GAAG,SAAS,SAAAzB,GACd1B,EAAgB5B,SAASsE,SAAShB,EAAEC,QACvC1B,EAAmB,eACfD,EADc,CAEjB5B,SAAU4B,EAAgB5B,SAASoF,QAAO,SAAAC,GAAC,OAAIA,IAAM/B,EAAEC,SACvD4B,YAAY,GAAD,mBAAMvD,EAAgBuD,aAAtB,CAAmC7B,EAAEC,WAEjDN,IAAA,kBAAqBvB,EAAW4B,EAAEC,OAAOc,aACvCY,MAAM,UAAW3D,GACjB2D,MAAM,SAAU,UAElBpD,EAAmB,eACfD,EADc,CAEjB5B,SAAS,GAAD,mBAAM4B,EAAgB5B,UAAtB,CAAgCsD,EAAEC,QAC1C4B,YAAavD,EAAgBuD,YAAYC,QAAO,SAAAC,GAAC,OAAIA,IAAM/B,EAAEC,YAE9DN,IAAA,kBAAqBvB,EAAW4B,EAAEC,OAAOc,aACvCY,MAAM,UAAW,IACjBA,MAAM,SAAU,WAChBA,MAAM,eAAgB,OAI1BhC,IAAUnB,EAAWkC,SAASC,UAAU,QACtC/C,KAAKiC,EAAOhC,IAAa,SAAAmC,GAAC,OAAIA,KAC9BY,KAAK,QACJK,MAAK,SAAAe,GACL,IAAM3B,EAAS,SAAAL,GACd,MAAwB,eAApBlD,EAAOJ,SACH0B,EAAW4B,EAAEC,OAAOnD,EAAOJ,UAAY,IAChB,sBAApBI,EAAOJ,SACV0B,EAAW4B,EAAEC,OAAOnD,EAAOJ,UAAY,IAChB,QAApBI,EAAOJ,SACV0B,EAAW4B,EAAEC,OAAOnD,EAAOJ,UAAY,IAEvC,GAGTsF,EACElB,KAAK,KAAK,SAAAd,GAAC,OAAI/B,EAAO+B,EAAE1D,EAAOI,WAAa2D,EAAOL,MACnDc,KAAK,KAAK,SAAAd,GAAC,OAAI9B,EAAO8B,EAAEnD,EAAOH,WAAa2D,EAAOL,SAErDc,KAAK,WAAW,SAAAd,GAAC,OAAI1B,EAAgB5B,SAASsE,SAAShB,EAAEC,OACvD,GACA,KACFa,KAAK,QAASpC,EAAQQ,aACtB4B,KAAK,SAAU,gBACfzB,MAAK,SAAAW,GAAC,OAAI5B,EAAW4B,EAAEC,OAAOgC,mBAEhC,CAACpE,EAAYC,EAAUC,EAAQO,EAAiBN,EAAeY,IAGjE,oCACC,uBAAGsD,IAAK1D,M,kBCvLE2D,EAAgB,SAACxE,GAAW,IAChCK,EAAoCL,EAApCK,cAAeoE,EAAqBzE,EAArByE,iBAEvB,OACC,oCACC,kBAACC,EAAA,EAAD,CAAYC,QAAQ,WAApB,wBACA,kBAACC,EAAA,EAAD,CACCC,GAAG,iBACHC,MAAOzE,EACP0E,kBAAkB,OAClBC,KAAM,GACNC,IAAK,EACLC,IAAK,EACLC,SAAU,SAACC,EAAGC,GAAJ,OAAeZ,EAAiBY,QCbjCC,EAAmB,SAACtF,GAAW,IACnCE,EAA8BF,EAA9BE,WAAYqF,EAAkBvF,EAAlBuF,cAEpB,OACC,oCACC,kBAACb,EAAA,EAAD,CAAYC,QAAQ,WAApB,mBACA,kBAACC,EAAA,EAAD,CACCC,GAAG,qBACHC,MAAO5E,EACP6E,kBAAkB,OAClBC,KAAM,EACNC,IAAK,EACLC,IAAK,GACLC,SAAU,SAACC,EAAGC,GAAJ,OAAeE,EAAcF,Q,2BCA9BG,EAAiB,SAAAxF,GAAU,IAC/BV,EAAsDU,EAAtDV,iBAAkBW,EAAoCD,EAApCC,KAAME,EAA8BH,EAA9BG,SAAUsF,EAAoBzF,EAApByF,QAASC,EAAW1F,EAAX0F,OACxC/G,EAA2BwB,EAA3BxB,OAAQO,EAAmBiB,EAAnBjB,OAAQE,EAAWe,EAAXf,OAChBuG,EAAwCF,EAAxCE,aAAcC,EAA0BH,EAA1BG,cAAeC,EAAWJ,EAAXI,OAC7BC,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OAEPC,EAAetF,qBAAWhB,GAA1BsG,WAN2B,EAOPC,mBAAS,MAPF,mBAO5B7F,EAP4B,KAOpB8F,EAPoB,OAQCD,mBAAS,GARV,mBAQ5B/F,EAR4B,KAQhBqF,EARgB,OASOU,mBAAS,IAThB,mBAS5B5F,EAT4B,KASboE,EATa,KAW7BxD,EAAQa,cACRqE,EAAUC,YAAcnF,EAAMoF,YAAYC,KAAK,OAwD/CvF,EAvDYC,aAAW,SAAAC,GAAK,MAAK,CACzCsF,YAAY,aACXC,YAAa,GACZvF,EAAMoF,YAAYI,GAAG,MAAQ,CAC7BD,YAAa,MAGTE,QAAS,CACLC,QAAS,eACTC,SAAU,WACVd,MAAO,OACPe,cAAe,SACfC,SAAU,UAEpBC,WAAY,CACXC,WAAY,SACZxF,KAAMP,EAAMQ,QAAQC,KAAKC,QACzBsF,WAAY,IACZrF,SAAU,QAEXsF,cAAe,CACdF,WAAY,SACZxF,KAAMP,EAAMQ,QAAQC,KAAKC,QACzBC,SAAU,SAELuF,aAAc,CACVR,QAAS,eACTC,SAAU,WACVQ,IAAK,EACLnF,KAAM,GAEVyD,OAAQ,CACJI,MAAOA,EACPC,OAAQA,GAEZsB,KAAM,CACFC,MAAOrG,EAAMQ,QAAQC,KAAKC,SAE9B4F,OAAQ,CACJD,MAAOrG,EAAMQ,QAAQE,QAAQ6F,aAC7BP,WAAY,IACZrF,SAAU,SAEd6F,gBAAiB,CACbC,cAAe,kBAAOvB,EAAU,SAAW,OAC3CwB,eAAgB,kBAAOxB,EAAU,SAAW,iBAC5CyB,SAAU9B,EACVD,OAAQ,SACRgC,WAAY,UAEhBC,OAAQ,CACJhC,MAAO,kBAAOK,EAAU,MAAQ,WAIxBtE,GAEbkG,EAASjH,iBAAO,MACbkH,EAAYlH,iBAAO,MACnBmH,EAAWnH,iBAAO,MAClBoH,EAAWpH,iBAAO,MAClBqH,EAAYrH,iBAAO,MAwIzB,OAlBAgC,qBAAU,WACFkD,GArHY,WAChB,IAQIxF,EAREF,EAAS0B,MAEVoG,OAAOpG,IAAUgE,GAAY,SAAA3D,GAAC,OAAIA,EAAE1D,EAAOI,cAC3CsJ,MAAM,CAAC,EAAGvC,IACTvF,EAASyB,MAEVoG,OAAOpG,IAAUgE,GAAY,SAAA3D,GAAC,OAAIA,EAAEnD,EAAOH,cAC3CsJ,MAAM,CAACtC,EAAQ,IAGI,WAApB3G,EAAOL,SACPyB,EAAawB,MAERoG,OAAO9I,EAAiBC,QACxB8I,MAAMrG,KACgB,aAApB5C,EAAOL,SACdyB,EAAawB,MAERoG,OAAO9I,EAAiBE,UACxB6I,MAAMrG,KACgB,aAApB5C,EAAOL,WACdyB,EAAawB,MAERoG,OAAO9I,EAAiBG,UACxB4I,MAAM,CAAC,UAAW,UAAW,aAGtCnC,EAAU,CACN5F,OAAQA,EACRC,OAAQA,EACRC,WAAYA,IAIhB,IAAM8H,EAAiBtG,MAAcuG,MAAMhI,GACrCiI,EAAiBxG,MAAgBuG,MAAMjI,GAE/B0B,IACFkG,EAASnF,SAChBO,KAAKkF,GACLlF,MAAK,SAAAmF,GACFA,EAAKlF,OAAO,QAAQJ,KAAK,QAAS,UAClCsF,EAAKlF,OAAO,QAAQJ,KAAK,QAAS,sBAIrCH,UAAU,WACV/C,KAAKtB,EAAOI,UAAU,SAAAsD,GAAC,OAAIA,KAC3BY,KAAK,QACLE,KAAK,IAAK2C,GACV3C,KAAK,IAAK,IACVA,KAAK,cAAe,OACpBA,KAAK,QAAS,UACdA,KAAK,OAAQlC,EAAMQ,QAAQC,KAAKC,SAChCD,KAAK/C,EAAOI,UAEHiD,IACFiG,EAASlF,SAChBO,KAAKgF,GACLhF,MAAK,SAAAmF,GAAI,OAAIA,EAAKlF,OAAO,QAAQJ,KAAK,QAAS,aAG/CH,UAAU,WACV/C,KAAKf,EAAOH,UAAU,SAAAsD,GAAC,OAAIA,KAC3BY,KAAK,QACLE,KAAK,IAAK,GACVA,KAAK,KAAM,IACXA,KAAK,cAAe,OACpBA,KAAK,YAAa,eAClBA,KAAK,QAAS,UACdA,KAAK,OAAQlC,EAAMQ,QAAQC,KAAKC,SACzCD,KAAKxC,EAAOH,UAGRiD,IAAUmG,EAAUpF,SACfC,UAAU,QACV/C,KAAKX,EAAiBF,EAAOL,WAAW,SAAAsD,GAAC,OAAIA,KAC7CY,MACG,SAAAyF,GAAK,OACDA,EACKnF,OAAO,QACPJ,KAAK,IAAK,QACVA,KAAK,KAAM,KACXA,KAAK,QAAQ,SAAAd,GAAC,OAAI7B,EAAW6B,MAC7Bc,KAAK,cAAe,SACpBzB,MAAK,SAAAW,GAAC,OAAIA,KACViB,MAAK,SAAAoF,GAAK,OACPA,EACKC,aACAC,SAAS,KACTzF,KAAK,KAAK,SAACd,EAAGI,GAAJ,OAAoB,GAATsD,EAAc,GAAKtD,WAEzD,SAAAoG,GAAM,OACFA,EACKtF,OAAO,QACPJ,KAAK,QAAQ,SAAAd,GAAC,OAAI7B,EAAW6B,MAC7Bc,KAAK,cAAe,SACpBA,KAAK,IAAK,IACVzB,MAAK,SAAAW,GAAC,OAAIA,KACViB,MAAK,SAAAuF,GAAM,OAAIA,EAAOF,aAAaC,SAAS,WACrD,SAAAE,GAAI,OACAA,EACK3F,KAAK,OAAQ,QACbA,KAAK,cAAe,SACpBzB,MAAK,SAAAW,GAAC,OAAIA,KACViB,MAAK,SAAAwF,GAAI,OACNA,EACKH,aACAC,SAAS,KACTzF,KAAK,IAAK,GACV4F,eAOrBC,KAEL,CAAChD,EAAY7F,EAAUc,IAE1B6B,qBAAU,WACNd,IAAUgG,EAAUjF,SACfC,UAAU,oBACVC,KAAK,QACLE,KAAK,cAAe,OACpBA,KAAK,IAAK2C,GACV3C,KAAK,KAAM,IACXA,KAAK,QAAS,mBACda,MAAM,OAAQ/C,EAAMQ,QAAQC,KAAKC,SACjCD,KARL,cAQiBxB,MAClB,CAACA,EAAYe,IAGZ,kBAACgI,EAAA,EAAD,CAAKC,UAAWnI,EAAQwF,aACpB,6BACI,yBACXhC,IAAKwD,EACUlD,GAAG,gBACHkB,OAAQH,EACRE,MAAOH,EACPuD,UAAWnI,EAAQ2F,QACnByC,QAAO,cAASxD,EAAT,YAAyBC,IAEhC,uBACIrB,IAAKyD,EACLkB,UAAWnI,EAAQ2E,OACnB0D,UAAS,oBAAevD,EAAO5D,KAAtB,aAA+B4D,EAAOuB,IAAtC,MAE3B,0BACCgC,UAAS,oBAAetD,EAAQ,EAAvB,KACToD,UAAWnI,EAAQgG,YAFpB,iCAMA,0BACCqC,UAAS,oBAAetD,EAAQ,EAAvB,SACToD,UAAWnI,EAAQgG,YAFpB,wBAMA,0BACCqC,UAAS,oBAAetD,EAAQ,EAAvB,SACToD,UAAWnI,EAAQmG,eAFpB,iCAMkB,uBACI3C,IAAK2D,EACLkB,UAAS,uBAAkBrD,EAAlB,KACTmD,UAAWnI,EAAQsG,OAEvB,uBAAG9C,IAAK0D,EAAUiB,UAAWnI,EAAQsG,OACrC,uBACI9C,IAAK4D,EACLiB,UAAS,uBAAkBrD,EAAlB,KACTmD,UAAWnI,EAAQwG,SAEtBtH,GAAQG,EACL,kBAAC,EAAD,iBACQJ,EADR,CAEII,OAAQA,EACRF,WAAYA,EACZG,cAAeA,KAGnB,wCAKhB,kBAACgJ,EAAA,EAAD,CAAMC,WAAS,EAACJ,UAAWnI,EAAQ0G,iBAC/B,kBAAC4B,EAAA,EAAD,CAAME,MAAI,EAACL,UAAWnI,EAAQ+G,QAC1B,kBAAC,EAAD,CACI5H,WAAYA,EACZqF,cAAeA,KAGvB,kBAAC8D,EAAA,EAAD,CAAME,MAAI,EAACL,UAAWnI,EAAQ+G,QAC1B,kBAAC,EAAD,CACIzH,cAAeA,EACfoE,iBAAkBA,Q,oCC/RpC5C,EAAYb,aAAW,SAACC,GAAD,MAAY,CACxCuI,cAAe,CACd5B,SAAU,IACV6B,SAAU,IACV9B,eAAgB,eAChB+B,QAAS,EACT7D,OAAQ,GAET8D,eAAgB,CACTF,SAAU,IACVxC,WAAY,IAClBrF,SAAU,QACV0F,MAAOrG,EAAMQ,QAAQC,KAAKC,SAExBiI,eAAgB,CACZtC,MAAOrG,EAAMQ,QAAQC,KAAKC,QAC1BsF,WAAY,IACZrF,SAAU,aAILiI,EAAc,SAAC7J,GAAW,IAC9B0H,EAA4C1H,EAA5C0H,cAAevH,EAA6BH,EAA7BG,SAAU2J,EAAmB9J,EAAnB8J,eAC3B/I,EAAUc,IAEb,OACF,kBAACwH,EAAA,EAAD,CAAMC,WAAS,EAACJ,UAAWnI,EAAQyI,cAAexF,MAC9B,QAAlB0D,EACE,CAAEA,cAAe,MAAOC,eAAgB,gBACxC,CAAED,cAAe,WAGVqC,OAAOC,KAAK7J,GAAUiC,KAAI,SAAC6H,GACxB,OACI,kBAACC,EAAA,EAAD,CAAaC,IAAKhK,EAAS8J,GAAGrL,QAC1B,kBAACwL,EAAA,EAAD,KAAajK,EAAS8J,GAAGrL,QACzB,kBAACyL,EAAA,EAAD,CACIC,KAAML,EACNnF,MAAO3E,EAAS8J,GAAGlL,SACnBoG,SAAU2E,EACVZ,UAAWnI,EAAQ4I,gBAElBxJ,EAAS8J,GAAGhL,QAAQmD,KAAI,SAACmI,GACtB,OACI,kBAACC,EAAA,EAAD,CACIL,IAAKI,EACLzF,MAAOyF,EACPrB,UAAWnI,EAAQ6I,gBAElBW,a,gBChDnC1I,EAAYb,aAAW,SAACC,GAAD,MAAY,CACxCwJ,WAAY,CACXnD,MAAOrG,EAAMQ,QAAQC,KAAKC,QAC1BsF,WAAY,IACZrF,SAAU,UAEX8I,QAAS,CACRC,gBAAiB1J,EAAMQ,QAAQC,KAAKC,QACpCiJ,aAAc,aAIHC,EAAe,SAAC7K,GAAW,IAC/B0K,EAAuC1K,EAAvC0K,QAAe3J,GAAwBf,EAA9B8K,KAA8B9K,EAAxBe,SAASgK,EAAe/K,EAAf+K,WAC1BC,EAAiBnJ,IAEvB,OACC,oCACC,kBAAC6C,EAAA,EAAD,eACCwE,UAAW+B,YAAKD,EAAeP,WAAY1J,EAAQ0J,aAC/CM,EAAWN,YAEdzK,EAAMkL,UAEPR,GACG,kBAACS,EAAA,EAAD,eACDjC,UAAW+B,YAAKD,EAAeN,QAAS3J,EAAQ2J,UAC5CK,EAAWL,YAWrBG,EAAaO,aAAe,CAC3BrK,QAAS,GACTgK,WAAY,ICvCb,IAAMlJ,EAAYb,aAAW,SAAAC,GAAK,MAAK,CACnCoK,WAAY,CACR/D,MAAOrG,EAAMQ,QAAQE,QAAQ6F,aAC7B,UAAW,CACPmD,gBAAiB,gBAG5BW,WAAY,CACX9E,YAAavF,EAAMsK,QAAQ,GAC3BX,aAAc3J,EAAMsK,QAAQ,QAIjBC,EAAiB,SAAAxL,GAAU,IAEtC0H,EAIM1H,EAJN0H,cACMzH,EAGAD,EAHAC,KACAE,EAEAH,EAFAG,SACA2J,EACA9J,EADA8J,eAEE/I,EAAUc,IAEhB,OACI,oCACL,kBAAC,EAAD,CAAc6I,SAAO,GAArB,cAGA,yBAAKxB,UAAWnI,EAAQuK,YACvB,kBAAC,EAAD,CACC5D,cAAeA,EACfzH,KAAMA,EACNE,SAAUA,EACV2J,eAAgBA,O,SC1BR2B,EAASC,sBAAW,SAAC1L,EAAOuE,GAAS,IACtCoH,EAA6B3L,EAA7B2L,aAAcC,EAAe5L,EAAf4L,WAEdnL,EAAeC,qBAAWb,GAA1BY,WAHqC,EAIbwF,mBAAS,MAJI,mBAItC4F,EAJsC,KAI5BC,EAJ4B,KAMvCC,EAAa,SAAA3G,GAC4B0G,EAA1CD,EAAsD,KAA/BzG,EAAE4G,gBAG9B,OACF,oCACEvL,GACAmL,EAAWxJ,KAAI,SAAAC,GACd,OACC,kBAACmI,EAAA,EAAD,CACCL,IAAK9H,EAAEwC,GACPA,GAAIxC,EAAEwC,GACNoH,QAAS,kBAAMN,EAAatJ,IAC5B6J,QAASH,GAER1J,EAAEiI,a,SCvBJzI,EAAYb,aAAW,SAAAC,GAAK,MAAK,CACnCkL,OAAQ,CACJ,UAAW,CACPxB,gBAAiB,gBAG5BhB,eAAgB,CACTF,SAAU,IACVxC,WAAY,IACZrF,SAAU,SAEdwK,cAAe,CACXC,UAAW,OACjB1B,gBAAiB,cACjBjB,QAAS,GAEP4C,KAAM,CACRhF,MAAOrG,EAAMQ,QAAQE,QAAQ4K,KACvB5B,gBAAiB1J,EAAMQ,QAAQE,QAAQ6F,aACvCkC,QAASzI,EAAMsK,QAAQ,IACvB1F,OAAQ5E,EAAMsK,QAAQ,IACtB3J,SAAU,aAIL4K,EAAc,SAAAxM,GAAU,IAE7ByM,EAKAzM,EALAyM,QACAC,EAIA1M,EAJA0M,mBACAf,EAGA3L,EAHA2L,aACNgB,EAEM3M,EAFN2M,QACA7C,EACM9J,EADN8J,eAEUlJ,EAAuBF,qBAC3BZ,GADIc,mBAGAH,EAAeC,qBAAWb,GAA1BY,WAXwB,EAYAwF,mBAAS,MAZT,mBAYf6F,GAZe,WAa7B/K,EAAUc,IAWV+K,EAAe,CACpB,CACCC,SAAU,SACVC,OAAQ,CACP,CACCjI,GAAI,YACJyF,KAAM,YACNzL,KAAM,SACNkO,WAAY,UAEb,CACClI,GAAI,UACJyF,KAAM,UACNzL,KAAM,SACNkO,WAAY,UAEb,CACClI,GAAI,QACJyF,KAAM,QACNzL,KAAM,SACNkO,WAAY,UAEb,CAAElI,GAAI,OAAQyF,KAAM,OAAQzL,KAAM,SAAUkO,WAAY,YAG1D,CACCF,SAAU,aACVC,OAAQ,CACP,CACCjI,GAAI,WACJyF,KAAM,WACNzL,KAAM,WACNkO,WAAY,YAEb,CACClI,GAAI,aACJyF,KAAM,aACNzL,KAAM,WACNkO,WAAY,cAIf,CACCF,SAAU,aACVC,OAAQ,CACP,CACCjI,GAAI,WACJyF,KAAK,OAAD,OAASqC,EAAT,iBACJ9N,KAAM,OACNkO,WAAY,aACZ7J,KAAM,aACN8J,EAAGL,GAEJ,CACC9H,GAAI,UACJyF,KAAK,UAAD,OAAYqC,EAAZ,iBACJ9N,KAAM,OACNkO,WAAY,aACZ7J,KAAM,YACN8J,EAAGL,GAEJ,CACC9H,GAAI,mBACJyF,KAAK,OAAD,OAASqC,EAAT,mBACJ9N,KAAM,OACNkO,WAAY,oBACZ7J,KAAM,aACN8J,EAAGL,GAEJ,CACC9H,GAAI,kBACJyF,KAAK,UAAD,OAAYqC,EAAZ,mBACJ9N,KAAM,OACNkO,WAAY,oBACZ7J,KAAM,YACN8J,EAAGL,KAIN,CACCE,SAAU,MACVC,OAAQ,CACP,CACCjI,GAAI,WACJyF,KAAK,OAAD,OAASqC,EAAT,eACJ9N,KAAM,MACNkO,WAAY,MACZ7J,KAAM,aACN8J,EAAGL,GAEJ,CACC9H,GAAI,UACJyF,KAAK,UAAD,OAAYqC,EAAZ,eACJ9N,KAAM,MACNkO,WAAY,MACZ7J,KAAM,YACN8J,EAAGL,MAsBEM,EAAgB,WAClB,IAAIlO,EAAW,GACXmO,EAAgB,GACpBT,EAAQU,SAAQ,SAAC9K,EAAGI,GACD,WAAXJ,EAAExD,MAAgC,aAAXwD,EAAExD,KACzBqO,EApImB,SAAAE,GAC3B,IAAMC,EAAWtD,OAAOC,KAAKvJ,GAAY0D,QACrC,SAAAC,GAAC,OAAI3D,EAAW2D,GAAGgJ,EAAUL,cAAgBK,EAAU9C,QAI3D,OADAwB,EAAY,MACLuB,EA8HiBC,CAAuBjL,GACrB,SAAXA,EAAExD,MAA8B,QAAXwD,EAAExD,OAC9BqO,EAvBe,SAAAE,GACvB,IAAMJ,EAAII,EAAUJ,EACdK,EAAWtD,OAAOC,KAAKvJ,GACxByC,MAAK,SAACP,EAAGC,GAAJ,MACiB,eAAnBwK,EAAUlK,KACJzC,EAAWmC,GAAGwK,EAAUL,YACxBtM,EAAWkC,GAAGyK,EAAUL,YACxBtM,EAAWkC,GAAGyK,EAAUL,YACxBtM,EAAWmC,GAAGwK,EAAUL,eAEjCQ,MAAM,EAAGP,GAGd,OADAlB,EAAY,MACLuB,EAUiBG,CAAmBnL,IAGvCtD,EACIA,EAAS2D,OAAS,EACZwK,EACAA,EAAc/I,QAAO,SAAAC,GAAC,OAAIrF,EAASsE,SAASe,SAG1DxD,GAAmB,SAAA6M,GAAS,sBACrBA,EADqB,CAExB1O,SAAUA,EACVmF,YAAauJ,EAAUC,IAAIvJ,QAAO,SAAAC,GAAC,OAAKrF,EAASsE,SAASe,YAclE,OAVAtB,qBAAU,WACN2J,EAAQ/J,OAAS,EACXuK,IACArM,GAAmB,SAAA6M,GAAS,sBACrBA,EADqB,CAExB1O,SAAU,GACVmF,YAAauJ,EAAUC,WAErC,CAACjB,IAGG,oCACJG,EAAaxK,KAAI,SAAAuL,GAAC,OAClB,kBAACzD,EAAA,EAAD,CAAaC,IAAKwD,EAAEd,UACnB,kBAACzC,EAAA,EAAD,KAAauD,EAAEd,UACf,kBAACxC,EAAA,EAAD,CACCC,KAAMqD,EAAEd,SACR1H,SAAU2E,EACVZ,UAAWnI,EAAQ4I,gBAEnB,kBAAC8B,EAAD,CAAQE,aAAcA,EAAcC,WAAY+B,EAAEb,cAI5C,kBAAC7D,EAAA,EAAD,CAAK2E,UAAU,KAAK1E,UAAWnI,EAAQqL,eAC9CK,EAAQ/J,OAAS,GAEF+J,EAAQrK,KAAI,SAAAuL,GACR,OACI,wBAAIxD,IAAKwD,EAAE9I,IACP,kBAACgJ,EAAA,EAAD,CACIC,KAAK,QACL5E,UAAWnI,EAAQuL,KACnBjI,MAAOsJ,EAAErD,KACTyD,SAAU,kBAAMrB,EAAmBiB,a,yDCnOjE9L,GAAYb,aAAW,SAACC,GAAD,MAAY,CACxC+M,eAAgB,CACfrH,QAAS,SAEVsH,YAAa,CACZtH,QAAS,OACTuH,aAAc,SACdC,WAAYlN,EAAMsK,QAAQ,IAE3B6C,kBAAmB,CAClB1E,QAAS,EACTpC,MAAO,UACP,UAAW,CACVqD,gBAAiB,gBAGnB0D,cAAe,CACdzM,SAAU,QACVqF,WAAY,KAEbqH,iBAAkB,CACjB1M,SAAU,QACV0F,MAAO,OACPL,WAAY,IACZ7F,QAAS,QAKEmN,GAAiB,SAAAvO,GAAU,IAC5BwO,EAAoCxO,EAApCwO,aAAcC,EAAsBzO,EAAtByO,kBACd9N,EAAoBD,qBAAWZ,GAA/Ba,gBACLI,EAAUc,KACFC,cAEX,OACI,oCACL,yBAAKoH,UAAWnI,EAAQkN,aACvB,kBAACS,EAAA,EAAD,CAASC,MAAM,gBACd,kBAACC,EAAA,EAAD,CACC1F,UAAWnI,EAAQqN,kBACnBnC,QAASwC,GAET,kBAAC,KAAD,QAGF,kBAAC/J,EAAA,EAAD,CAAYiC,QAAQ,UAApB,iBAEShG,EAAgB5B,UACb4B,EAAgB5B,SAASmE,OAAOd,KAAI,SAACE,EAAOG,GACxC,OACI,kBAACoM,EAAA,EAAD,CACI1E,IAAK1H,EACL6H,KAAMhI,EACNwM,QAASnO,EAAgB5B,SAASsE,SAASf,GAC3C6C,SAAUqJ,EACVO,QACI,kBAACC,GAAA,EAAD,CACI1E,KAAMhI,EACjC4G,UAAWnI,EAAQsN,gBAGrBhK,MAAO/B,EACP4G,UAAWnI,EAAQiN,eACnBjN,QAAS,CAACsD,MAAOtD,EAAQsN,oBAI5B,kBAAClD,EAAA,EAAD,MACQ,6BACCxK,EAAgBuD,aACbvD,EAAgBuD,YAAYhB,OAAOd,KAAI,SAACE,EAAOG,GAC3C,OACI,kBAACoM,EAAA,EAAD,CACI1E,IAAK1H,EACL6H,KAAMhI,EACNwM,QAASnO,EAAgB5B,SAASsE,SAASf,GAC3C6C,SAAUqJ,EACVO,QACI,kBAACC,GAAA,EAAD,CACI1E,KAAMhI,EACjC4G,UAAWnI,EAAQuN,mBAGrBjK,MAAO/B,EACP4G,UAAWnI,EAAQiN,eACnBjN,QAAS,CAACsD,MAAOtD,EAAQuN,yB,UC1F1BzM,GAAYb,aAAW,SAACC,GAAD,MAAY,CACxC0I,eAAgB,CACTF,SAAU,IACVxC,WAAY,IAClBrF,SAAU,QACV0F,MAAOrG,EAAMQ,QAAQC,KAAKC,SAE3BsN,MAAO,CACN3H,MAAOrG,EAAMQ,QAAQC,KAAKC,aAIfuN,GAAe,SAAClP,GAAW,IAC/B2M,EAAwB3M,EAAxB2M,QAASwC,EAAenP,EAAfmP,WACXpO,EAAUc,KAEhB,OACC,kBAACuN,GAAA,EAAD,CACCvK,GAAG,WACHiJ,KAAK,QACLjP,KAAK,SACLwF,MAAM,kBACNgL,WAAY,CACXC,WAAY,CACXrK,IAAK,EACLC,IAAK,GACLgE,UAAWnI,EAAQkO,QAGrBM,aAAc5C,EACdxH,SAAU,SAACC,GAAD,OAAO+J,EAAW/J,EAAEoK,OAAO1K,QACrCoE,UAAWnI,EAAQ4I,kBCpBhB9H,GAAYb,aAAW,SAAAC,GAAK,MAAK,CACtCgN,YAAa,CACZtH,QAAS,OACTkB,WAAY,SACZ+C,aAAc3J,EAAMsK,QAAQ,IAE7BkE,YAAa,CACZ9H,eAAgB,aAChBL,MAAOrG,EAAMQ,QAAQC,KAAKC,SAE3B+N,eAAgB,CACfC,UAAW,OAEZrE,WAAY,CACX9E,YAAavF,EAAMsK,QAAQ,GAC3BX,aAAc3J,EAAMsK,QAAQ,QAIjBqE,GAAkB,SAAC5P,GAAW,IAClC8J,EAAmB9J,EAAnB8J,eADiC,EAEUpJ,qBAAWZ,GAAnDa,EAF8B,EAE9BA,gBAAiBC,EAFa,EAEbA,mBACtBG,EAAUc,KAHyB,GAI3BC,cAEgBmE,mBAAS,KANE,mBAMlCwG,EANkC,KAMzBoD,EANyB,OAOX5J,mBAAS,IAPE,mBAOlC0G,EAPkC,KAOzBwC,EAPyB,KAmDtC,OACI,oCACI,kBAACW,EAAA,EAAD,KACR,kBAAC,EAAD,CAAcpF,SAAO,GAArB,WAGA,yBAAKxB,UAAWnI,EAAQuK,YACvB,kBAAC,GAAD,CAAcqB,QAASA,EAASwC,WAAYA,IAC5C,kBAAC,EAAD,CACCxC,QAASA,EACTwC,WAAYA,EACZ1C,QAASA,EACToD,WAAYA,EACZnD,mBA3BsB,SAAAqD,GACpB,IAAMC,EAAgBvD,EAAQtI,QAAO,SAAAwJ,GAAC,OAAIA,EAAE9I,KAAOkL,EAAclL,MACjEgL,EAAWG,IA0BbrE,aApCgB,SAACyB,GACjBX,EAAQ/J,OAAS,EACpBmN,GAAW,SAAApC,GAAS,4BAAQA,GAAR,CAAmBL,OAEvCyC,EAAW,CAACzC,KAiCTtD,eAAgBA,KAGlB,kBAAC,EAAD,CAAcY,SAAO,GAArB,cAGA,yBAAKxB,UAAWnI,EAAQuK,YACvB,kBAAC,GAAD,CACCkD,aAjEmB,SAAApJ,GACjB,IAAM9C,EAAQ8C,EAAEoK,OAAOlF,KAEnB3J,EAAgB5B,SAASsE,SAASf,GAClC1B,EAAmB,eACZD,EADW,CAEd5B,SAAU4B,EAAgB5B,SAASoF,QAAO,SAAA9B,GAAC,OAAIA,IAAMC,KACrD4B,YAAY,GAAD,mBAAMvD,EAAgBuD,aAAtB,CAAmC5B,OAGlD1B,EAAmB,eACZD,EADW,CAEd5B,SAAS,GAAD,mBAAM4B,EAAgB5B,UAAtB,CAAgCuD,IACxC4B,YAAavD,EAAgBuD,YAAYC,QACrC,SAAA9B,GAAC,OAAIA,IAAMC,SAoDzBmM,kBAjCwB,WAC5BoB,EAAW,IACLjP,GAAmB,SAAA6M,GAAS,sBACrBA,EADqB,CAExB1O,SAAU,GACVmF,YAAauJ,EAAUC,gB,0CC3E7B7L,GAAYb,aAAW,SAAAC,GAAK,MAAK,CACnCoK,WAAY,CACR/D,MAAOrG,EAAMQ,QAAQC,KAAKuO,UAC1B,UAAW,CACPtF,gBAAiB,oBAKhBuF,GAAc,WACvB,IAAMnP,EAAUc,KAEhB,OACI,oCACL,kBAAC2I,EAAA,EAAD,CAAUoD,UAAU,IAAI9C,KAAK,4BAC5B,kBAAC4D,EAAA,EAAD,CAASC,MAAM,cACd,kBAACC,EAAA,EAAD,CAAY1F,UAAWnI,EAAQsK,YAC9B,kBAAC,KAAD,QAGF,kBAAC3G,EAAA,EAAD,CAAYiC,QAAQ,UAApB,eAED,kBAAC6D,EAAA,EAAD,CAAUoD,UAAU,IAAI9C,KAAK,iCAC5B,kBAAC4D,EAAA,EAAD,CAASC,MAAM,mBACd,kBAACC,EAAA,EAAD,CAAY1F,UAAWnI,EAAQsK,YAC9B,kBAAC,KAAD,QAGF,kBAAC3G,EAAA,EAAD,CAAYiC,QAAQ,UAApB,sB,8BC5BE9E,GAAYb,aAAW,SAAAC,GAAK,MAAK,CACnCkP,OAAQ,CACJrK,MAJY,IAKZsK,WAAY,GAEhBC,YAAa,CACTvK,MARY,IASZ+B,WAAY,OACZP,MAAOrG,EAAMQ,QAAQC,KAAKC,QAC1B6E,YAAa,QAEjB8J,aAAa,aACT3J,QAAS,OACTkB,WAAY,SACZ6B,QAASzI,EAAMsK,QAAQ,EAAG,IACvBtK,EAAMsP,OAAOC,QAJR,CAKR7I,eAAgB,WAChBgD,gBAAiB1J,EAAMQ,QAAQE,QAAQ4K,WAIlCkE,GAAa,SAAAzQ,GAAU,IACxB0Q,EAAyC1Q,EAAzC0Q,WAAYC,EAA6B3Q,EAA7B2Q,aAAcC,EAAe5Q,EAAf4Q,WAC5B7P,EAAUc,KACVZ,EAAQa,cAEd,OACF,oCACC,kBAAC+O,GAAA,EAAD,CAAQC,MAAI,GACX,kBAACC,GAAA,EAAD,CACCpM,QAAQ,YACRqM,OAA4B,QAApB/P,EAAMgQ,UAAsB,QAAU,OAC9CC,KAAMR,EACNxE,QAASyE,EACT5P,QAAS,CAAEoQ,MAAOpQ,EAAQsP,aAC1Be,WAAY,CAAEC,aAAa,IAE3B,kBAACC,GAAA,EAAD,MACA,kBAACjI,EAAA,EAAD,CAAME,MAAI,EAACvF,MAAO,CAAC4G,aAAc,SAC/B5K,EAAMkL,YAIT0F,GACG,kBAACC,GAAA,EAAD,CAAQU,QAAM,GAChB,kBAACR,GAAA,EAAD,CACC7H,UAAWnI,EAAQoP,OACnBxL,QAAQ,YACR5D,QAAS,CAAEoQ,MAAOpQ,EAAQsP,aAC1Ba,MAAI,GAEJ,kBAACI,GAAA,EAAD,MACA,yBAAKpI,UAAWnI,EAAQyQ,iBACtBxR,EAAMkL,c,UC3DDuG,GAAe9R,IAAMC,gB,mDCWrB8R,GAAW,WAAO,IAAD,EACQhR,qBAAW+Q,IAArCE,EADkB,EAClBA,SAAUC,EADQ,EACRA,YAcZ7Q,EAZYC,aAAW,SAAAC,GAAK,MAAK,CACnC4Q,SAAU,CACNjK,SAAUkK,OAAOC,WAC1BlM,OAAQ,UAEHmM,aAAc,CACV1K,MAAOrG,EAAMQ,QAAQC,KAAKuO,UACnC,UAAW,CACVtF,gBAAiB,mBAID9I,GACVZ,EAAQa,cAERmQ,EAAYH,OAAOI,SAASpH,KAAKqH,MAAM,KACvCC,EAAO,WAAOH,EAAUA,EAAUvP,OAAS,IAkBjD,OACI,oCACL,kBAAC8H,EAAA,EAAD,CAAUyB,QAlBS,WACdoG,wBAAaC,SAASC,cAAcH,GAAU,qBAAsB,CAChEzH,gBAAiB1J,EAAMQ,QAAQ+Q,WAAWC,QAC1CC,eAAgB,EAChBC,MAAO,CACH,CACIC,IACI,yDACJ9T,OAAQ,wBACR4C,KACI,wOASpB,kBAACgN,EAAA,EAAD,CAASC,MAAM,sBAAsBkE,UAAU,SAC9C,kBAACjE,EAAA,EAAD,CAAY1F,UAAWnI,EAAQiR,cAC9B,kBAAC,KAAD,QAGF,kBAACtN,EAAA,EAAD,CAAYiC,QAAQ,UAApB,eAED,kBAAC6D,EAAA,EAAD,CAAUyB,QAAS,kBAAM2F,GAAaD,KACrC,kBAACjD,EAAA,EAAD,CAASC,MAAM,0BAA0BkE,UAAU,SAClD,kBAACjE,EAAA,EAAD,CAAY1F,UAAWnI,EAAQiR,cAC9B,kBAAC,KAAD,QAGF,kBAACtN,EAAA,EAAD,CAAYiC,QAAQ,UAApB,gB,4DClDE9E,GAAYb,aAAW,SAAAC,GAAK,MAAK,CACnC6R,KAAM,CACFnM,QAAS,QAEboM,OAAQ,CACJpI,gBAAiB1J,EAAMQ,QAAQ+Q,WAAWQ,KAC1C1L,MAAOrG,EAAMQ,QAAQC,KAAKC,SAE9BsR,YAAa,CACTnN,MAAM,eAAD,OAXO,IAWP,OACLoN,WAZY,IAaZvK,WAAY1H,EAAMkS,YAAYC,OAAO,CAAC,SAAU,SAAU,CACtDC,OAAQpS,EAAMkS,YAAYE,OAAOC,QACjC1K,SAAU3H,EAAMkS,YAAYvK,SAAS2K,kBAG7ClI,WAAY,CACR/D,MAAOrG,EAAMQ,QAAQC,KAAKC,QAC1B,UAAW,CACPgJ,gBAAiB,gBAGzB6I,KAAM,CACF7M,QAAS,YAIJ8M,GAAS,SAAAzT,GAAU,IACpBC,EAAmCD,EAAnCC,KAAME,EAA6BH,EAA7BG,SAAU2J,EAAmB9J,EAAnB8J,eADG,EAEM7D,oBAAS,GAFf,mBAEvByK,EAFuB,KAEXgD,EAFW,OAGEzN,mBAAS,MAHX,mBAGvB4F,EAHuB,KAGbC,EAHa,KAKrB/K,EAAUc,KAEb8R,EAAgB,SAACvO,GACqB0G,EAA1CD,EAAsD,KAA/BzG,EAAE4G,gBAGlB2E,EAAe,WACvB+C,GAAehD,IAGb,OACI,oCACI,kBAACkD,GAAA,EAAD,CACIhN,SAAS,WACrBsC,UAAWnI,EAAQgS,QAEP,kBAACzB,GAAA,EAAD,CAASpI,UAAWnI,EAAQyP,SACxB,kBAAC5B,EAAA,EAAD,CACI3C,QAAS0E,EACTkD,KAAK,QACLC,eAAa,EACb5K,UAAWnI,EAAQsK,YAEnB,kBAAC,KAAD,CAAUnC,UAAWnI,EAAQsK,cAEhD,0BAAMrH,MAAO,CAAEkP,WAAY,SAC1B,kBAACa,GAAA,EAAD,CAAQ9H,QAAS0H,GAAjB,WAGA,kBAACK,GAAA,EAAD,CACCnI,SAAUA,EACVqF,KAAM+C,QAAQpI,GACdK,QAASyH,GAET,kBAACO,GAAA,EAAD,CAAUlQ,MAAO,CAAC2C,QAAS,OAAQe,cAAe,SAAUC,eAAgB,WAC3E,kBAAC,GAAD,MACA,kBAAC,GAAD,WAML,kBAAC,GAAD,CACC+I,WAAYA,EACZC,aAAcA,EACdC,YAAU,GAEV,6BACC,kBAAC,EAAD,CACClJ,cAAc,SACdzH,KAAMA,EACNE,SAAUA,EACV2J,eAAgBA,KAGlB,6BACC,kBAAC,GAAD,CAAiBA,eAAgBA,Q,8BCxGzBqK,GAAa,yCAAG,WAAOlU,EAAMmU,EAAW9V,GAAxB,sBAAAqE,EAAA,6DACpBhE,EAA2BL,EAA3BK,OAAQO,EAAmBZ,EAAnBY,OAAQG,EAAWf,EAAXe,OACpBgV,EAAU,GACdtK,OAAOC,KAAKoK,GAAWjH,SAAQ,SAAC7K,EAAMG,GAAO,IAAD,EACvC6R,GAAS,GACZhS,MAAOA,EACP/C,OAAQ6U,EAAU9R,GAAO/C,QAFb,cAGXF,EAAON,SAAW,IAHP,cAIXJ,EAAOI,SAAW,IAJP,cAKXJ,EAAOK,KAAO,IALH,cAMXE,EAAOH,SAAW,IANP,cAOXG,EAAOF,KAAO,IAPH,GAUIiB,EAAKkE,QAAO,SAAA9B,GAAC,OAAIA,EAAEC,QAAUA,KACrC6K,SAAQ,SAAC9K,EAAEI,GACnB6R,EAAUjV,EAAON,UAAUwV,KAAK,CAAClS,EAAEhD,EAAON,UAAWsD,EAAEhD,EAAON,YAC9DuV,EAAU3V,EAAOI,UAAUwV,KAAK,CAAClS,EAAEhD,EAAON,UAAWsD,EAAE1D,EAAOI,YAC9DuV,EAAUpV,EAAOH,UAAUwV,KAAK,CAAClS,EAAEhD,EAAON,UAAWsD,EAAEnD,EAAOH,YAC9DuV,EAAU3V,EAAOK,MAAMuV,KAAK,CAAClS,EAAEhD,EAAON,UAAWsD,EAAE1D,EAAOK,QAC1DsV,EAAUpV,EAAOF,MAAMuV,KAAK,CAAClS,EAAEhD,EAAON,UAAWsD,EAAEnD,EAAOF,WAE3DqV,EAAQE,KAAKD,MAtBc,kBAyBrBD,GAzBqB,2CAAH,0DCAb5O,GAAU,CACtBE,aAAkC,GAApBmM,OAAOC,WACrBnM,cAAoC,GAArBkM,OAAO0C,YACtB3O,OAAQ,CACPuB,IAAK,GACLqN,MAAO,GACPC,OAAQ,GACRzS,KAAM,KAIKyD,GAAS,CACrBI,MAAOL,GAAQE,aAAeF,GAAQI,OAAO5D,KAAOwD,GAAQI,OAAO4O,MACnE1O,OAAQN,GAAQG,cAAgBH,GAAQI,OAAOuB,IAAM3B,GAAQI,OAAO6O,QCQxDC,GAAe,SAAC3U,GAAW,IAC/B2R,EAA0B3R,EAA1B2R,SAAUC,EAAgB5R,EAAhB4R,YACV/L,EAAWJ,GAAXI,OACAC,EAAUJ,GAAVI,MAEDE,EAActF,qBAAWhB,GAAzBsG,WAL+B,EAMdC,mBAAS,MANK,mBAM/BhG,EAN+B,KAMzB2U,EANyB,OAON3O,mBAAS,CACxCtH,OAAQL,EAAYK,OACpBO,OAAQZ,EAAYY,OACpBC,OAAQb,EAAYa,OACpBC,OAAQd,EAAYc,SAXiB,mBAO/Be,EAP+B,KAOrB0U,EAPqB,OAaQ5O,mBAAS,CACtDlH,SAAU,GACVmF,YAAa6F,OAAOC,KAAKoK,GACzB1G,IAAK3D,OAAOC,KAAKoK,KAhBoB,mBAa/BzT,EAb+B,KAadC,EAbc,KA4BhCG,EARYC,aAAW,SAACC,GAAD,MAAY,CACxC6T,OAAQ,CACPhP,MAAOA,EACPoN,WAAYrN,EAAO5D,KACnB0E,QAAS,OACTgB,eAAgB,iBAGF9F,GAqBhB,OAPAiB,qBAAU,WACLkD,EAAWtD,OAAS,GACvByR,GAAcnO,EAAYoO,EAAW9V,GACnCyW,MAAK,SAAAC,GAAG,OAAIJ,EAAQI,QAErB,CAAChP,IAGH,kBAAClG,EAAiBmV,SAAlB,CAA2BnQ,MAAO,CAACnE,kBAAiBC,uBACnD,kBAAC,GAAD,CACCX,KAAMA,EACNE,SAAUA,EACV2J,eAxBoB,SAAC1E,GACvB,IAAM8P,EAAQ9P,EAAEoK,OAAOlF,KAEvBuK,EAAY,eACR1U,EADO,eAET+U,EAFS,eAGN/U,EAAS+U,GAHH,CAITnW,SAAUqG,EAAEoK,OAAO1K,YAkBnBoE,UAAWnI,EAAQ+T,OACnBnD,SAAUA,EACVC,YAAaA,IAEd,yBAAKxI,UAAS,oBAAevD,EAAO5D,KAAtB,aAA+B4D,EAAOuB,IAAtC,MACZnH,GACG,kBAAC,EAAD,CACFX,iBAAkBA,EAClBa,SAAUA,EACVF,KAAMA,EACNwF,QAASA,GACTC,OAAQA,QCrFRyP,GAAO,CACXC,cAAepT,IAAc,YAC7BqT,WAAYrT,IAAa,aAGrBsT,GAEI,IAFJA,GAGI,CACNlO,IAAK,GACLqN,MAAO,IACPC,OAAQ,IACRzS,KAAM,KCLGsT,IDDJzD,OAAOC,WAWYuD,GAAkBrT,KAAOqT,GAAkBb,MACzCa,GAAkBlO,IAAMkO,GAAkBZ,OCX/C,SAAC1U,GAAW,IAC5BwV,EAAwDxV,EAAxDwV,MAAOC,EAAiDzV,EAAjDyV,QAASC,EAAwC1V,EAAxC0V,YAAaC,EAA2B3V,EAA3B2V,eAAgBjQ,EAAW1F,EAAX0F,OAC1CI,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OACVC,EAAetF,qBAAWhB,GAA1BsG,WAEC1F,EAAS0B,MAAiBoG,OAAOpG,IAAUgE,GAAY,SAAA3D,GAAC,OAAIA,EAAEuT,kBAAgBvN,MAAM,CAAC,EAAGvC,IACxFvF,EAASyB,MAAiBoG,OAAOpG,IAAUgE,GAAY,SAAA3D,GAAC,OAAIA,EAAEmB,qBAAmB6E,MAAM,CAACtC,EAAQ,IAyDtG,OAvDAjD,qBAAU,WACN,GAAI2S,GAAWE,EAAgB,CAE3BF,EAAQ3R,GAAG,aAIX,WACI,IAAI+R,EAAKvV,EAAOwV,OAAO9T,IAAS+T,MAAM,IAC5CC,EAAahU,KAAY,SAAAK,GAAC,OAAIA,EAAEuT,iBAAe3T,KAEzC8H,OAAOC,KAAK2L,GAAgBzS,OACvBiB,QAAO,SAAAC,GAAC,OAAmC,IAA/BuR,EAAevR,GAAGrF,YAC9BoO,SAAQ,SAAA7K,GACL,IAAM2T,EAAgBjQ,EAAW7B,QAAO,SAAA9B,GAAC,OAAIA,EAAEC,QAAUA,KACnD4T,EAAYP,EAAerT,GAAOc,WAClCX,EAAIuT,EAAWC,EAAeJ,EAAI,GAEpCM,EAAsBF,EAAcxT,GAClCwT,EAAcxT,GAAGe,iBACjByS,EAAcA,EAAcvT,OAAS,GAAGc,iBAC1C4S,EAAsBH,EAAcxT,GAClCwT,EAAcxT,GAAGmT,cACjBK,EAAcA,EAAcvT,OAAS,GAAGkT,cAC1CS,EAAyBJ,EAAcxT,GACrC0S,GAAKC,cAAca,EAAcxT,GAAG0S,MACpCA,GAAKC,cAAca,EAAcA,EAAcvT,OAAS,GAAGyS,MAC7DmB,EAA0BL,EAAcxT,GACtCwT,EAAcxT,GAAGiB,MACjBuS,EAAcA,EAAcvT,OAAS,GAAGgB,MAM9C+R,EAAQ3R,GAAG,SAJU,WACtCyS,GAAUA,KAKYA,IACDf,EAAMgB,OAAN,kBAAwBN,IACnB/S,KAAK,KAAM5C,EAAO4V,IAClBhT,KAAK,KAAM7C,EAAO8V,IAEvBZ,EAAMgB,OAAN,mBAAyBN,IACpBxU,KADL,UACaiU,EAAerT,GAAOgC,aADnC,mBAC0D8R,EAD1D,aACkFC,EAAuBlE,MAAM,KAAK5E,MAAM,EAAE,GAAGtK,KAAK,KADpI,MAEnBE,KAAK,OAAQwS,EAAerT,GAAOgF,OAEhBkO,EAAMgB,OAAN,qBAA2BN,IACtBxU,KADL,UACayU,EAAoB1S,QAAQ,GADzC,aACgD6S,EADhD,WAEKnT,KAAK,OAAQwS,EAAerT,GAAOgF,cA3CxD,IAAIiP,GAAS,KAgDrB,CAACb,IAEM,OC1DEe,GAAO,SAAAzW,GAAU,IAEtBwV,EAIAxV,EAJAwV,MACNC,EAGMzV,EAHNyV,QACME,EAEA3V,EAFA2V,eACNjQ,EACM1F,EADN0F,OAEUI,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OAGPC,EAAetF,qBAAWhB,GAA1BsG,WACHvF,EAAeC,qBAAWb,GAA1BY,WAGCQ,EAAQa,cACX4U,EAAWtQ,YAAcnF,EAAMoF,YAAYI,GAAG,OAC9CkQ,EAAUvQ,YAAcnF,EAAMoF,YAAYI,GAAG,OAhBvB,EAkBUR,mBAAS,IAlBnB,mBAkBrByP,EAlBqB,KAkBRkB,EAlBQ,KAoBtBC,EAAe,SAAAC,GAIpB,OAHe/M,OAAOC,KAAK8M,GACzB5T,OACAiB,QAAO,SAAAC,GAAC,OAAiC,IAA7B0S,EAAa1S,GAAGrF,aAgI5B,OA5HA+D,qBAAU,WACN,GAAI6S,GAAkB3P,EAAWtD,OAAS,EAAG,CAEzC,IAAMpC,EAAS0B,MAEVoG,OAAOpG,IAAUgE,GAAY,SAAA3D,GAAC,OAAIA,EAAEuT,kBACpCvN,MAAM,CAAC,EAAGvC,IACTvF,EAASyB,MAEVoG,OAAOpG,IAAUgE,GAAY,SAAA3D,GAAC,OAAIA,EAAEmB,qBACpC6E,MAAM,CAACtC,EAAQ,IAGdgR,EAAgB/U,MAEjBgV,GAAE,SAAA3U,GAAC,OAAI/B,EAAO+B,EAAEuT,kBAChBqB,GAAE,SAAA5U,GAAC,OAAI9B,EAAO8B,EAAEmB,qBAEf0T,EAAc,GAEZL,EAAalB,GAEhBxI,SAAQ,SAAC7K,EAAOG,GACb,IAAMwT,EAAgBjQ,EAAW7B,QAC7B,SAAA9B,GAAC,OAAIA,EAAEC,QAAUA,KAGf6U,EACFlB,EAAcA,EAAcvT,OAAS,GAAGkT,cACtCwB,EACFnB,EAAcA,EAAcvT,OAAS,GAChCc,iBAIH6T,GADe1B,EAAerT,GAAOgV,SAEvBrB,EAAc,GAAGd,MAAjC,MAEA,EACEoC,EAAmBtB,EAAc9R,QACnC,SAAA9B,GAAC,OAAIA,EAAEuT,gBAAkByB,KAC3B,GAGEH,EAAY5U,GADZiV,EACqB,CACjBC,KAAMT,EAAcd,GACpBwB,WAAYnX,EAAO6W,GAAqB,EACxCO,WAAYnX,EAAO6W,GACnBO,gBAAiBrX,EAAO+W,GACxBO,gBAAiBrX,EACbgX,EAAiB/T,mBAIJ,CACjBgU,KAAMT,EAAcd,GACpBwB,WAAYnX,EAAO6W,GAAqB,EACxCO,WAAYnX,EAAO6W,OAInCR,EAAeM,MAEvB,CAAClR,EAAY2P,EAAgB1U,IAEhC6B,qBAAU,WACL6S,GACckB,EAAalB,GAG7BxI,SAAQ,SAAC7K,EAAOG,GAChB,IAAMyT,EAAYzV,EAAW6B,GAAOc,WAEhCyU,EAAS,EACTC,EAAS,EAETrV,EAAI,KACHkU,GACHkB,EAAS,IACTC,EAAS,KACCpB,IACVmB,EAAS,IACTC,EAAS,MAIXtC,EACEjS,OAAO,UACPJ,KAAK,KAFP,iBAEuB+S,IACrB/S,KAAK,IAAK,GACVA,KAAK,OAAQwS,EAAerT,GAAOgF,OACnCnE,KAAK,SAAUlC,EAAMQ,QAAQC,KAAKC,UAEhC+U,EAAWjU,EAAI,GAAKA,EAAI,MAC3B+S,EACEjS,OAAO,QACPJ,KAAK,KAFP,kBAEwB+S,IACtB/S,KAAK,IAAK,GAAK0U,GACf1U,KAAK,KAAK,SAAAd,GAAC,OAAIqU,EAAW,GAAS,GAAJjU,EAASqV,EAAS,GAAS,GAAJrV,KACtDuB,MAAM,aAAa,SAAA3B,GAAC,OAAIsU,EAAU,QAAU,WAC5C3S,MACA,cACA,+CAGFwR,EACEjS,OAAO,QACPJ,KAAK,KAFP,oBAE0B+S,IACxB/S,KAAK,IAAK,GAAK0U,GACf1U,KAAK,KAAK,SAAAd,GAAC,OAAIqU,EAAW,GAAS,GAAJjU,EAASqV,EAAS,GAAS,GAAJrV,KACtDuB,MAAM,aAAa,SAAA3B,GAAC,OAAIsU,EAAU,QAAU,WAC5C3S,MACA,cACA,mDAKL,OAAO,WACNwR,EAAMxS,UAAU,UAAU+F,SAC1ByM,EAAMxS,UAAU,QAAQ+F,YAEvB,CAAC2M,IAGG,oCACI,kBAAC,GAAD,eACIF,MAAOA,EACnBC,QAASA,EACTC,YAAaA,EACbhQ,OAAQA,GACQ1F,IAEPgG,EAAWtD,OAAS,EACjBqH,OAAOC,KAAK0L,GACPxS,OACAd,KAAI,SAACE,EAAOG,GACT,IAAMyT,EAAYzV,EAAW6B,GAAOc,WAEpC,OACjB,kBAAC,WAAD,CAAU+G,IAAK7H,GACd,uBAAGuC,GAAE,wBAAmBqR,IACvB,0BACC1U,KAAK,OACLL,OAAQwU,EAAerT,GAAOgF,MAC9BhG,YAAa,IACbyW,eAAe,QACfC,cAAc,QACd3V,EAAGqT,EAAYpT,GAAOkV,OAEvB,4BACC3S,GAAG,uBACHoT,EAAG,EACHzW,KACCkU,EAAYpT,GAAOqV,gBAChBhC,EAAerT,GAAOgF,MACtB,OAEJ4Q,GAAIxC,EAAYpT,GAAOqV,gBACvBQ,GAAIzC,EAAYpT,GAAOsV,kBAExB,0BACC/S,GAAE,qBAAgBqR,GAClBhN,UAAU,aACVlF,MAAO,CACNxC,KAAMP,EAAMQ,QAAQC,KAAKC,QACzBC,SAAU,OACVwW,WACC,+CAEFpB,EAAGtB,EAAYpT,GAAOmV,WACtBR,EAAGvB,EAAYpT,GAAOoV,YAErB/B,EAAerT,GAAOgC,mBAOjB,8BChNH+T,GAAoB,SAAArY,GAAU,IAClCyF,EAAoBzF,EAApByF,QAASC,EAAW1F,EAAX0F,OACTC,EAAwCF,EAAxCE,aAAcC,EAA0BH,EAA1BG,cAAeC,EAAWJ,EAAXI,OAC7BC,EAAkBJ,EAAlBI,MAAOC,EAAWL,EAAXK,OACPC,EAAetF,qBAAWhB,GAA1BsG,WA8BJjF,EA5BcC,aAAW,SAAAC,GAAK,MAAK,CACtCyF,QAAS,CACRC,QAAS,eACTC,SAAU,WACVd,MAAO,OACPe,cAAe,SACfC,SAAU,UAEXpB,OAAQ,CACPI,MAAOA,EACPC,OAAQA,GAET4I,MAAO,CACNnN,KAAMP,EAAMQ,QAAQC,KAAKC,QACzBC,SAAU,UAEXyF,KAAM,CACL7F,KAAMP,EAAMQ,QAAQC,KAAKC,SAE1B2W,UAAW,CACV9W,KAAMP,EAAMQ,QAAQC,KAAKC,QACzBC,SAAU,SAEX2W,UAAW,CACV/W,KAAMP,EAAMQ,QAAQC,KAAKC,QACzBC,SAAU,YAGEC,GAELoG,EAAWnH,iBAAO,MAClBoH,EAAWpH,iBAAO,MAClBiH,EAASjH,iBAAO,MACnBkH,EAAYlH,iBAAO,MASnB0U,EANExT,IACEgG,EAAUjF,SACjBQ,OAAO,KACPJ,KAAK,QAAS,SACda,MAAM,UAAW,QAcdyR,EATEzT,IACEgG,EAAUjF,SACjBQ,OAAO,QACPJ,KAAK,QAAS,WACdA,KAAK,QAAS2C,GACd3C,KAAK,SAAU4C,GACf5C,KAAK,UAAW,KAChBW,GAAG,aAAa,kBAAM0R,EAAMxR,MAAM,UAAW,SAsB7C,OAlBAlB,qBAAU,WAEN,IAAMxC,EAAS0B,MAEVoG,OAAOpG,IAAUgE,GAAY,SAAA3D,GAAC,OAAIA,EAAEuT,kBACpCvN,MAAM,CAAC,EAAGvC,IACTvF,EAASyB,MAEVoG,OAAOpG,IAAUgE,GAAY,SAAA3D,GAAC,OAAIA,EAAEmB,qBACpC6E,MAAM,CAACtC,EAAQ,IAGduC,EAAiBtG,MAAcuG,MAAMhI,GACrCiI,EAAiBxG,MAAgBuG,MAAMjI,GAC7C0B,IAAUkG,EAASnF,SAASO,KAAKkF,GACjCxG,IAAUiG,EAASlF,SAASO,KAAKgF,KACrC,CAACtC,IAGH,oCACC,yBACCnB,GAAG,WACHkB,OAAQH,EACRE,MAAOH,EACPpB,IAAKwD,EACLmB,UAAWnI,EAAQ2F,QACnByC,QAAO,cAASxD,EAAT,YAAyBC,IAGpB,0BACIsD,UAAWnI,EAAQ4N,MACnB3K,MAAO,CAACoU,WAAY,+CACpBpR,WAAW,SACXoC,UAAS,qBACLvD,EAAO5D,KAAO6D,EAAQ,EADjB,aAEJD,EAAOuB,IAAM,EAFT,MAJb,gCAUA,0BACI8B,UAAWnI,EAAQuX,UACnBtU,MAAO,CAACoU,WAAY,+CACpBpR,WAAW,SACXoC,UAAS,oBAAevD,EAAO5D,KAAO6D,EAAQ,EAArC,aACLC,EAASF,EAAOuB,IAAM,GADjB,MAJb,mBAUA,0BACI8B,UAAWnI,EAAQuX,UACnBtU,MAAO,CAACoU,WAAY,+CACpBpR,WAAW,SACXoC,UAAS,oBACS,GAAdvD,EAAO5D,KADF,aAEJ8D,EAAS,EAFL,kBAJb,yBAUA,0BACImD,UAAWnI,EAAQwX,UACnBvR,WAAW,OACXhD,MAAO,CAACoU,WAAY,+CACpBhP,UAAS,oBAAevD,EAAO5D,KAAtB,aACL8D,EAASF,EAAOuB,IAAM,GADjB,MAJb,yFAWA,0BACI8B,UAAWnI,EAAQwX,UACnBvR,WAAW,OACXhD,MAAO,CAACoU,WAAY,+CACpBhP,UAAS,oBAAevD,EAAO5D,KAAtB,aACL8D,EAASF,EAAOuB,IAAM,GADjB,MAJb,mDAUA,0BACI8B,UAAWnI,EAAQwX,UACnBvR,WAAW,OACXhD,MAAO,CAACoU,WAAY,+CACpBhP,UAAS,oBAAevD,EAAO5D,KAAtB,aACL8D,EAASF,EAAOuB,IAAM,IADjB,MAJb,uHAWA,0BACI8B,UAAWnI,EAAQwX,UACnBvR,WAAW,OACXhD,MAAO,CAACoU,WAAY,+CACpBhP,UAAS,oBAAevD,EAAO5D,KAAtB,aACL8D,EAASF,EAAOuB,IAAM,IADjB,MAJb,kEAUA,uBACIvC,GAAG,SACHuE,UAAS,oBAAevD,EAAO5D,KAAtB,aAA+B4D,EAAOuB,IAAtC,KACT7C,IAAKyD,GAEL,uBACIzD,IAAK0D,EACLpD,GAAG,SACHb,MAAO,CAACoU,WAAY,iDAExB,uBACI7T,IAAK2D,EACLrD,GAAG,SACHuE,UAAS,sBAAiBrD,EAAjB,KACT/B,MAAO,CAACoU,WAAY,iDAExB,kBAAC,GAAD,eAAM5C,MAAOA,EAAOC,QAASA,GAAazV,Q,UCzLjDwY,GAAe9M,sBAAW,SAAC1L,EAAOuE,GAAS,IAC/CkU,EAAoDzY,EAApDyY,cAAeC,EAAqC1Y,EAArC0Y,qBAAsB3M,EAAe/L,EAAf+L,WAO7C,OACC,oCACE0M,EAAcrW,KAAI,SAAAmI,GAClB,OACC,kBAACC,EAAA,EAAD,CACCL,IAAKI,EAAE1F,GACPA,GAAI0F,EAAE1F,GACNN,IAAKA,EACL0H,QAAS,kBAbWmB,EAaW7C,EAZnCwB,SACA2M,EAAqBtL,GAFE,IAACA,IAepB7C,EAAED,aClBKqO,GAAc,SAAC3Y,GAAW,IAC9B2M,EAAkC3M,EAAlC2M,QAAS+L,EAAyB1Y,EAAzB0Y,qBADoB,EAELzS,mBAAS,MAFJ,mBAE9B4F,EAF8B,KAEpBC,EAFoB,KAI/BC,EAAa,SAAC3G,GACwB0G,EAA1CD,EAAsD,KAA/BzG,EAAE4G,gBAGrByM,EAAgB,CACrB,CAAC5T,GAAI,aAAcyF,KAAK,OAAD,OAASqC,EAAT,YAA4B9N,KAAM,QAASkO,WAAY,kBAAmB7J,KAAM,aAAc8J,EAAGL,GACxH,CAAC9H,GAAI,YAAayF,KAAK,UAAD,OAAYqC,EAAZ,YAA+B9N,KAAM,QAASkO,WAAY,kBAAmB7J,KAAM,YAAa8J,EAAGL,GACzH,CAAC9H,GAAI,sBAAuByF,KAAK,OAAD,OAASqC,EAAT,eAA+B9N,KAAM,QAASkO,WAAY,yBAA0B7J,KAAM,aAAc8J,EAAGL,GAC3I,CAAC9H,GAAI,qBAAsByF,KAAK,UAAD,OAAYqC,EAAZ,eAAkC9N,KAAM,QAASkO,WAAY,yBAA0B7J,KAAM,YAAa8J,EAAGL,IAG7I,OACC,oCACC,kBAACoH,GAAA,EAAD,CAAQlP,GAAG,YAAYoH,QAASF,GAAhC,kBAGA,kBAACiI,GAAA,EAAD,CACCnI,SAAUA,EACVqF,OAAMrF,GAAWoI,QAAwB,cAAhBpI,EAAShH,IAClCqH,QAASH,GAET,kBAACyM,GAAD,CACCC,cAAeA,EACfC,qBAAsBA,EACtB3M,WAAYA,OC5BJ6M,GAAmB,SAAC5Y,GAAW,IACnC2M,EAAkC3M,EAAlC2M,QAAS+L,EAAyB1Y,EAAzB0Y,qBADyB,EAGVzS,mBAAS,MAHC,mBAGnC4F,EAHmC,KAGzBC,EAHyB,KAKpCC,EAAa,SAAC3G,GACwB0G,EAA1CD,EAAsD,KAA/BzG,EAAE4G,gBAGrByM,EAAgB,CACrB,CAAC5T,GAAI,WAAYyF,KAAK,OAAD,OAASqC,EAAT,iBAAiC9N,KAAM,OAAQkO,WAAY,aAAc7J,KAAM,aAAc8J,EAAGL,GACrH,CAAC9H,GAAI,UAAWyF,KAAK,UAAD,OAAYqC,EAAZ,iBAAoC9N,KAAM,OAAQkO,WAAY,aAAc7J,KAAM,YAAa8J,EAAGL,GACtH,CAAC9H,GAAI,mBAAoByF,KAAK,OAAD,OAASqC,EAAT,mBAAmC9N,KAAM,OAAQkO,WAAY,oBAAqB7J,KAAM,aAAc8J,EAAGL,GACtI,CAAC9H,GAAI,kBAAmByF,KAAK,UAAD,OAAYqC,EAAZ,mBAAsC9N,KAAM,OAAQkO,WAAY,oBAAqB7J,KAAM,YAAa8J,EAAGL,IAGxI,OACC,oCACC,kBAACoH,GAAA,EAAD,CAAQlP,GAAG,iBAAiBoH,QAASF,GAArC,wBAGA,kBAACiI,GAAA,EAAD,CACCnI,SAAUA,EACVqF,OAAMrF,GAAWoI,QAAwB,mBAAhBpI,EAAShH,IAClCqH,QAASH,GAET,kBAACyM,GAAD,CACCC,cAAeA,EACfC,qBAAsBA,EACtB3M,WAAYA,OC7BJ8M,GAAmBnN,sBAAW,SAAC1L,EAAOuE,GAAS,IACnDkU,EAAoDzY,EAApDyY,cAAeC,EAAqC1Y,EAArC0Y,qBAAsB3M,EAAe/L,EAAf+L,WAO7C,OACC,oCACE0M,EAAcrW,KAAI,SAAAmI,GAClB,OACC,kBAACC,EAAA,EAAD,CACCL,IAAKI,EAAE1F,GACPA,GAAI0F,EAAE1F,GACNN,IAAKA,EACL0H,QAAS,kBAbWmB,EAaW7C,EAZnCwB,SACA2M,EAAqBtL,GAFE,IAACA,IAepB7C,EAAED,aChBKwO,GAAe,SAAC9Y,GAAW,IAC/B0Y,EAAyB1Y,EAAzB0Y,qBAD8B,EAGNzS,mBAAS,MAHH,mBAG/B4F,EAH+B,KAGrBC,EAHqB,KAKhCC,EAAa,SAAC3G,GACwB0G,EAA1CD,EAAsD,KAA/BzG,EAAE4G,gBAU3B,OACC,oCACC,kBAAC+H,GAAA,EAAD,CAAQlP,GAAG,aAAaoH,QAASF,GAAjC,oBAGA,kBAACiI,GAAA,EAAD,CACCnI,SAAUA,EACVqF,OAAMrF,GAAWoI,QAAwB,eAAhBpI,EAAShH,IAClCqH,QAASH,GAET,kBAAC8M,GAAD,CACCJ,cAlBkB,CACrB,CAAC5T,GAAI,YAAayF,KAAM,YAAazL,KAAM,SAAUkO,WAAY,UACjE,CAAClI,GAAI,UAAWyF,KAAM,UAAWzL,KAAM,SAAUkO,WAAY,UAC7D,CAAClI,GAAI,QAASyF,KAAM,QAASzL,KAAM,SAAUkO,WAAY,UACzD,CAAClI,GAAI,OAAQyF,KAAM,OAAQzL,KAAM,SAAUkO,WAAY,WAepD2L,qBAAsBA,EACtB3M,WAAYA,OCxBXlK,GAAYb,aAAW,SAAAC,GAAK,MAAK,CACtCuI,cAAe,CACd5B,SAAU,IACV6B,SAAU,IACV9B,eAAgB,eAChB+B,QAAS,EACT7D,OAAQ,GAENkT,IAAK,CACD3X,QAAS,IAEb4X,SAAU,CACN5X,QAAS,GACT,UAAW,CACPA,QAAS,QAKR6X,GAAc,SAAAjZ,GAAU,IACzB2V,EAAsC3V,EAAtC2V,eAAgBuD,EAAsBlZ,EAAtBkZ,kBAGnBzY,EAAeC,qBAAWb,GAA1BY,WAJ2B,EAOAwF,mBAAS,MAPT,mBAOf6F,GAPe,aAQY7F,mBAAS,MARrB,mBAQzBkT,EARyB,KAQTC,EARS,KAW7BnY,EAAQa,cACRf,EAAUc,KACVsE,EAAUC,YAAcnF,EAAMoF,YAAYC,KAAK,OAE/CoS,EAAuB,SAACW,GAC7BD,EAAkBC,GAClBvN,EAAY,OAuDV,OATHhJ,qBAAU,WACT,GAAIqW,EAAgB,CACnB,IAAMG,EAAeH,EAAenM,EA5BR,SAACI,EAAWmM,GACzC,IACIlM,EADEL,EAAII,EAAUJ,EAGpBK,EAAWtD,OAAOC,KAAKuP,GACtBrW,MAAK,SAACP,EAAGC,GAAJ,MACc,eAAnBwK,EAAUlK,KACPqW,EAAK3W,GAAGwK,EAAUL,YACnBwM,EAAK5W,GAAGyK,EAAUL,YACjBwM,EAAK5W,GAAGyK,EAAUL,YACnBwM,EAAK3W,GAAGwK,EAAUL,eAEpBQ,MAAM,EAAGP,GAEV,IAAIsM,EAAe,GASb,OARNvP,OAAOC,KAAKuP,GAAMpM,SAAQ,SAAA/I,GACrBiJ,EAAShK,SAASe,GACrBkV,EAAalV,GAAb,eAAsBmV,EAAKnV,GAA3B,CAA+BrF,UAAU,IAEzCua,EAAalV,GAAb,eAAsBmV,EAAKnV,GAA3B,CAA+BrF,UAAU,OAI9Bua,EAMT9L,CAAmB2L,EAAgB1Y,GA9CT,SAAC2M,EAAWmM,GACpC,IAAMlM,EAAWtD,OAAOC,KAAKuP,GAAMpV,QAC/B,SAAAC,GAAC,OAAImV,EAAKnV,GAAGgJ,EAAUL,cAAgBK,EAAU9C,QAGvDgP,EAAe,GASb,OARNvP,OAAOC,KAAKuP,GAAMpM,SAAQ,SAAA/I,GACrBiJ,EAAShK,SAASe,GACrBkV,EAAalV,GAAb,eAAsBmV,EAAKnV,GAA3B,CAA+BrF,UAAU,IAEzCua,EAAalV,GAAb,eAAsBmV,EAAKnV,GAA3B,CAA+BrF,UAAU,OAI9Bua,EAiCThM,CAAuB6L,EAAgB1Y,GAC1CyY,EAAkBI,MAElB,CAACH,IAGF,kBAAC9P,EAAA,EAAD,CAAMC,WAAS,EAACJ,UAAWnI,EAAQyI,cAClCxF,MAAOmC,EACL,CAACuB,cAAe,SAAUG,WAAY,UACtC,CAACH,cAAe,QAElB,kBAAC,GAAD,CACC8R,gBAAc,YACdC,gBAAc,OACdvQ,UAAWnI,EAAQgY,IACnBpM,QAAS,GACTgJ,eAAgBA,EAChBuD,kBAAmBA,EACnBR,qBAAsBA,IAEvB,kBAAC,GAAD,CACCc,gBAAc,iBACdC,gBAAc,OACdvQ,UAAWnI,EAAQgY,IACnBpM,QAAS,GACTgJ,eAAgBA,EAChBuD,kBAAmBA,EACnBR,qBAAsBA,IAEvB,kBAAC,GAAD,CACCc,gBAAc,aACdC,gBAAc,OACdvQ,UAAWnI,EAAQgY,IACnBpD,eAAgBA,EAChBuD,kBAAmBA,EACnBR,qBAAsBA,M,qBCtHpB7W,GAAYb,aAAW,SAACC,GAAD,MAAY,CACxCyY,uBAAwB,CACvBpS,MAAOrG,EAAMQ,QAAQC,KAAKC,QAC1BsF,WAAY,KAEb0S,WAAY,CACXC,UAAW,OACXpT,YAAavF,EAAMsK,QAAQ,IAE5BsO,gBAAiB,CAChBvS,MAAO,QACP,UAAW,CACVqD,gBAAiB,gBAGnByD,kBAAmB,CAClB9G,MAAO,MACP,UAAW,CACVqD,gBAAiB,gBAGnBmP,mBAAoB,CACnBlY,SAAU,SAEXmY,sBAAuB,CACtBzS,MAAO,OACPlG,QAAS,GACTQ,SAAU,aAICoY,GAAY,SAAAha,GAAU,IAE3B2V,EAIA3V,EAJA2V,eACAsE,EAGAja,EAHAia,qBACAC,EAEAla,EAFAka,sBACAC,EACAna,EADAma,wBAGDpZ,EAAUc,KACCC,cAEd,OACI,6BACL,kBAAC,EAAD,CAAc4I,SAAO,EAAC3J,QAAS,CAAC0J,WAAY1J,EAAQ2Y,yBAApD,cAGS,kBAAC5J,EAAA,EAAD,CAAW5G,UAAWnI,EAAQ4Y,YAC1B,kBAAC9K,EAAA,EAAD,CACIhK,GAAG,aACHR,MAAM,aACNiG,KAAK,aACL2B,QAASiO,EACTnL,QACI,kBAACH,EAAA,EAAD,CACI/J,GAAG,eACHyF,KAAK,aACLpB,UAAWnI,EAAQ8Y,iBAEnB,kBAAC,KAAD,SAIZ,kBAAChL,EAAA,EAAD,CACIhK,GAAG,eACHR,MAAM,eACNiG,KAAK,eACL2B,QAASkO,EACTpL,QACI,kBAACH,EAAA,EAAD,CACI/J,GAAG,iBACHyF,KAAK,eACLpB,UAAWnI,EAAQqN,mBAEnB,kBAAC,KAAD,SAIZ,kBAACjD,EAAA,EAAD,CAASjC,UAAWnI,EAAQ2J,UAC3BiL,EACG5L,OAAOC,KAAK2L,GACPzS,OACAiB,QAAO,SAAAC,GAAC,OAAmC,IAA/BuR,EAAevR,GAAGrF,YAC9BqD,KAAI,SAACE,EAAOG,GACT,OACI,kBAACoM,EAAA,EAAD,CACI1E,IAAK1H,EACLoC,GAAI8Q,EAAerT,GAAOc,WAC1BkH,KAAMhI,EACNwM,QAAS6G,EAAerT,GAAOvD,SAC1DoG,SAAU8U,EACVlZ,QAAS,CAACsD,MAAOtD,EAAQ+Y,oBACE/K,QACI,kBAACC,GAAA,EAAD,CAC7B1E,KAAMhI,EACN4G,UAAWnI,EAAQ+Y,mBACc9V,MAAO,CACHsD,MACIqO,EAAerT,GAAOgF,SAItCjD,MAAK,UAAK/B,EAAL,aAAeqT,EAAerT,GAAOgC,aAArC,UAKrB,8BAEJ,kBAAC6G,EAAA,EAAD,CAASjC,UAAWnI,EAAQ2J,UAC3BiL,EACG5L,OAAOC,KAAK2L,GACPzS,OACAiB,QAAO,SAAAC,GAAC,OAAmC,IAA/BuR,EAAevR,GAAGrF,YAC9BqD,KAAI,SAACE,EAAOG,GACT,OACI,kBAACoM,EAAA,EAAD,CACI1E,IAAK1H,EACLoC,GAAI8Q,EAAerT,GAAOc,WAC1BkH,KAAMhI,EACNwM,QAAS6G,EAAerT,GAAOvD,SAC1DoG,SAAU8U,EACVlZ,QAAS,CAACsD,MAAOtD,EAAQgZ,uBACEhL,QACI,kBAACC,GAAA,EAAD,CACI1E,KAAMhI,EACN4G,UAAWnI,EAAQgZ,wBAG3B1V,MAAK,UAAK/B,EAAL,aAAeqT,EAAerT,GAAOgC,aAArC,UAKrB,iC,0CC1HdzC,GAAYb,aAAW,SAAAC,GAAK,MAAK,CACnC6R,KAAM,CACRnM,QAAS,QAEPoM,OAAQ,CACVpI,gBAAiB1J,EAAMQ,QAAQ+Q,WAAWQ,KAC1C1L,MAAOrG,EAAMQ,QAAQC,KAAKC,QACpBgH,WAAY1H,EAAMkS,YAAYC,OAAO,CAAC,SAAU,SAAU,CACtDC,OAAQpS,EAAMkS,YAAYE,OAAO+G,MACjCxR,SAAU3H,EAAMkS,YAAYvK,SAASyR,iBAG7CpH,YAAa,CACTnN,MAAM,eAAD,OAfO,IAeP,OACLoN,WAhBY,IAiBZvK,WAAY1H,EAAMkS,YAAYC,OAAO,CAAC,SAAU,SAAU,CACtDC,OAAQpS,EAAMkS,YAAYE,OAAOC,QACjC1K,SAAU3H,EAAMkS,YAAYvK,SAAS2K,kBAG7ClI,WAAY,CACR/D,MAAOrG,EAAMQ,QAAQC,KAAKC,QAC1B,UAAW,CACPgJ,gBAAiB,gBAGzB6I,KAAM,CACF7M,QAAS,QAEbwJ,OAAQ,CACJrK,MAhCY,IAiClBsK,WAAY,EACZzF,gBAAiB1J,EAAMQ,QAAQ+Q,WAAWC,QAC1CnL,MAAOrG,EAAMQ,QAAQC,KAAKC,SAExB0O,YAAa,CACfvK,MAtCkB,IAuClB6E,gBAAiB1J,EAAMQ,QAAQ+Q,WAAWC,SAExCnC,aAAa,aACT3J,QAAS,OACTkB,WAAY,SACZ6B,QAASzI,EAAMsK,QAAQ,EAAG,IACvBtK,EAAMsP,OAAOC,QAJR,CAKR7I,eAAgB,WAChBgD,gBAAiB1J,EAAMQ,QAAQ+Q,WAAWC,UAE9CsG,IAAK,CACD3X,QAAS,IAEb4X,SAAU,CACN5X,QAAS,GACT,UAAW,CACPA,QAAS,QAKRqS,GAAS,SAAAzT,GAAU,IAAD,EACHiG,oBAAS,GADN,mBACpBiL,EADoB,KACdoJ,EADc,OAEErU,mBAAS,MAFX,mBAEvB4F,EAFuB,KAEbC,EAFa,OAGM7F,oBAAS,GAHf,mBAKxBhF,GALwB,UAKhBa,eACRf,EAAUc,KACVsE,EAAUC,YAAcnF,EAAMoF,YAAYC,KAAK,OAU/CqN,EAAgB,SAACvO,GACqB0G,EAA1CD,EAAsD,KAA/BzG,EAAE4G,gBASlBuO,EAAmB,SAAAnV,GACsB0G,EAA1CD,EAAsD,KAA/BzG,EAAE4G,gBAG9B,OACI,yBAAK9C,UAAWnI,EAAQ+R,MACpB,kBAACc,GAAA,EAAD,CACIhN,SAAS,WACTsC,UAAW+B,YAAKlK,EAAQgS,OAAT,eACVhS,EAAQkS,YAAc/B,KAG3B,kBAACI,GAAA,EAAD,KACI,kBAAC1C,EAAA,EAAD,CACI3C,QAhCK,WACrBqO,GAAQ,IAgCQpR,UAAW+B,YACPlK,EAAQsK,WACR6F,GAAQnQ,EAAQyS,MAEpBM,eAAa,GAEb,kBAAC,KAAD,CAAU5K,UAAWnI,EAAQsK,cAE/ClF,EACE,oCACD,kBAACuI,EAAA,EAAD,CAASC,MAAM,iBACd,kBAACC,EAAA,EAAD,CACC/J,GAAG,iBACHoH,QAASsO,EACTrR,UAAWnI,EAAQsK,YAEnB,kBAAC,KAAD,QAGF,kBAAC2I,GAAA,EAAD,CACCnI,SAAUA,EACVqF,OAAMrF,GAAWoI,QAAwB,mBAAhBpI,EAAShH,IAClCqH,QAASqO,GAET,kBAAC,GAAD,eAAaA,iBAAkBA,GAAsBva,MAGrD,kBAAC,GAAgBA,GAGpB,0BAAMgE,MAAO,CAAEkP,WAAY,SAC1B,kBAACa,GAAA,EAAD,CAAQlP,GAAG,iBAAiBoH,QAAS0H,GAArC,WAGA,kBAACK,GAAA,EAAD,CACCnI,SAAUA,EACVqF,OAAMrF,GAAWoI,QAAwB,mBAAhBpI,EAAShH,IAClCqH,QAASyH,GAET,kBAACO,GAAA,EAAD,CAAUlQ,MAAO,CAAC2C,QAAS,OAAQe,cAAe,SAAUC,eAAgB,WAC3E,kBAAC,GAAD,MACA,kBAAC,GAAD,WAOI,kBAAC6S,GAAA,EAAD,CAAmBC,YArEH,SAAArV,GAChBA,EAAE4R,EAlFM,KAkFa5R,EAAE6R,EAAI,IAAM/F,GACjCoJ,GAAQ,KAoEJ,kBAACvJ,GAAA,EAAD,CACI7H,UAAWnI,EAAQoP,OACnBxL,QAAQ,aACRqM,OAAO,OACPE,KAAMA,EACNnQ,QAAS,CACLoQ,MAAOpQ,EAAQsP,cAGnB,yBACInH,UAAWnI,EAAQuP,cAEnB,kBAAC1B,EAAA,EAAD,CACItH,MAAM,UACNuM,KAAK,MACL5H,QA7FE,WACtBqO,GAAQ,IA6FYtW,MAAO,CACHsD,MAAOrG,EAAMQ,QAAQE,QAAQ6F,eAGjC,kBAAC,KAAD,QAGR,kBAAC2D,EAAA,EAAD,MACA,kBAAC,GAAcnL,OCzMtB1B,GAAc,CAC1BC,UAAW,OACXC,YAAa,KACbC,UAAU,EACVC,WAAW,EACXC,OAAQ,CACPE,KAAM,SACNC,OAAQ,SACRC,SAAU,gBACVC,KAAM,KACNC,QAAS,CACR,kBAGFC,OAAQ,CACPL,KAAM,SACNC,OAAQ,SACRC,SAAU,mBACVC,KAAM,oBACNC,QAAS,CACR,mBACA,QACA,oBACA,WAGFE,OAAQ,CACPN,KAAM,KACNC,OAAQ,KACRC,SAAU,KACVE,QAAS,CACR,OAGFG,OAAQ,CACPP,KAAM,cACNE,SAAU,SACVE,QAAS,CACR,SACA,WACA,aAGFI,OAAQ,CACPR,KAAM,KACNE,SAAU,KACVE,QAAS,CACR,QAMUyb,GAAc,CAC1B3T,WAAY,4BACZ4T,OAAQ,qBACRC,OAAQ,uBCvCIC,GAAkB,SAAC,GAAyB,IAAvBpV,EAAsB,EAAtBA,QAASC,EAAa,EAAbA,OAClCjF,EAAeC,qBAAWb,GAA1BY,WAD+C,EAGXwF,mBAAS,MAHE,mBAGhD0P,EAHgD,KAGhCuD,EAHgC,KAKjD4B,EAAmB1U,YAAc,2BAmBjCrF,EAjBYC,aAAW,SAACC,GAAD,MAAY,CACxCqI,UAAW,CACVI,QAAS,EACT5D,MAAO,OACPC,OAAQ,OACRY,QAAS,OACTe,cAAe,kBAAMoT,EACjB,MACA,UACJnT,eAAgB,UAEjB4B,KAAM,CACLzD,MAAO,OACPiV,UAAW,WAIGlZ,GAwCf,OANDiB,qBAAU,WACLrC,GACHyY,EAAkBzY,KAEhB,CAACA,IAGF,kBAAC4I,EAAA,EAAD,CAAMH,UAAWnI,EAAQuI,WAC3B,kBAAC,IAAD,CAAyB0R,MAAOC,KAC/B,kBAAC5R,EAAA,EAAD,CAAME,MAAI,EAACL,UAAWnI,EAAQwI,MAC7B,kBAAC,GAAD,CACCvF,MAAO,CAAC8B,MAAO,QACfxH,YAAaA,GACbqX,eAAgBA,EAChBuD,kBAAmBA,EACnBe,qBA/CyB,SAAC7U,GACvB8T,EAAkB,eACXvD,EADU,eAEZvQ,EAAEoK,OAAOlF,KAFG,eAGNqL,EAAevQ,EAAEoK,OAAOlF,MAHlB,CAITvL,SAAUqG,EAAEoK,OAAOV,cA2C9BoL,sBAtC6B,SAAC9U,GAC3B,IAAM8V,EAAgB,GACtBnR,OAAOC,KAAK2L,GAAgBxI,SAAQ,SAAC/I,EAAE3B,GACnCyY,EAAc9W,GAAd,eACOuR,EAAevR,GADtB,CAEIrF,UAAU,OAGlBma,EAAkBgC,IA+BrBf,wBA5B+B,SAAC/U,GAC7B,IAAM8V,EAAgB,GACtBnR,OAAOC,KAAK2L,GAAgBxI,SAAQ,SAAC/I,EAAE3B,GACnCyY,EAAc9W,GAAd,eACOuR,EAAevR,GADtB,CAEIrF,UAAU,OAGlBma,EAAkBgC,MAsBtB,kBAAC,GAAD,CACC5c,YAAaA,GACboc,YAAaA,GACb/E,eAAgBA,EAChBuD,kBAAmBA,EACnBzT,QAASA,EACTC,OAAQA,QCrGAD,GAAU,CACtBE,aAAkC,GAApBmM,OAAOC,WACrBnM,cAAoC,GAArBkM,OAAO0C,YACtB3O,OAAQ,CACPuB,IAAK,GACLqN,MAAO,GACPC,OAAQ,IACRzS,KAAM,KAIKyD,GAAS,CACrBI,MAAOL,GAAQE,aAAeF,GAAQI,OAAO5D,KAAOwD,GAAQI,OAAO4O,MACnE1O,OAAQN,GAAQG,cAAgBH,GAAQI,OAAOuB,IAAM3B,GAAQI,OAAO6O,Q,UCX/DyG,GACI,CACRtc,KAAM,QACN8C,QAAS,CACR4K,KAAM,UACN/E,aAAc,WAEfyI,UAAW,CACV1D,KAAM,WAEPiG,WAAY,CACXC,QAAS,OACTtB,MAAO,OACPiK,MAAO,OACPpI,KAAM,QAEPtR,KAAM,CACLC,QAAS,YAKN0Z,GACI,CACRxc,KAAM,OACN8C,QAAS,CACR4K,KAAM,WAEP0D,UAAW,CACV1D,KAAM,WAEPiG,WAAY,CACXC,QAAS,UACTtB,MAAO,UACPiK,MAAO,UACPpI,KAAM,WAEPtR,KAAM,CACLC,QAAS,SAKCV,GAAQqa,aAAe,CAChC7Q,WAAY,CACR2N,WAAY,CAAC,gBAAiB,YAAa,QAAS,cAAcnV,KAC9D,MAGRsY,UAAW,CACPC,aAAc,CACV1I,KAAM,CACdxL,MAAO,OACKM,SAAU,IACVpB,YAAa,QAMhBiV,GAAW,SAACxa,EAAO0Q,GAC/B,OAAIA,EACK2J,aAAe,eACnBra,EADkB,CAErBQ,QAAQ,eACJ4Z,OAIEC,aAAe,eAClBra,EADiB,CAEpBQ,QAAQ,eACJ0Z,QC1EMO,GAAS,CACrB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,W,oBCmGcC,OA5Hf,WAAgB,IAAD,EACyB1V,mBAAS,IADlC,mBACJD,EADI,KACQ4V,EADR,OAEyB3V,mBAAS,MAFlC,mBAEJxF,EAFI,KAEQob,EAFR,OAGkB5V,oBAAS,GAH3B,mBAGP0L,EAHO,KAGGC,EAHH,KA4FX,OAvFA9O,qBAAU,WAEN,IAAMuS,EAAarT,IAAa,YAC1BkZ,EAAgB,GAEtBnR,OAAOC,KAAKoK,GAAWjH,SAAQ,SAAC/I,EAAG3B,GAC/ByY,EAAc9W,GAAd,eACOgQ,EAAUhQ,GADjB,CAEIkT,SAAUlD,EAAUhQ,GAAGkT,SAASwE,WAAW,QACrC1H,EAAUhQ,GAAGkT,SACbjC,EAAWjB,EAAUhQ,GAAGkT,UAC9ByE,YAAa3H,EAAUhQ,GAAG2X,YAAYD,WAAW,QAC3C1H,EAAUhQ,GAAG2X,YACb1G,EAAWjB,EAAUhQ,GAAG2X,aAC9BzU,MAAOoU,GAAOjZ,QAItB,IAAMuZ,EAASha,MAEVmI,KAAI,SAAA9H,GAAC,OAAIA,EAAEC,SACX2Z,QAAQjW,GAEb+D,OAAOC,KAAKgS,GAAQ7O,SAAQ,SAAA1K,GACxB,IAAM2B,EAAI4X,EAAOvZ,GAAG0H,IAEd+R,EAAYF,EAAOvZ,GAAGD,OAAOE,OAAS,EACtCyZ,EAAkBH,EAAOvZ,GAAGD,OAAO0Z,GAAWxY,MAC9C0Y,EACDJ,EAAOvZ,GAAGD,OAAO0Z,GAAWxY,MAAQ0Q,EAAUhQ,GAAGiY,WAClD,IAEJnB,EAAc9W,GAAd,eACO8W,EAAc9W,GADrB,CAEI+X,gBAAiBA,EACjBC,uBAAwBA,OAGhCP,EAAcX,KACf,CAAClV,IAEJlD,qBAAU,WAENd,IAAOsa,KAAUvH,MAAK,SAAA9U,GAElB,IAAMoV,EAAarT,IAAa,YAEhC/B,EAAKkN,SAAQ,SAAA9K,GACTA,EAAE8S,KAAOE,EAAWhT,EAAE8S,MACtB9S,EAAEka,KAAOC,SAASna,EAAEka,MACpBla,EAAEqB,MAAQ8Y,SAASna,EAAEqB,OACrBrB,EAAEwB,OAAS2Y,SAASna,EAAEwB,WAO1B5D,EAAOA,EAAKkE,QACR,SAAA9B,GAAC,OACGA,EAAE8S,KAAO,IAAIsH,KAAK,KAAM,EAAG,KAC3B1S,OAAOC,KAAKoK,GAAW/Q,SAAShB,EAAEC,UAO1CyH,OAAOC,KAAKoK,GAAWjH,SAAQ,SAAA7K,GAC3B,IAAMoa,EAAYzc,EAAKkE,QAAO,SAAA9B,GAAC,OAAIA,EAAEC,QAAUA,KAC/Coa,EAAUvP,SAAQ,SAAA9K,GACdA,EAAEuT,eACGvT,EAAE8S,KAAOuH,EAAU,GAAGvH,MAAvB,MAEA,EACJ9S,EAAEmB,iBACGnB,EAAEqB,MAAQ0Q,EAAU9R,GAAO+Z,WAAc,IAC9Cha,EAAEuB,kBACGvB,EAAEwB,OAASuQ,EAAU9R,GAAO+Z,WAAc,IAC/Cha,EAAEsa,cAAiBta,EAAEwB,OAASxB,EAAEqB,MAAS,UAGjDkY,EAAc3b,GACd2c,QAAQC,IAAI,yBAEpB,IAGI,oCACL,kBAACpL,GAAawD,SAAd,CAAuBnQ,MAAO,CAAE6M,WAAUC,gBACjC,kBAACkL,GAAA,EAAD,CAAe7b,MAAOwa,GAASxa,GAAO0Q,IAClC,kBAACoL,GAAA,EAAD,MACA,kBAAC,IAAD,CAAyB/B,MAAOC,KAC5B,kBAACvb,EAAYuV,SAAb,CAAsBnQ,MAAO,CAAEkB,aAAY4V,kBACvC,kBAAC/b,EAAcoV,SAAf,CACInQ,MAAO,CAAErE,aAAYob,kBAE1C,kBAAC,IAAD,CACCmB,KAAK,YACL9T,UAAU,WACV0E,UAAW,kBAAM,kBAAC,GAAD,CAAiBnI,QAASA,GAASC,OAAQA,QAE7D,kBAAC,IAAD,CACCsX,KAAK,iBACL9T,UAAU,gBACV+T,OAAQ,kBAAM,kBAAC,GAAD,SAEf,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAUC,OAAK,EAACC,KAAK,IAAIC,GAAG,2BC/HhBnJ,QACW,cAA7BnC,OAAOI,SAASmL,UAEe,UAA7BvL,OAAOI,SAASmL,UAEhBvL,OAAOI,SAASmL,SAASC,MACvB,2D,aCZNC,IAASN,OACL,kBAAC,KAAD,KACI,kBAAC,GAAD,OAEJ3K,SAASkL,eAAe,SDyHtB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrB5I,MAAK,SAAA6I,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLnB,QAAQmB,MAAMA,EAAMC,c","file":"static/js/main.99251ca9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/us-states.0e8dcbdb.csv\";","export const chartParams = {\r\n\tchartType: \"bubble\",\r\n\ttoTimestamp: null,\r\n\tmultiple: true,\r\n\tnormalize: true,\r\n\txParam: { // x-axis\r\n\t\toutput: 'x-axis',\r\n\t\ttype: 'linear',\r\n\t\tformat: 'none',\r\n\t\tselected: 'casesPerThousand',\r\n\t\talt1: 'cases',\r\n\t\toptions: [\r\n\t\t\t\"casesPerThousand\",\r\n\t\t\t\"cases\",\r\n\t\t\t\"deathsPerThousand\",\r\n\t\t\t\"deaths\"\r\n\t\t]\r\n\t},\r\n\tyParam: { // y-axis\r\n\t\toutput: 'y-axis',\r\n\t\ttype: 'linear',\r\n\t\tformat: 'none',\r\n\t\tselected: 'deathsPerThousand',\r\n\t\talt1: 'deaths',\r\n\t\toptions: [ \r\n\t\t\t\"casesPerThousand\",\r\n\t\t\t\"cases\",\r\n\t\t\t\"deathsPerThousand\",\r\n\t\t\t\"deaths\"\r\n\t\t], \r\n\t},\r\n\tzParam: {// z-axis (3rd dimension) (eg. size)\r\n\t\toutput: 'circle-area',\r\n\t\ttype: \"linear\",\r\n\t\tformat: \"none\",\r\n\t\tselected: \"population\",\r\n\t\toptions: [ \r\n\t\t\t\"population\",\r\n\t\t\t\"populationDensity\",\r\n\t\t\t\"gdp\",\r\n\t\t\t\"none\"\r\n\t\t]\r\n\t},\r\n\tcParam: { // color axis (categorical/ordinal data) (eg. gender, birthplace, etc.)\r\n\t\toutput: 'color-grouping',\r\n\t\ttype: \"categorical\",\r\n\t\tselected: \"region\",\r\n\t\toptions: [ \r\n\t\t\t\"region\",\r\n\t\t\t\"division\",\r\n\t\t\t\"governor\"\r\n\t\t],\r\n\t},\r\n\ttParam: { // time axis (4th dimension) (ie. for animated charts)\r\n\t\toutput: 'time',\r\n\t\ttype: 'time',\r\n\t\tselected: \"dayOfOutbreak\",\r\n\t\toptions: [\r\n\t\t\t\"dayOfOutbreak\",\r\n\t\t\t\"date\"\r\n\t\t]\r\n\t},\r\n};\r\n\r\n// Label params:\r\nexport const labelParams = {\r\n\tchartTitle: \"COVID-19 State Comparison\",\r\n\txLabel: \"Cases per Thousand\",\r\n\tyLabel: \"Deaths per Thousand\"\r\n};\r\n\r\n// color param categories\r\nexport const cParamCategories = {\r\n    region: [\"Northeast\", \"Midwest\", \"South\", \"West\"],\r\n    division: [\r\n        \"New England\",\r\n        \"Mid-Atlantic\",\r\n        \"East North Central\",\r\n        \"West North Central\",\r\n        \"South Atlantic\",\r\n        \"East South Central\",\r\n        \"West South Central\",\r\n        \"Mountain\",\r\n        \"Pacific\",\r\n    ],\r\n    governor: [\"Republican\", \"Democrat\", \"n/a\"],\r\n};\r\n\r\n","import React from 'react';\r\n\r\nconst dataContext = React.createContext();\r\n\r\nexport { dataContext };","import React from 'react';\r\n\r\nconst statesContext = React.createContext();\r\n\r\nexport { statesContext };","import React from 'react';\r\n\r\nexport const selectionContext = React.createContext();\r\n","import React, { useEffect, useContext, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\n// context\r\nimport { statesContext } from '../../../context/statesContext';\r\nimport { selectionContext } from '../../../context/selectionContext';\r\n\r\n// style \r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\n\r\nexport const CirclesGapminder = (props) => {\r\n\tconst { data, dayCounter, selector, scales, opacityNotSel } = props;\r\n\tconst { xParam, yParam, zParam, cParam } = selector;\r\n\tconst { xScale, yScale, colorScale } = scales;\r\n\r\n\t// context and ref\r\n\tconst { infoStates } = useContext(statesContext);\r\n\tconst { selectedCircles, setSelectedCircles } = useContext(selectionContext); \r\n\tconst circlesRef = useRef(null);\r\n\r\n\t// styles\r\n\tconst useStyles = makeStyles((theme) => ({\r\n\t\tcircle: {\r\n\t\t\tstroke: 'none',\r\n\t\t\topacity: opacityNotSel\r\n\t\t},\r\n\t\tcircleSelected: {\r\n\t\t\tstroke: \"#e91e63\",\r\n\t\t\tstrokeWidth: 2,\r\n\t\t\topacity: .8,\r\n\t\t},\r\n\t\tcircleLabel: {\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontSize: \".6rem\",\r\n\t\t},\r\n\t}));\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\r\n\tconst bisectDay = d3.bisector(([d]) => d).left;\r\n\r\n\tfunction dataAt(day) {\r\n\t\treturn data.map(d => ({\r\n\t\t\tstate: d.state,\r\n\t\t\tregion: d.region,\r\n\t\t\t[xParam.selected]: valueAt(d[xParam.selected], day),\r\n\t\t\t[yParam.selected]: valueAt(d[yParam.selected], day)\r\n\t\t}));\r\n\t};\r\n\r\n\tfunction valueAt(values, day) {\r\n\t\tconst i = bisectDay(values, day, 0, values.length - 1);\r\n\t\tconst a = values[i];\r\n\r\n\t\tif (i > 0) {\r\n\t\t\tconst b = values[i - 1];\r\n\t\t\tconst t = (day - a[0]) / (b[0] - a[0]);\r\n\t\t\treturn a[1] * (1 - t) + b[1] * t;\r\n\t\t}\r\n\t\treturn a[1];\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (data) {\r\n\t\t\tconst circle = d3.select(circlesRef.current).selectAll('circle')\r\n\t\t\t.data(dataAt(dayCounter), d => d)\r\n\t\t\t.join('circle')\r\n\t\t\t\t// .sort((a,b) => d3.descending(a[zParam.selected], b[zParam.selected]))\r\n\t\t\t\t.sort((a,b) => d3.descending(infoStates[a.state][zParam.selected], infoStates[b.state][zParam.selected]))\r\n\t\t\t\t.attr('r', d => zParam.selected === \"population\" \r\n\t\t\t\t\t? infoStates[d.state][zParam.selected] / 1000000 \r\n\t\t\t\t\t: zParam.selected === \"populationDensity\"\r\n\t\t\t\t\t? infoStates[d.state][zParam.selected] / 100\r\n\t\t\t\t\t: zParam.selected === \"gdp\"\r\n\t\t\t\t\t? infoStates[d.state][zParam.selected] / 100000\r\n\t\t\t\t\t: 5\r\n\t\t\t\t)\r\n\t\t\t\t.attr('cx', d => xScale(d[xParam.selected]))\r\n\t\t\t\t.attr('cy', d => yScale(d[yParam.selected]))\r\n\t\t\t\t.attr('fill', d => colorScale(infoStates[d.state][cParam.selected]))\r\n\t\t\t\t.attr('id', d => `circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\t.attr('class', d =>\r\n\t\t\t\t\tselectedCircles.selected.includes(d.state) \r\n\t\t\t\t\t\t? classes.circleSelected\r\n\t\t\t\t\t\t: classes.circle\r\n\t\t\t\t)\r\n\t\t\t\t.call(circle => circle\r\n\t\t\t\t\t.append('title')\r\n\t\t\t\t\t.text(d => [\r\n\t\t\t\t\t\td.state,\r\n\t\t\t\t\t\t`Day ${dayCounter}`,\r\n\t\t\t\t\t\txParam.selected === \"casesPerThousand\"\r\n\t\t\t\t\t\t\t? `Cases/1000: ${d.casesPerThousand && d.casesPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: xParam.selected === \"cases\"\r\n\t\t\t\t\t\t\t? `Cases: ${d.cases && d.cases.toLocaleString()}`\r\n\t\t\t\t\t\t\t: xParam.selected === \"deathsPerThousand\"\r\n\t\t\t\t\t\t\t? `Deaths/1000: ${d.deathsPerThousand && d.deathsPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: xParam.selected === \"deaths\"\r\n\t\t\t\t\t\t\t? `Deaths: ${d.deaths && d.deaths.toLocaleString()}`\r\n\t\t\t\t\t\t\t: \"error\",\r\n\t\t\t\t\t\tyParam.selected === \"casesPerThousand\" \r\n\t\t\t\t\t\t\t? `Cases/1000: ${d.casesPerThousand && d.casesPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: yParam.selected === \"cases\"\r\n\t\t\t\t\t\t\t? `Cases: ${d.cases && d.cases.toLocaleString()}`\r\n\t\t\t\t\t\t\t: yParam.selected === \"deathsPerThousand\"\r\n\t\t\t\t\t\t\t? `Deaths/1000: ${d.deathsPerThousand && d.deathsPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: yParam.selected === \"deaths\"\r\n\t\t\t\t\t\t\t? `Deaths: ${d.deaths && d.deaths.toLocaleString()}`\r\n\t\t\t\t\t\t\t: \"error\"\r\n\t\t\t\t\t\t].join(\"\\n\")\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\r\n\t\t\tcircle.on('mouseover', d => {\r\n\t\t\t\tconst mouseOverCircle = d3.select(`#circle-${infoStates[d.state].htmlFormat}`)\t\t\t\r\n\t\t\t\tif (opacityNotSel !== 0 || selectedCircles.selected.includes(d.state)) {\r\n\t\t\t\t\tmouseOverCircle\r\n\t\t\t\t\t\t.attr('cursor', 'pointer')\r\n\t\t\t\t\t\t.style(\"opacity\", .9)\r\n\t\t\t\t\t\t.style(\"stroke\", \"#e91e63\")\r\n\t\t\t\t\t\t.style(\"stroke-width\", 2)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcircle.on('mouseout', d => { \r\n\t\t\t\tconst mouseOutCircle = d3.select(`#circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\tif (selectedCircles.notSelected.includes(d.state)) {\r\n\t\t\t\t\tmouseOutCircle\r\n\t\t\t\t\t\t.style(\"opacity\", opacityNotSel)\r\n\t\t\t\t\t\t.style(\"stroke\", \"none\")\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcircle.on('click', d => { \r\n\t\t\t\tif (selectedCircles.selected.includes(d.state)) {\r\n\t\t\t\t\tsetSelectedCircles({\r\n\t\t\t\t\t\t...selectedCircles,\r\n\t\t\t\t\t\tselected: selectedCircles.selected.filter(s => s !== d.state),\r\n\t\t\t\t\t\tnotSelected: [...selectedCircles.notSelected, d.state]\r\n\t\t\t\t\t})\r\n\t\t\t\t\td3.select(`#circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\t\t\t.style(\"opacity\", opacityNotSel)\r\n\t\t\t\t\t\t.style(\"stroke\", \"none\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetSelectedCircles({\r\n\t\t\t\t\t\t...selectedCircles,\r\n\t\t\t\t\t\tselected: [...selectedCircles.selected, d.state],\r\n\t\t\t\t\t\tnotSelected: selectedCircles.notSelected.filter(s => s !== d.state)\r\n\t\t\t\t\t})\r\n\t\t\t\t\td3.select(`#circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\t\t\t.style(\"opacity\", .9)\r\n\t\t\t\t\t\t.style(\"stroke\", \"#e91e63\")\r\n\t\t\t\t\t\t.style(\"stroke-width\", 2)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\td3.select(circlesRef.current).selectAll(\"text\")\r\n\t\t\t\t.data(dataAt(dayCounter), d => d)\r\n\t\t\t\t.join(\"text\")\r\n\t\t\t\t\t.call(label => {\r\n\t\t\t\t\t\tconst length = d => {\r\n\t\t\t\t\t\t\tif (zParam.selected === \"population\") {\r\n\t\t\t\t\t\t\t\treturn infoStates[d.state][zParam.selected] / 1000000\r\n\t\t\t\t\t\t\t} else if (zParam.selected === \"populationDensity\") {\r\n\t\t\t\t\t\t\t\treturn infoStates[d.state][zParam.selected] / 100\r\n\t\t\t\t\t\t\t} else if (zParam.selected === \"gdp\") {\r\n\t\t\t\t\t\t\t\treturn infoStates[d.state][zParam.selected] / 100000\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn 4 \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tlabel\r\n\t\t\t\t\t\t\t.attr(\"x\", d => xScale(d[xParam.selected]) + length(d))\r\n\t\t\t\t\t\t\t.attr(\"y\", d => yScale(d[yParam.selected]) - length(d))\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.attr(\"opacity\", d => selectedCircles.selected.includes(d.state)\r\n\t\t\t\t\t\t? .8\r\n\t\t\t\t\t\t: 0)\r\n\t\t\t\t\t.attr(\"class\", classes.circleLabel)\r\n\t\t\t\t\t.attr('cursor', 'context-menu')\r\n\t\t\t\t\t.text(d => infoStates[d.state].abbreviation);\r\n\t\t};\r\n\t}, [dayCounter, selector, scales, selectedCircles, opacityNotSel, theme]);\r\n\r\n\treturn (\r\n\t\t<>\t\t\r\n\t\t\t<g ref={circlesRef} />\r\n\t\t</>\r\n\t)\r\n};","import React from 'react';\r\nimport { Slider, Typography } from \"@material-ui/core\";\r\n\r\nexport const OpacitySlider = (props) => {\r\n\tconst { opacityNotSel, setOpacityNotSel } = props;\r\n\r\n\treturn (\r\n\t\t<>\t\r\n\t\t\t<Typography variant=\"caption\">Non-selected opacity</Typography>\r\n\t\t\t<Slider \r\n\t\t\t\tid=\"opacity-slider\"\r\n\t\t\t\tvalue={opacityNotSel}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tstep={.1}\r\n\t\t\t\tmin={0}\r\n\t\t\t\tmax={1}\r\n\t\t\t\tonChange={(e, newVal) => setOpacityNotSel(newVal)}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n};\r\n\r\n","import React from 'react';\r\nimport { Slider, Typography } from \"@material-ui/core\";\r\n\r\nexport const DayCounterSlider = (props) => {\r\n\tconst { dayCounter, setDayCounter } = props;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Typography variant=\"caption\">Day of Outbreak</Typography>\r\n\t\t\t<Slider \r\n\t\t\t\tid=\"day-counter-slider\"\r\n\t\t\t\tvalue={dayCounter}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tstep={1}\r\n\t\t\t\tmin={1}\r\n\t\t\t\tmax={70}\r\n\t\t\t\tonChange={(e, newVal) => setDayCounter(newVal)}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n};\r\n\r\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\n// context\r\nimport { dataContext } from \"../../../context/dataContext\";\r\n\r\n// components\r\nimport { CirclesGapminder } from \"./CirclesGapminder\";\r\nimport { OpacitySlider } from \"../interface/OpacitySlider\";\r\nimport { DayCounterSlider } from \"../interface/DayCounterSlider\";\r\n\r\n// style\r\nimport { Grid, Box, useMediaQuery } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nexport const ChartGapminder = props => {\r\n\tconst { cParamCategories, data, selector, wrapper, bounds } = props;\r\n    const { xParam, yParam, cParam } = selector;\r\n    const { wrapperWidth, wrapperHeight, margin } = wrapper;\r\n    const { width, height } = bounds;\r\n\r\n    const { dataStates } = useContext(dataContext);\r\n    const [scales, setScales] = useState(null);\r\n    const [dayCounter, setDayCounter] = useState(1);\r\n    const [opacityNotSel, setOpacityNotSel] = useState(0.6);\r\n\r\n    const theme = useTheme();\r\n    const mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n    const useStyles = makeStyles(theme => ({\r\n\t\tbodyWrapper: {\r\n\t\t\tpaddingLeft: 0,\r\n\t\t\t[theme.breakpoints.up(\"md\")]: {\r\n\t\t\t\tpaddingLeft: 260\r\n\t\t\t}\r\n\t\t},\r\n        rootSVG: {\r\n            display: \"inline-block\",\r\n            position: \"relative\",\r\n            width: \"100%\",\r\n            verticalAlign: \"middle\",\r\n            overflow: \"hidden\",\r\n\t\t},\r\n\t\tchartTitle: {\r\n\t\t\ttextAnchor: \"middle\",\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontWeight: 700,\r\n\t\t\tfontSize: \"1rem\",\r\n\t\t}, \r\n\t\tchartSubtitle: {\r\n\t\t\ttextAnchor: \"middle\",\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontSize: \".6rem\",\r\n\t\t},\r\n        chartWrapper: {\r\n            display: \"inline-block\",\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n        },\r\n        bounds: {\r\n            width: width,\r\n            height: height,\r\n        },\r\n        axes: {\r\n            color: theme.palette.text.primary,\r\n        },\r\n        legend: {\r\n            color: theme.palette.primary.contrastText,\r\n            fontWeight: 700,\r\n            fontSize: \".8rem\",\r\n        },\r\n        sliderContainer: {\r\n            flexDirection: () => (mqSmall ? \"column\" : \"row\"),\r\n            justifyContent: () => (mqSmall ? \"center\" : \"space-between\"),\r\n            maxWidth: width,\r\n            margin: \"0 auto\",\r\n            alignItems: \"center\",\r\n        },\r\n        slider: {\r\n            width: () => (mqSmall ? \"95%\" : \"45%\"),\r\n        },\r\n    }));\r\n\r\n    const classes = useStyles();\r\n\r\n\tconst svgRef = useRef(null);\r\n    const boundsRef = useRef(null);\r\n    const yAxisRef = useRef(null);\r\n    const xAxisRef = useRef(null);\r\n    const legendRef = useRef(null);\r\n\r\n    const renderChart = () => {\r\n        const xScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d[xParam.selected]))\r\n            .range([0, width]);\r\n        const yScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d[yParam.selected]))\r\n            .range([height, 0]);\r\n        let colorScale;\r\n\r\n        if (cParam.selected === \"region\") {\r\n            colorScale = d3\r\n                .scaleOrdinal()\r\n                .domain(cParamCategories.region)\r\n                .range(d3.schemePaired);\r\n        } else if (cParam.selected === \"division\") {\r\n            colorScale = d3\r\n                .scaleOrdinal()\r\n                .domain(cParamCategories.division)\r\n                .range(d3.schemePaired);\r\n        } else if (cParam.selected === \"governor\") {\r\n            colorScale = d3\r\n                .scaleOrdinal()\r\n                .domain(cParamCategories.governor)\r\n                .range([\"#B61515\", \"#2E84D5\", \"#009C72\"]);\r\n        }\r\n\r\n        setScales({\r\n            xScale: xScale,\r\n            yScale: yScale,\r\n            colorScale: colorScale,\r\n        });\r\n\r\n        // Axes\r\n        const yAxisGenerator = d3.axisLeft().scale(yScale);\r\n        const xAxisGenerator = d3.axisBottom().scale(xScale);\r\n\r\n        const xAxis = d3\r\n            .select(xAxisRef.current)\r\n            .call(xAxisGenerator)\r\n            .call(axis => {\r\n                axis.append(\"text\").attr(\"class\", \"xLabel\");\r\n                axis.append(\"text\").attr(\"class\", \"counter-display\");\r\n            });\r\n\r\n        xAxis\r\n            .selectAll(\".xLabel\")\r\n            .data(xParam.selected, d => d)\r\n            .join(\"text\")\r\n            .attr(\"x\", width)\r\n            .attr(\"y\", 40)\r\n            .attr(\"text-anchor\", \"end\")\r\n            .attr(\"class\", \"xLabel\")\r\n            .attr(\"fill\", theme.palette.text.primary)\r\n            .text(xParam.selected);\r\n\r\n        const yAxis = d3\r\n            .select(yAxisRef.current)\r\n            .call(yAxisGenerator)\r\n            .call(axis => axis.append(\"text\").attr(\"class\", \"yLabel\"));\r\n\r\n        yAxis\r\n            .selectAll(\".yLabel\")\r\n            .data(yParam.selected, d => d)\r\n            .join(\"text\")\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", -40)\r\n            .attr(\"text-anchor\", \"end\")\r\n            .attr(\"transform\", \"rotate(-90)\")\r\n            .attr(\"class\", \"yLabel\")\r\n            .attr(\"fill\", theme.palette.text.primary)\r\n\t\t\t.text(yParam.selected);\r\n\r\n        // legend\r\n        d3.select(legendRef.current)\r\n            .selectAll(\"text\")\r\n            .data(cParamCategories[cParam.selected], d => d)\r\n            .join(\r\n                enter =>\r\n                    enter\r\n                        .append(\"text\")\r\n                        .attr(\"x\", \"1rem\")\r\n                        .attr(\"y\", -1000)\r\n                        .attr(\"fill\", d => colorScale(d))\r\n                        .attr(\"text-anchor\", \"start\")\r\n                        .text(d => d)\r\n                        .call(enter =>\r\n                            enter\r\n                                .transition()\r\n                                .duration(750)\r\n                                .attr(\"y\", (d, i) => -height + 10 + 20 * i)\r\n                        ),\r\n                update =>\r\n                    update\r\n                        .append(\"text\")\r\n                        .attr(\"fill\", d => colorScale(d))\r\n                        .attr(\"text-anchor\", \"start\")\r\n                        .attr(\"y\", 60)\r\n                        .text(d => d)\r\n                        .call(update => update.transition().duration(750)),\r\n                exit =>\r\n                    exit\r\n                        .attr(\"fill\", \"gray\")\r\n                        .attr(\"text-anchor\", \"start\")\r\n                        .text(d => d)\r\n                        .call(exit =>\r\n                            exit\r\n                                .transition()\r\n                                .duration(750)\r\n                                .attr(\"y\", 0)\r\n                                .remove()\r\n                        )\r\n            );\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (dataStates) {\r\n            renderChart();\r\n        }\r\n    }, [dataStates, selector, theme]);\r\n\r\n    useEffect(() => {\r\n        d3.select(boundsRef.current)\r\n            .selectAll(\".counter-display\")\r\n            .join(\"text\")\r\n            .attr(\"text-anchor\", \"end\")\r\n            .attr(\"x\", width)\r\n            .attr(\"y\", -40)\r\n            .attr(\"class\", \"counter-display\")\r\n            .style(\"fill\", theme.palette.text.primary)\r\n            .text(`Day ${dayCounter}`);\r\n    }, [dayCounter, theme]);\r\n\r\n    return (\r\n        <Box className={classes.bodyWrapper}>\r\n            <div>\r\n                <svg\r\n\t\t\t\t\tref={svgRef}\r\n                    id=\"gapminder-app\"\r\n                    height={wrapperHeight}\r\n                    width={wrapperWidth}\r\n                    className={classes.rootSVG}\r\n                    viewBox={`0 0 ${wrapperWidth} ${wrapperHeight}`}\r\n                >\r\n                    <g\r\n                        ref={boundsRef}\r\n                        className={classes.bounds}\r\n                        transform={`translate(${margin.left}, ${margin.top})`}\r\n                    >\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\ttransform={`translate(${width / 2})`}\r\n\t\t\t\t\t\t\tclassName={classes.chartTitle}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tCOVID-19 in the United States\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\ttransform={`translate(${width / 2}, 24)`}\r\n\t\t\t\t\t\t\tclassName={classes.chartTitle}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tOutbreak Days 1 - 70\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\ttransform={`translate(${width / 2}, 44)`}\r\n\t\t\t\t\t\t\tclassName={classes.chartSubtitle}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t*data from the New York Times\r\n\t\t\t\t\t\t</text>\r\n                        <g\r\n                            ref={xAxisRef}\r\n                            transform={`translate(0, ${height})`}\r\n                            className={classes.axes}\r\n                        />\r\n                        <g ref={yAxisRef} className={classes.axes} />\r\n                        <g\r\n                            ref={legendRef}\r\n                            transform={`translate(0, ${height})`}\r\n                            className={classes.legend}\r\n                        />\r\n                        {data && scales ? (\r\n                            <CirclesGapminder\r\n                                {...props}\r\n                                scales={scales}\r\n                                dayCounter={dayCounter}\r\n                                opacityNotSel={opacityNotSel}\r\n                            />\r\n                        ) : (\r\n                            <></>\r\n                        )}\r\n                    </g>\r\n                </svg>\r\n            </div>\r\n            <Grid container className={classes.sliderContainer}>\r\n                <Grid item className={classes.slider}>\r\n                    <DayCounterSlider\r\n                        dayCounter={dayCounter}\r\n                        setDayCounter={setDayCounter}\r\n                    />\r\n                </Grid>\r\n                <Grid item className={classes.slider}>\r\n                    <OpacitySlider\r\n                        opacityNotSel={opacityNotSel}\r\n                        setOpacityNotSel={setOpacityNotSel}\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n        </Box>\r\n    );\r\n};\r\n\r\nChartGapminder.propTypes = {\r\n\tcParamCategories: PropTypes.object,\r\n\tdata: PropTypes.arrayOf(PropTypes.object),\r\n\tselector: PropTypes.object,\r\n\twrapper: PropTypes.object,\r\n\tbounds: PropTypes.object,\r\n};","import React from \"react\";\r\n\r\n// style\r\nimport { FormControl, InputLabel, Select, MenuItem, Grid, useMediaQuery } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\trootContainer: {\r\n\t\tmaxWidth: 750,\r\n\t\tminWidth: 175,\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\tpadding: 0,\r\n\t\tmargin: 0,\r\n\t},\r\n\tfilterSelector: {\r\n        minWidth: 150,\r\n        fontWeight: 500,\r\n\t\tfontSize: \".8rem\",\r\n\t\tcolor: theme.palette.text.primary\r\n    },\r\n    filterMenuItem: {\r\n        color: theme.palette.text.primary,\r\n        fontWeight: 500,\r\n        fontSize: \".8rem\",\r\n    },\r\n}));\r\n\r\nexport const ParamPicker = (props) => {\r\n\tconst { flexDirection, selector, handleSelector } = props;\r\n\tconst classes = useStyles();\r\n\r\n    return (\r\n\t\t<Grid container className={classes.rootContainer} style=\r\n\t\t\t{flexDirection === \"row\"  \r\n\t\t\t\t? { flexDirection: \"row\", justifyContent: \"space-evenly\" }\r\n\t\t\t\t: { flexDirection: \"column\" }\r\n\t\t\t}\r\n\t\t>\r\n            {Object.keys(selector).map((p) => {\r\n                return (\r\n                    <FormControl key={selector[p].output}>\r\n                        <InputLabel>{selector[p].output}</InputLabel>\r\n                        <Select\r\n                            name={p}\r\n                            value={selector[p].selected}\r\n                            onChange={handleSelector}\r\n                            className={classes.filterSelector}\r\n                        >\r\n                            {selector[p].options.map((o) => {\r\n                                return (\r\n                                    <MenuItem\r\n                                        key={o}\r\n                                        value={o}\r\n                                        className={classes.filterMenuItem}\r\n                                    >\r\n                                        {o}\r\n                                    </MenuItem>\r\n                                );\r\n                            })}\r\n                        </Select>\r\n                    </FormControl>\r\n                );\r\n            })}\r\n        </Grid>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport clsx from \"clsx\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n// styles\r\nimport { Typography, Divider } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ttypography: {\r\n\t\tcolor: theme.palette.text.primary,\r\n\t\tfontWeight: 700,\r\n\t\tfontSize: \"1.2rem\" \r\n\t},\r\n\tdivider: {\r\n\t\tbackgroundColor: theme.palette.text.primary,\r\n\t\tmarginBottom: \".2rem\",\r\n\t},\r\n}));\r\n\r\nexport const SectionTitle = (props) => {\r\n\tconst { divider, href, classes, innerProps } = props;\r\n\tconst defaultClasses = useStyles();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Typography \r\n\t\t\t\tclassName={clsx(defaultClasses.typography, classes.typography)}\r\n\t\t\t\t{...innerProps.typography}\t\r\n\t\t\t>\r\n\t\t\t\t{props.children}\r\n\t\t\t</Typography>\r\n\t\t\t{divider\t\r\n\t\t\t\t&& <Divider \r\n\t\t\t\t\t\tclassName={clsx(defaultClasses.divider, classes.divider)}\r\n\t\t\t\t\t\t{...innerProps.divider} />\r\n\t\t\t}\r\n\t\t</>\r\n\t)\r\n};\r\n\r\nSectionTitle.propTypes = {\r\n\tclasses: PropTypes.object,\r\n\tinnerProps: PropTypes.object,\r\n};\r\n\r\nSectionTitle.defaultProps = {\r\n\tclasses: {},\r\n\tinnerProps: {},\r\n};","import React from \"react\";\r\n\r\n// components\r\nimport { ParamPicker } from \"../pickers/ParamPicker\";\r\nimport { SectionTitle } from \"../../sharedComponents/SectionTitle\";\r\n\r\n// style\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    menuButton: {\r\n        color: theme.palette.primary.contrastText,\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n\t},\r\n\tfilterBody: {\r\n\t\tpaddingLeft: theme.spacing(3),\r\n\t\tmarginBottom: theme.spacing(4)\r\n\t},\r\n}));\r\n\r\nexport const ParamDashboard = props => {\r\n    const {\r\n\t\tflexDirection,\r\n        data,\r\n        selector,\r\n        handleSelector,\r\n    } = props;\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n\t\t\t<SectionTitle divider>\r\n\t\t\t\tParameters\r\n\t\t\t</SectionTitle>\r\n\t\t\t<div className={classes.filterBody}>\r\n\t\t\t\t<ParamPicker\r\n\t\t\t\t\tflexDirection={flexDirection}\r\n\t\t\t\t\tdata={data}\r\n\t\t\t\t\tselector={selector}\r\n\t\t\t\t\thandleSelector={handleSelector}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n        </>\r\n    );\r\n};","import React, { useState, useContext, forwardRef } from \"react\";\r\n\r\n// context\r\nimport { statesContext } from \"../../../../context/statesContext\";\r\n\r\n// style\r\nimport { Menu, MenuItem, FormControl, InputLabel, Select } from \"@material-ui/core\";\r\n\r\nconst regionOptions = [\r\n    { id: \"northeast\", name: \"Northeast\", type: \"Region\", chartParam: \"region\" },\r\n    { id: \"midwest\", name: \"Midwest\", type: \"Region\", chartParam: \"region\" },\r\n    { id: \"south\", name: \"South\", type: \"Region\", chartParam: \"region\" },\r\n    { id: \"west\", name: \"West\", type: \"Region\", chartParam: \"region\" },\r\n];\r\n\r\nexport const Filter = forwardRef((props, ref) => {\r\n    const { handleFilter, filterData } = props;\r\n\r\n    const { infoStates } = useContext(statesContext);\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n    const handleMenu = e => {\r\n        !anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n\t\t<>\r\n\t\t\t{infoStates &&\r\n\t\t\t\tfilterData.map(d => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\tkey={d.id}\r\n\t\t\t\t\t\t\tid={d.id}\r\n\t\t\t\t\t\t\tonClick={() => handleFilter(d)}\r\n\t\t\t\t\t\t\tonClose={handleMenu}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{d.name}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</>\r\n    );\r\n});\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\n// context\r\nimport { selectionContext } from \"../../../context/selectionContext\";\r\nimport { statesContext } from \"../../../context/statesContext\";\r\n\r\n// components\r\nimport { Filter } from \"../sharedComponents/pickers/Filter\";\r\n\r\n// style\r\nimport { Chip, FormControl, InputLabel, Select, Box } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    button: {\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n\t},\r\n\tfilterSelector: {\r\n        minWidth: 150,\r\n        fontWeight: 500,\r\n        fontSize: \".8rem\",\r\n    },\r\n    chipContainer: {\r\n        listStyle: \"none\",\r\n\t\tbackgroundColor: \"transparent\",\r\n\t\tpadding: 0\r\n    },\r\n    chip: {\r\n\t\tcolor: theme.palette.primary.main,\r\n        backgroundColor: theme.palette.primary.contrastText,\r\n        padding: theme.spacing(0.5),\r\n        margin: theme.spacing(0.5),\r\n        fontSize: \".7rem\",\r\n    },\r\n}));\r\n\r\nexport const FilterBatch = props => {\r\n    const {\r\n        filters,\r\n        handleDeleteFilter,\r\n        handleFilter,\r\n\t\tnStates,\r\n\t\thandleSelector\r\n    } = props;\r\n    const { setSelectedCircles } = useContext(\r\n        selectionContext\r\n    );\r\n    const { infoStates } = useContext(statesContext);\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n\tconst classes = useStyles();\r\n\t\r\n    const handleFilterCategories = newFilter => {\r\n        const filtered = Object.keys(infoStates).filter(\r\n            s => infoStates[s][newFilter.chartParam] === newFilter.name\r\n\t\t);\r\n\r\n        setAnchorEl(null);\r\n        return filtered;\r\n\t};\r\n\t\r\n\tconst filterParams = [\r\n\t\t{\r\n\t\t\tcategory: \"Region\",\r\n\t\t\tparams: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"northeast\",\r\n\t\t\t\t\tname: \"Northeast\",\r\n\t\t\t\t\ttype: \"Region\",\r\n\t\t\t\t\tchartParam: \"region\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"midwest\",\r\n\t\t\t\t\tname: \"Midwest\",\r\n\t\t\t\t\ttype: \"Region\",\r\n\t\t\t\t\tchartParam: \"region\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"south\",\r\n\t\t\t\t\tname: \"South\",\r\n\t\t\t\t\ttype: \"Region\",\r\n\t\t\t\t\tchartParam: \"region\",\r\n\t\t\t\t},\r\n\t\t\t\t{ id: \"west\", name: \"West\", type: \"Region\", chartParam: \"region\" },\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\tcategory: \"Gov. party\",\r\n\t\t\tparams: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"democrat\",\r\n\t\t\t\t\tname: \"Democrat\",\r\n\t\t\t\t\ttype: \"Governor\",\r\n\t\t\t\t\tchartParam: \"governor\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"republican\",\r\n\t\t\t\t\tname: \"Republican\",\r\n\t\t\t\t\ttype: \"Governor\",\r\n\t\t\t\t\tchartParam: \"governor\",\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\tcategory: \"Population\",\r\n\t\t\tparams: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"pop-high\",\r\n\t\t\t\t\tname: `Top ${nStates} (pop. total)`,\r\n\t\t\t\t\ttype: \"Pop.\",\r\n\t\t\t\t\tchartParam: \"population\",\r\n\t\t\t\t\tsort: \"descending\",\r\n\t\t\t\t\tn: nStates,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"pop-low\",\r\n\t\t\t\t\tname: `Bottom ${nStates} (pop. total)`,\r\n\t\t\t\t\ttype: \"Pop.\",\r\n\t\t\t\t\tchartParam: \"population\",\r\n\t\t\t\t\tsort: \"ascending\",\r\n\t\t\t\t\tn: nStates,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"pop-density-high\",\r\n\t\t\t\t\tname: `Top ${nStates} (pop. density)`,\r\n\t\t\t\t\ttype: \"Pop.\",\r\n\t\t\t\t\tchartParam: \"populationDensity\",\r\n\t\t\t\t\tsort: \"descending\",\r\n\t\t\t\t\tn: nStates,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"pop-density-low\",\r\n\t\t\t\t\tname: `Bottom ${nStates} (pop. density)`,\r\n\t\t\t\t\ttype: \"Pop.\",\r\n\t\t\t\t\tchartParam: \"populationDensity\",\r\n\t\t\t\t\tsort: \"ascending\",\r\n\t\t\t\t\tn: nStates,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\tcategory: \"GDP\",\r\n\t\t\tparams: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"gdp-high\",\r\n\t\t\t\t\tname: `Top ${nStates} (2019 GDP)`,\r\n\t\t\t\t\ttype: \"GDP\",\r\n\t\t\t\t\tchartParam: \"gdp\",\r\n\t\t\t\t\tsort: \"descending\",\r\n\t\t\t\t\tn: nStates,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"gdp-low\",\r\n\t\t\t\t\tname: `Bottom ${nStates} (2019 GDP)`,\r\n\t\t\t\t\ttype: \"GDP\",\r\n\t\t\t\t\tchartParam: \"gdp\",\r\n\t\t\t\t\tsort: \"ascending\",\r\n\t\t\t\t\tn: nStates,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t];\r\n\r\n    const handleFilterValues = newFilter => {\r\n        const n = newFilter.n;\r\n        const filtered = Object.keys(infoStates)\r\n            .sort((a, b) =>\r\n                newFilter.sort === \"descending\"\r\n                    ? infoStates[b][newFilter.chartParam] -\r\n                      infoStates[a][newFilter.chartParam]\r\n                    : infoStates[a][newFilter.chartParam] -\r\n                      infoStates[b][newFilter.chartParam]\r\n            )\r\n            .slice(0, n);\r\n\r\n        setAnchorEl(null);\r\n        return filtered;\r\n    };\r\n\r\n    const handleFilters = () => {\r\n        let selected = [];\r\n        let currSelection = [];\r\n        filters.forEach((d, i) => {\r\n            if (d.type === \"Region\" || d.type === \"Governor\") {\r\n                currSelection = handleFilterCategories(d);\r\n            } else if (d.type === \"Pop.\" || d.type === \"GDP\") {\r\n                currSelection = handleFilterValues(d);\r\n            }\r\n\r\n            selected =\r\n                selected.length < 1\r\n                    ? currSelection\r\n                    : currSelection.filter(s => selected.includes(s));\r\n        });\r\n\r\n        setSelectedCircles(prevState => ({\r\n            ...prevState,\r\n            selected: selected,\r\n            notSelected: prevState.all.filter(s => !selected.includes(s)),\r\n        }));\r\n    };\r\n\r\n    useEffect(() => {\r\n        filters.length > 0\r\n            ? handleFilters()\r\n            : setSelectedCircles(prevState => ({\r\n                  ...prevState,\r\n                  selected: [],\r\n                  notSelected: prevState.all,\r\n              }));\r\n\t}, [filters]);\r\n\r\n    return (\r\n        <>\r\n\t\t\t{filterParams.map(f => (\r\n\t\t\t\t<FormControl key={f.category}>\r\n\t\t\t\t\t<InputLabel>{f.category}</InputLabel>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tname={f.category}\r\n\t\t\t\t\t\tonChange={handleSelector}\r\n\t\t\t\t\t\tclassName={classes.filterSelector}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Filter handleFilter={handleFilter} filterData={f.params} />\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</FormControl>\r\n\t\t\t))}\r\n            <Box component=\"ul\" className={classes.chipContainer}>\r\n\t\t\t\t{filters.length > 0 \r\n\t\t\t\t&& (\r\n                    filters.map(f => {\r\n                        return (\r\n                            <li key={f.id}>\r\n                                <Chip\r\n                                    size=\"small\"\r\n                                    className={classes.chip}\r\n                                    label={f.name}\r\n                                    onDelete={() => handleDeleteFilter(f)}\r\n                                />\r\n                            </li>\r\n                        );\r\n                    })\r\n                )}\r\n            </Box>\r\n        </>\r\n    );\r\n};\r\n","import React, { useContext } from \"react\";\r\n\r\n// context\r\nimport { selectionContext } from \"../../../context/selectionContext\";\r\n\r\n// style\r\nimport { FormControlLabel, Checkbox, Divider, Tooltip, IconButton, Typography } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tstateLabelList: {\r\n\t\tdisplay: \"block\",\r\n\t},\r\n\tdeselectAll: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignContent: \"center\",\r\n\t\tpaddingTop: theme.spacing(2)\r\n\t},\r\n\tdeselectAllButton: {\r\n\t\tpadding: 0,\r\n\t\tcolor: \"#e32636\",\r\n\t\t\"&:hover\": {\r\n\t\t\tbackgroundColor: \"transparent\",\r\n\t\t},\r\n\t},\r\n\tselectedLabel: { \r\n\t\tfontSize: \".9rem\",\r\n\t\tfontWeight: 300\r\n\t},\r\n\tnotSelectedLabel: {\r\n\t\tfontSize: \".9rem\",\r\n\t\tcolor: \"gray\",\r\n\t\tfontWeight: 300,\r\n\t\topacity: 0.7\r\n\t},\r\n}))\r\n\r\n\r\nexport const SelectedStatus = props => {\r\n    const { handleChange, handleDeselectAll } = props;\r\n    const { selectedCircles } = useContext(selectionContext);\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\r\n    return (\r\n        <>\r\n\t\t\t<div className={classes.deselectAll}>\r\n\t\t\t\t<Tooltip title=\"Deselect all\">\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tclassName={classes.deselectAllButton}\r\n\t\t\t\t\t\tonClick={handleDeselectAll}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ClearIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t\t<Typography display=\"inline\">Deselect All</Typography>\r\n\t\t\t</div>\r\n            {selectedCircles.selected &&\r\n                selectedCircles.selected.sort().map((state, i) => {\r\n                    return (\r\n                        <FormControlLabel\r\n                            key={i}\r\n                            name={state}\r\n                            checked={selectedCircles.selected.includes(state)}\r\n                            onChange={handleChange}\r\n                            control={\r\n                                <Checkbox\r\n                                    name={state}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.selectedLabel}\r\n                                />\r\n                            }\r\n\t\t\t\t\t\t\tlabel={state}\r\n\t\t\t\t\t\t\tclassName={classes.stateLabelList}\r\n\t\t\t\t\t\t\tclasses={{label: classes.selectedLabel}}\r\n                        />\r\n\t\t\t\t\t);\r\n                })}\r\n\t\t\t\t<Divider />\r\n            <br />\r\n            {selectedCircles.notSelected &&\r\n                selectedCircles.notSelected.sort().map((state, i) => {\r\n                    return (\r\n                        <FormControlLabel\r\n                            key={i}\r\n                            name={state}\r\n                            checked={selectedCircles.selected.includes(state)}\r\n                            onChange={handleChange}\r\n                            control={\r\n                                <Checkbox\r\n                                    name={state}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.notSelectedLabel}\r\n                                />\r\n                            }\r\n\t\t\t\t\t\t\tlabel={state}\r\n\t\t\t\t\t\t\tclassName={classes.stateLabelList}\r\n\t\t\t\t\t\t\tclasses={{label: classes.notSelectedLabel}}\r\n                        />\r\n                    );\r\n                })}\r\n        </>\r\n    );\r\n};\r\n","import React from 'react';\r\n\r\n// style\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tfilterSelector: {\r\n        minWidth: 150,\r\n        fontWeight: 500,\r\n\t\tfontSize: \".8rem\",\r\n\t\tcolor: theme.palette.text.primary,\r\n\t},\r\n\tinput: {\r\n\t\tcolor: theme.palette.text.primary,\r\n\t}\r\n}))\r\n\r\nexport const NumberPicker = (props) => {\r\n\tconst { nStates, setNStates } = props;\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<TextField\r\n\t\t\tid=\"n-states\"\r\n\t\t\tsize=\"small\"\r\n\t\t\ttype=\"number\"\r\n\t\t\tlabel=\"Filter n states\"\r\n\t\t\tInputProps={{\r\n\t\t\t\tinputProps: {\r\n\t\t\t\t\tmin: 1,\r\n\t\t\t\t\tmax: 50,\r\n\t\t\t\t\tclassName: classes.input,\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t\tdefaultValue={nStates}\r\n\t\t\tonChange={(e) => setNStates(e.target.value)}\r\n\t\t\tclassName={classes.filterSelector}\r\n\t\t/>\r\n\t)\r\n};","import React, { useState, useContext } from \"react\";\r\nimport { FormGroup } from \"@material-ui/core\";\r\n\r\n// components\r\nimport { SectionTitle } from \"../../sharedComponents/SectionTitle\";\r\nimport {FilterBatch} from \"../pickers/FilterBatch\";\r\nimport { SelectedStatus } from \"../pickers/SelectedStatus\";\r\nimport { NumberPicker } from \"../pickers/NumberPicker\";\r\n\r\n// context\r\nimport { selectionContext } from \"../../../context/selectionContext\";\r\n\r\n// styles\r\nimport { Tooltip, IconButton, Typography } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tdeselectAll: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\tfilterBatch: {\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\tcolor: theme.palette.text.primary,\r\n\t},\r\n\tselectedStatus: {\r\n\t\tmarginTop: \"100\"\r\n\t},\r\n\tfilterBody: {\r\n\t\tpaddingLeft: theme.spacing(3),\r\n\t\tmarginBottom: theme.spacing(4)\r\n\t},\r\n}));\r\n\r\nexport const FilterDashboard = (props) => {\r\n\tconst { handleSelector } = props;\r\n    const { selectedCircles, setSelectedCircles } = useContext(selectionContext);\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\r\n\tconst [filters, setFilters] = useState([]);\r\n\tconst [nStates, setNStates] = useState(12);\r\n\r\n    const handleChange = e => {\r\n        const state = e.target.name;\r\n\r\n        if (selectedCircles.selected.includes(state)) {\r\n            setSelectedCircles({\r\n                ...selectedCircles,\r\n                selected: selectedCircles.selected.filter(d => d !== state),\r\n                notSelected: [...selectedCircles.notSelected, state],\r\n            });\r\n        } else {\r\n            setSelectedCircles({\r\n                ...selectedCircles,\r\n                selected: [...selectedCircles.selected, state],\r\n                notSelected: selectedCircles.notSelected.filter(\r\n                    d => d !== state\r\n                ),\r\n            });\r\n        }\r\n\t};\r\n\r\n\tconst handleFilter = (newFilter) => {\r\n\t\tif (filters.length > 0) {\r\n\t\t\tsetFilters(prevState => [...prevState, newFilter])\r\n\t\t} else (\r\n\t\t\tsetFilters([newFilter])\r\n\t\t)\t\r\n\t};\r\n\t\r\n\tconst handleDeleteFilter = deletedFilter => {\r\n        const newFilterList = filters.filter(f => f.id !== deletedFilter.id);\r\n        setFilters(newFilterList);\r\n    };\r\n\r\n    const handleDeselectAll = () => {\r\n\t\tsetFilters([]);\r\n        setSelectedCircles(prevState => ({\r\n            ...prevState,\r\n            selected: [],\r\n            notSelected: prevState.all,\r\n        }));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <FormGroup>\r\n\t\t\t\t<SectionTitle divider>\r\n\t\t\t\t\tFilters\r\n\t\t\t\t</SectionTitle>\r\n\t\t\t\t<div className={classes.filterBody}>\r\n\t\t\t\t\t<NumberPicker nStates={nStates} setNStates={setNStates} />\r\n\t\t\t\t\t<FilterBatch \r\n\t\t\t\t\t\tnStates={nStates}\r\n\t\t\t\t\t\tsetNStates={setNStates}\r\n\t\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\t\tsetFilters={setFilters}\r\n\t\t\t\t\t\thandleDeleteFilter={handleDeleteFilter}\r\n\t\t\t\t\t\thandleFilter={handleFilter}\r\n\t\t\t\t\t\thandleSelector={handleSelector}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<SectionTitle divider>\r\n\t\t\t\t\tSelections\r\n\t\t\t\t</SectionTitle>\r\n\t\t\t\t<div className={classes.filterBody}>\r\n\t\t\t\t\t<SelectedStatus \r\n\t\t\t\t\t\thandleChange={handleChange} \r\n\t\t\t\t\t\thandleDeselectAll={handleDeselectAll}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n            </FormGroup>\r\n        </>\r\n    );\r\n};\r\n","import React from \"react\";\r\n\r\n// style\r\nimport { IconButton, Tooltip, Typography, MenuItem } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport BubbleChartIcon from \"@material-ui/icons/BubbleChart\";\r\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    menuButton: {\r\n        color: theme.palette.text.secondary,\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n}));\r\n\r\nexport const ChartPicker = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n\t\t\t<MenuItem component=\"a\" href=\"/covidcompare/#/line-app\">\r\n\t\t\t\t<Tooltip title=\"Line chart\">\r\n\t\t\t\t\t<IconButton className={classes.menuButton}>\r\n\t\t\t\t\t\t<TimelineIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t\t<Typography display=\"inline\">Line chart</Typography>\r\n\t\t\t</MenuItem>\r\n\t\t\t<MenuItem component=\"a\" href=\"/covidcompare/#/gapminder-app\">\r\n\t\t\t\t<Tooltip title=\"Gapminder chart\">\r\n\t\t\t\t\t<IconButton className={classes.menuButton}>\r\n\t\t\t\t\t\t<BubbleChartIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t\t<Typography display=\"inline\">Gapminder chart</Typography>\r\n\t\t\t</MenuItem>\r\n\t    </>\r\n    );\r\n};\r\n","import React from \"react\";\r\n\r\n// style\r\nimport { Drawer, Hidden, Toolbar, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 1,\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        alignItems: \"left\",\r\n        color: theme.palette.text.primary,\r\n        paddingLeft: \"1rem\",\r\n    },\r\n    drawerHeader: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        padding: theme.spacing(0, 1),\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: \"flex-end\",\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n}));\r\n\r\nexport const MenuDrawer = props => {\r\n    const { mobileOpen, handleDrawer, persistent } = props;\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n\r\n    return (\r\n\t\t<>\r\n\t\t\t<Hidden mdUp>\r\n\t\t\t\t<Drawer\r\n\t\t\t\t\tvariant=\"temporary\"\r\n\t\t\t\t\tanchor={theme.direction === \"rtl\" ? \"right\" : \"left\"}\r\n\t\t\t\t\topen={mobileOpen}\r\n\t\t\t\t\tonClose={handleDrawer}\r\n\t\t\t\t\tclasses={{ paper: classes.drawerPaper }}\r\n\t\t\t\t\tModalProps={{ keepMounted: true }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Toolbar />\r\n\t\t\t\t\t<Grid item style={{marginBottom: \"auto\"}}>\r\n\t\t\t\t\t\t{props.children}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Drawer>\r\n\t\t\t</Hidden>\r\n\t\t\t{persistent\r\n\t\t\t\t&& <Hidden smDown>\r\n\t\t\t\t\t<Drawer\r\n\t\t\t\t\t\tclassName={classes.drawer}\r\n\t\t\t\t\t\tvariant=\"permanent\"\r\n\t\t\t\t\t\tclasses={{ paper: classes.drawerPaper }}\r\n\t\t\t\t\t\topen\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Toolbar />\r\n\t\t\t\t\t\t<div className={classes.drawerContainer}>\r\n\t\t\t\t\t\t\t{props.children}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Drawer>\r\n\t\t\t\t</Hidden>\r\n\t\t\t}\r\n\t\t</>\r\n    );\r\n};","import React from \"react\";\r\n\r\nexport const ThemeContext = React.createContext();","import React, { useContext } from \"react\";\r\nimport { saveSvgAsPng } from \"save-svg-as-png\";\r\n\r\n// context\r\nimport { ThemeContext } from \"../context/ThemeContext\";\r\n\r\n// styles\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport \"../styles/styles.css\";\r\nimport { IconButton, Tooltip, Typography, MenuItem } from \"@material-ui/core\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport Brightness7Icon from \"@material-ui/icons/Brightness7\";\r\n\r\nexport const Settings = () => {\r\n    const { darkMode, setDarkMode } = useContext(ThemeContext);\r\n\t\r\n    const useStyles = makeStyles(theme => ({\r\n        rootGrid: {\r\n            maxWidth: window.innerWidth,\r\n\t\t\tmargin: \"0 auto\",\r\n        },\r\n        footerButton: {\r\n            color: theme.palette.text.secondary,\r\n\t\t\t\"&:hover\": {\r\n\t\t\t\tbackgroundColor: \"transparent\",\r\n\t\t\t}\r\n        },\r\n    }));\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n\r\n    const pathArray = window.location.href.split(\"/\");\r\n    const queryID = `#${pathArray[pathArray.length - 1]}`;\r\n\r\n    const saveImage = () => {\r\n        saveSvgAsPng(document.querySelector(queryID), \"covid-19_chart.png\", {\r\n            backgroundColor: theme.palette.background.default,\r\n            encoderOptions: 1,\r\n            fonts: [\r\n                {\r\n                    url:\r\n                        \"../../styles/ralewaymedium/raleway-medium-webfont.woff\",\r\n                    format: \"application/font-woff\",\r\n                    text:\r\n                        \"@font-face {font-family: 'ralewaymedium'; src: url('./ralewaymedium/raleway-medium-webfont.woff2') format('woff2'), url('./ralewaymedium/raleway-medium-webfont.woff') format('woff'); font-weight: normal;font-style: normal;}\",\r\n                },\r\n            ],\r\n        });\r\n\t};\r\n\r\n    return (\r\n        <>\r\n\t\t\t<MenuItem onClick={saveImage}>\r\n\t\t\t\t<Tooltip title=\"Save chart as image\" placement=\"right\">\r\n\t\t\t\t\t<IconButton className={classes.footerButton}>\r\n\t\t\t\t\t\t<SaveIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t\t<Typography display=\"inline\">Save chart</Typography>\r\n\t\t\t</MenuItem>\r\n\t\t\t<MenuItem onClick={() => setDarkMode(!darkMode)}>\r\n\t\t\t\t<Tooltip title=\"Toggle dark/light theme\" placement=\"right\">\r\n\t\t\t\t\t<IconButton className={classes.footerButton}>\r\n\t\t\t\t\t\t<Brightness7Icon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t\t<Typography display=\"inline\">Dark mode</Typography>\r\n\t\t\t</MenuItem>\r\n\t    </>\r\n    );\r\n};","import React, { useState } from \"react\";\r\n\r\n// components\r\nimport { ParamDashboard } from \"./ParamDashboard\";\r\nimport { FilterDashboard } from \"./FilterDashboard\";\r\nimport { ChartPicker } from \"../../sharedComponents/ChartPicker\";\r\nimport { MenuDrawer } from \"./MenuDrawer\";\r\nimport { Settings } from \"../../Settings\";\r\n\r\n// style\r\nimport { AppBar, Toolbar, IconButton, Button, Menu, MenuList } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: \"flex\",\r\n    },\r\n    appBar: {\r\n        backgroundColor: theme.palette.background.dark,\r\n        color: theme.palette.text.primary,\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n\t},\r\n    menuButton: {\r\n        color: theme.palette.text.primary,\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n\t},\r\n    hide: {\r\n        display: \"none\",\r\n    },\r\n}));\r\n\r\nexport const Navbar = props => {\r\n    const { data, selector, handleSelector } = props;\r\n\tconst [mobileOpen, setMobileOpen] = useState(false);\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n    const classes = useStyles();\r\n\r\n\tconst handleOptions = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\r\n    const handleDrawer = () => {\r\n\t\tsetMobileOpen(!mobileOpen);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <AppBar\r\n                position=\"relative\"\r\n\t\t\t\tclassName={classes.appBar}\r\n            >\r\n                <Toolbar className={classes.toolbar}>\r\n                    <IconButton\r\n                        onClick={handleDrawer}\r\n                        edge=\"start\"\r\n                        disableRipple\r\n                        className={classes.menuButton}\r\n                    >\r\n                        <MenuIcon className={classes.menuButton} />\r\n                    </IconButton>\r\n\t\t\t\t\t<span style={{ marginLeft: \"auto\" }}>\r\n\t\t\t\t\t\t<Button onClick={handleOptions}>\r\n\t\t\t\t\t\t\tOptions\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\t\t\topen={Boolean(anchorEl)}\r\n\t\t\t\t\t\t\tonClose={handleOptions}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<MenuList style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t\t\t\t<ChartPicker />\r\n\t\t\t\t\t\t\t\t<Settings />\r\n\t\t\t\t\t\t\t</MenuList>\r\n\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t</span>\r\n\t\t\t    </Toolbar>\r\n            </AppBar>\r\n\t\t\t<MenuDrawer\r\n\t\t\t\tmobileOpen={mobileOpen}\r\n\t\t\t\thandleDrawer={handleDrawer}\r\n\t\t\t\tpersistent\r\n\t\t\t>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<ParamDashboard\r\n\t\t\t\t\t\tflexDirection=\"column\"\r\n\t\t\t\t\t\tdata={data}\r\n\t\t\t\t\t\tselector={selector}\r\n\t\t\t\t\t\thandleSelector={handleSelector}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<FilterDashboard handleSelector={handleSelector} />\r\n\t\t\t\t</div>\r\n\t\t\t</MenuDrawer>\r\n        </>\r\n    );\r\n};\r\n","export const gapminderData = async (data, stateInfo, chartParams) => {\r\n\tconst { xParam, yParam, tParam } = chartParams;\r\n\tlet newData = [];\r\n\tObject.keys(stateInfo).forEach((state,i) => {\r\n\t\tlet eachState = {\r\n\t\t\tstate: state,\r\n\t\t\tregion: stateInfo[state].region,\r\n\t\t\t[tParam.selected]: [],\r\n\t\t\t[xParam.selected]: [],\r\n\t\t\t[xParam.alt1]: [],\r\n\t\t\t[yParam.selected]: [],\r\n\t\t\t[yParam.alt1]: [],\r\n\t\t};\r\n\r\n\t\tconst filtered = data.filter(d => d.state === state);\r\n\t\tfiltered.forEach((d,i) => {\r\n\t\t\teachState[tParam.selected].push([d[tParam.selected], d[tParam.selected]]);\r\n\t\t\teachState[xParam.selected].push([d[tParam.selected], d[xParam.selected]]);\r\n\t\t\teachState[yParam.selected].push([d[tParam.selected], d[yParam.selected]]);\r\n\t\t\teachState[xParam.alt1].push([d[tParam.selected], d[xParam.alt1]]);\r\n\t\t\teachState[yParam.alt1].push([d[tParam.selected], d[yParam.alt1]]);\r\n\t\t});\r\n\t\tnewData.push(eachState);\r\n\t});\r\n\r\n\treturn newData;\r\n};","export const wrapper = {\r\n\twrapperWidth: window.innerWidth * .8,\r\n\twrapperHeight: window.innerHeight * .8,\r\n\tmargin: { \r\n\t\ttop: 40,\r\n\t\tright: 40,\r\n\t\tbottom: 60,\r\n\t\tleft: 60\r\n\t}\r\n  };\r\n  \r\nexport const bounds = {\r\n\twidth: wrapper.wrapperWidth - wrapper.margin.left - wrapper.margin.right,\r\n\theight: wrapper.wrapperHeight - wrapper.margin.top - wrapper.margin.bottom,\r\n};","import React, { useState, useEffect, useContext } from 'react';\r\n\r\n// params\r\nimport { chartParams, cParamCategories } from \"./appParams\";\r\n\r\n// components\r\nimport { ChartGapminder } from './chart/ChartGapminder'; \r\nimport { Navbar } from './interface/Navbar';\r\n\r\n// context\r\nimport { dataContext } from '../../context/dataContext';\r\nimport { selectionContext } from '../../context/selectionContext';\r\n\r\n// data\r\nimport stateInfo from '../../data/stateInfo.json';\r\nimport { gapminderData } from './gapminderData';\r\n\r\n// style\r\nimport { wrapper, bounds } from \"./styles/dimensions\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const AppGapminder = (props) => {\r\n\tconst { darkMode, setDarkMode } = props;\r\n\tconst { margin } = wrapper;\r\n\tconst { width } = bounds;\r\n\r\n\tconst {dataStates} = useContext(dataContext);\r\n\tconst [data, setData] = useState(null);\r\n\tconst [selector, setSelector] = useState({\r\n\t\txParam: chartParams.xParam, \r\n\t\tyParam: chartParams.yParam, \r\n\t\tzParam: chartParams.zParam, \r\n\t\tcParam: chartParams.cParam, \r\n\t});\r\n\tconst [selectedCircles, setSelectedCircles] = useState({\r\n\t\tselected: [], \r\n\t\tnotSelected: Object.keys(stateInfo), \r\n\t\tall: Object.keys(stateInfo)\r\n\t});\r\n\r\n\t// style\r\n\tconst useStyles = makeStyles((theme) => ({\r\n\t\tnavbar: {\r\n\t\t\twidth: width,\r\n\t\t\tmarginLeft: margin.left,\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tjustifyContent: 'flex-start',\r\n\t\t}\r\n\t}));\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleSelector = (e) => {\r\n\t\tconst param = e.target.name;\r\n\r\n\t\tsetSelector({\r\n\t\t\t...selector,\r\n\t\t\t[param]: {\r\n\t\t\t\t...selector[param],\r\n\t\t\t\tselected: e.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (dataStates.length > 0) {\r\n\t\t\tgapminderData(dataStates, stateInfo, chartParams)\r\n\t\t\t\t.then(res => setData(res))\r\n\t\t}\r\n\t}, [dataStates]);\r\n\r\n\treturn (\r\n\t\t<selectionContext.Provider value={{selectedCircles, setSelectedCircles}}>\r\n\t\t\t<Navbar \t\t\t\t\t\t\t\t\r\n\t\t\t\tdata={data} \r\n\t\t\t\tselector={selector} \r\n\t\t\t\thandleSelector={handleSelector}\r\n\t\t\t\tclassName={classes.navbar}\r\n\t\t\t\tdarkMode={darkMode}\r\n\t\t\t\tsetDarkMode={setDarkMode}\r\n\t\t\t/>\r\n\t\t\t<div transform={`translate(${margin.left}, ${margin.top})`}>\r\n\t\t\t\t{data \r\n\t\t\t\t\t&& <ChartGapminder\r\n\t\t\t\t\t\tcParamCategories={cParamCategories} \r\n\t\t\t\t\t\tselector={selector}\r\n\t\t\t\t\t\tdata={data}\r\n\t\t\t\t\t\twrapper={wrapper} \r\n\t\t\t\t\t\tbounds={bounds} \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</selectionContext.Provider>\r\n\t)\r\n};\r\n","import * as d3 from \"d3\";\r\n\r\nconst date = {\r\n  dateFormatter: d3.timeFormat(\"%m-%d-%y\"),\r\n  dateParser: d3.timeParse(\"%m-%d-%y\"),\r\n};\r\n\r\nconst dimensions = {\r\n  width: window.innerWidth,\r\n  height: 750,\r\n  margin: {\r\n    top: 80,\r\n    right: 100,\r\n    bottom: 140,\r\n    left: 100,\r\n  },\r\n};\r\n\r\nconst bounded = {\r\n  width: dimensions.width - dimensions.margin.left - dimensions.margin.right,\r\n  height: dimensions.height - dimensions.margin.top - dimensions.margin.bottom,\r\n};\r\n\r\nexport { date, dimensions, bounded };\r\n","import { useEffect, useContext } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\n// context\r\nimport { dataContext } from '../../context/dataContext';\r\n\r\n// constants\r\nimport { date } from '../util/constants';\r\n\r\nexport const MouseMove = (props) => {\r\n\tconst { focus, overlay, linesStates, selectedStates, bounds } = props;\r\n    const { width, height } = bounds;\r\n\tconst { dataStates } = useContext(dataContext);\r\n\t\r\n    const xScale = d3.scaleLinear().domain(d3.extent(dataStates, d => d.dayOfOutbreak)).range([0, width]);\r\n    const yScale = d3.scaleLinear().domain(d3.extent(dataStates, d => d.casesPerThousand)).range([height, 0]);\r\n\r\n    useEffect(() => {\r\n        if (overlay && selectedStates) {\r\n\t\t\t\r\n            overlay.on('mousemove', mousemove);\r\n\r\n            let frozen = false;\r\n\r\n            function mousemove() {\r\n                let x0 = xScale.invert(d3.mouse(this)[0]);\r\n\t\t\t\tconst bisectDate = d3.bisector(d => d.dayOfOutbreak).left;\r\n\r\n                Object.keys(selectedStates).sort()\r\n                    .filter(s => selectedStates[s].selected === true)\r\n                    .forEach(state => {\r\n                        const dataEachState = dataStates.filter(d => d.state === state);\r\n                        const stateHTML = selectedStates[state].htmlFormat;\r\n                        const i = bisectDate(dataEachState, x0, 0);\r\n\r\n                        let dataEachStateRangeY = dataEachState[i]\r\n                            ? dataEachState[i].casesPerThousand \r\n                            : dataEachState[dataEachState.length - 1].casesPerThousand;\r\n                        let dataEachStateRangeX = dataEachState[i] \r\n                            ? dataEachState[i].dayOfOutbreak \r\n                            : dataEachState[dataEachState.length - 1].dayOfOutbreak;\r\n                        let dataEachStateRangeDate = dataEachState[i] \r\n                            ? date.dateFormatter(dataEachState[i].date) \r\n                            : date.dateFormatter(dataEachState[dataEachState.length - 1].date);\r\n                        let dataEachStateRangeCases = dataEachState[i]\r\n                            ? dataEachState[i].cases \r\n                            : dataEachState[dataEachState.length - 1].cases;\r\n\r\n                        const toggleFreeze = () => {\r\n\t\t\t\t\t\t\tfrozen = !frozen;\r\n                        };\r\n\r\n                        overlay.on('click', toggleFreeze);\r\n\r\n                        if (!frozen) {\r\n                            focus.select(`#circle-${stateHTML}`)\r\n                                .attr('cy', yScale(dataEachStateRangeY))\r\n                                .attr('cx', xScale(dataEachStateRangeX));\r\n\r\n                            focus.select(`#d-label-${stateHTML}`)\r\n                                .text(`${selectedStates[state].abbreviation} => Day ${dataEachStateRangeX} (${dataEachStateRangeDate.split(\"-\").slice(0,2).join(\"-\")})`)\r\n\t\t\t\t\t\t\t\t.attr('fill', selectedStates[state].color)\r\n\r\n                            focus.select(`#d-label-b-${stateHTML}`)\r\n                                .text(`${dataEachStateRangeY.toFixed(3)} (${dataEachStateRangeCases} tot.)`)\r\n                                .attr('fill', selectedStates[state].color)\r\n                        } \r\n                    });\r\n                }\r\n\t\t\t}\r\n\t}, [linesStates]);\r\n\t\r\n    return null;\r\n};","import React, { useState, useContext, useEffect, Fragment } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\n// functions\r\nimport { MouseMove } from \"../../util/MouseMove\";\r\n\r\n// context\r\nimport { dataContext } from \"../../../context/dataContext\";\r\nimport { statesContext } from \"../../../context/statesContext\";\r\n\r\n// style\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport { useMediaQuery } from \"@material-ui/core\";\r\n\r\nexport const Line = props => {\r\n    const {\r\n        focus,\r\n\t\toverlay,\r\n        selectedStates,\r\n\t\tbounds,\r\n    } = props;\r\n    const { width, height } = bounds;\r\n\r\n    // context\r\n    const { dataStates } = useContext(dataContext);\r\n\tconst { infoStates } = useContext(statesContext);\r\n\r\n    // style\r\n    const theme = useTheme();\r\n\tconst mqMedium = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n\tconst mqLarge = useMediaQuery(theme.breakpoints.up(\"lg\"));\r\n\r\n\tconst [linesStates, setLinesStates] = useState([]);\r\n\r\n\tconst filterStates = statesObject => {\r\n\t\tlet filtered = Object.keys(statesObject)\r\n\t\t\t.sort()\r\n\t\t\t.filter(s => statesObject[s].selected === true);\r\n\t\treturn filtered;\r\n\t};\r\n\r\n    useEffect(() => {\r\n        if (selectedStates && dataStates.length > 0) {\r\n\t\t\t// Scales\r\n            const xScale = d3\r\n                .scaleLinear()\r\n                .domain(d3.extent(dataStates, d => d.dayOfOutbreak))\r\n                .range([0, width]);\r\n            const yScale = d3\r\n                .scaleLinear()\r\n                .domain(d3.extent(dataStates, d => d.casesPerThousand))\r\n                .range([height, 0]);\r\n\r\n            // Lines\r\n            const lineGenerator = d3\r\n                .line()\r\n                .x(d => xScale(d.dayOfOutbreak))\r\n                .y(d => yScale(d.casesPerThousand));\r\n\r\n            const linesObject = {};\r\n\r\n\t\t\tconst filtered = filterStates(selectedStates)\r\n\t\t\tfiltered\r\n                .forEach((state, i) => {\r\n                    const dataEachState = dataStates.filter(\r\n                        d => d.state === state\r\n                    );\r\n                    // Line label placement\r\n                    const lastDayOfOutbreak =\r\n                        dataEachState[dataEachState.length - 1].dayOfOutbreak;\r\n                    const lastCasesPerThousand =\r\n                        dataEachState[dataEachState.length - 1]\r\n                            .casesPerThousand;\r\n\r\n                    // markers for lockdown date\r\n                    const lockdownDate = selectedStates[state].lockdown;\r\n                    const lockdownDay =\r\n                        (lockdownDate - dataEachState[0].date) /\r\n                            (24 * 60 * 60 * 10 * 10 * 10) +\r\n                        1;\r\n                    const lockdownDayDatum = dataEachState.filter(\r\n                        d => d.dayOfOutbreak === lockdownDay\r\n                    )[0];\r\n\r\n                    if (lockdownDayDatum) {\r\n                        linesObject[state] = {\r\n                            line: lineGenerator(dataEachState),\r\n                            lineLabelX: xScale(lastDayOfOutbreak) + 3,\r\n                            lineLabelY: yScale(lastCasesPerThousand),\r\n                            lockdownMarkerX: xScale(lockdownDay),\r\n                            lockdownMarkerY: yScale(\r\n                                lockdownDayDatum.casesPerThousand\r\n                            ),\r\n                        };\r\n                    } else {\r\n                        linesObject[state] = {\r\n                            line: lineGenerator(dataEachState),\r\n                            lineLabelX: xScale(lastDayOfOutbreak) + 3,\r\n                            lineLabelY: yScale(lastCasesPerThousand),\r\n                        };\r\n                    }\r\n                });\r\n            setLinesStates(linesObject);\r\n        };\r\n\t}, [dataStates, selectedStates, theme]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (selectedStates) {\r\n\t\t\tconst filtered = filterStates(selectedStates);\r\n\r\n\t\t\tfiltered\r\n\t\t\t.forEach((state, i) => {\r\n\t\t\t\tconst stateHTML = infoStates[state].htmlFormat;\r\n\t\t\t\t// for mousemove\r\n\t\t\t\tlet xShift = 0;\r\n\t\t\t\tlet yShift = 0;\r\n\r\n\t\t\t\tif (i > 11) {\r\n\t\t\t\t\tif (mqLarge) {\r\n\t\t\t\t\t\txShift = 180;\r\n\t\t\t\t\t\tyShift = 12 * 40;\r\n\t\t\t\t\t} else if (mqMedium) {\r\n\t\t\t\t\t\txShift = 120;\r\n\t\t\t\t\t\tyShift = 12 * 40;\r\n\t\t\t\t\t} \r\n\t\t\t\t}\r\n\r\n\t\t\t\tfocus\r\n\t\t\t\t\t.append(\"circle\")\r\n\t\t\t\t\t.attr(\"id\", `circle-${stateHTML}`)\r\n\t\t\t\t\t.attr(\"r\", 5)\r\n\t\t\t\t\t.attr(\"fill\", selectedStates[state].color)\r\n\t\t\t\t\t.attr(\"stroke\", theme.palette.text.primary);\r\n\r\n\t\t\t\tif (mqMedium ? i < 24 : i < 12) {\r\n\t\t\t\t\tfocus\r\n\t\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t\t.attr(\"id\", `d-label-${stateHTML}`)\r\n\t\t\t\t\t\t.attr(\"x\", 10 + xShift)\r\n\t\t\t\t\t\t.attr(\"y\", d => mqMedium ? 10 + i * 40 - yShift : 10 + i * 30)\r\n\t\t\t\t\t\t.style(\"font-size\", d => mqLarge ? \".8rem\" : \".6rem\")\r\n\t\t\t\t\t\t.style(\r\n\t\t\t\t\t\t\t\"font-family\",\r\n\t\t\t\t\t\t\t\"ralewaymedium, Helvetica, Arial, sans-serif\"\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\tfocus\r\n\t\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t\t.attr(\"id\", `d-label-b-${stateHTML}`)\r\n\t\t\t\t\t\t.attr(\"x\", 10 + xShift)\r\n\t\t\t\t\t\t.attr(\"y\", d => mqMedium ? 25 + i * 40 - yShift : 25 + i * 30)\r\n\t\t\t\t\t\t.style(\"font-size\", d => mqLarge ? \".8rem\" : \".6rem\")\r\n\t\t\t\t\t\t.style(\r\n\t\t\t\t\t\t\t\"font-family\",\r\n\t\t\t\t\t\t\t\"ralewaymedium, Helvetica, Arial, sans-serif\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tfocus.selectAll(\"circle\").remove();\r\n\t\t\tfocus.selectAll(\"text\").remove();\r\n        };\r\n\t}, [linesStates]);\r\n\r\n    return (\r\n        <>\t\r\n            <MouseMove\r\n                focus={focus}\r\n\t\t\t\toverlay={overlay}\r\n\t\t\t\tlinesStates={linesStates}\r\n\t\t\t\tbounds={bounds}\r\n                {...props}\r\n            />\r\n            {dataStates.length > 0 ? (\r\n                Object.keys(linesStates)\r\n                    .sort()\r\n                    .map((state, i) => {\r\n                        const stateHTML = infoStates[state].htmlFormat;\r\n\r\n                        return (\r\n\t\t\t\t\t\t\t<Fragment key={state}>\r\n\t\t\t\t\t\t\t\t<g id={`bounds-render-${stateHTML}`}>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tstroke={selectedStates[state].color}\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2.5}\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\td={linesStates[state].line}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<circle\r\n\t\t\t\t\t\t\t\t\t\tid=\"line-marker-lockdown\"\r\n\t\t\t\t\t\t\t\t\t\tr={4}\r\n\t\t\t\t\t\t\t\t\t\tfill={\r\n\t\t\t\t\t\t\t\t\t\t\tlinesStates[state].lockdownMarkerX\r\n\t\t\t\t\t\t\t\t\t\t\t\t? selectedStates[state].color\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"none\"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tcx={linesStates[state].lockdownMarkerX}\r\n\t\t\t\t\t\t\t\t\t\tcy={linesStates[state].lockdownMarkerY}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\tid={`line-label-${stateHTML}`}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"line-label\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tfill: theme.palette.text.primary,\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\t\t\t\t\t\t\t\tfontFamily:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tx={linesStates[state].lineLabelX}\r\n\t\t\t\t\t\t\t\t\t\ty={linesStates[state].lineLabelY}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{selectedStates[state].abbreviation}\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t</Fragment>\r\n                        );\r\n                    })\r\n            ) : (\r\n                <g></g>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import React, { useContext, useEffect, useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\n// Components\r\nimport { Line } from \"./Line\";\r\n\r\n// Context\r\nimport { dataContext } from \"../../../context/dataContext\";\r\n\r\n// Styles\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const ChartCovidCompare = props => {\r\n\tconst { wrapper, bounds } = props;\r\n\tconst { wrapperWidth, wrapperHeight, margin } = wrapper;\r\n\tconst { width, height } = bounds;\r\n\tconst { dataStates } = useContext(dataContext);\r\n\r\n\tconst useStyles = makeStyles(theme => ({\r\n\t\trootSVG: {\r\n\t\t\tdisplay: \"inline-block\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tverticalAlign: \"middle\",\r\n\t\t\toverflow: \"hidden\",\r\n\t\t},\r\n\t\tbounds: {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontSize: \"1.2rem\",\r\n\t\t},\r\n\t\taxes: {\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t},\r\n\t\taxisLabel: {\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontSize: \".8rem\",\r\n\t\t},\r\n\t\tfootnotes: {\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontSize: \".6rem\",\r\n\t\t},\r\n\t}));\r\n\tlet classes = useStyles();\r\n\r\n    const yAxisRef = useRef(null);\r\n    const xAxisRef = useRef(null);\r\n    const svgRef = useRef(null);\r\n\tconst boundsRef = useRef(null);\r\n\r\n\tconst getFocus = () => {\r\n\t\treturn d3\r\n\t\t\t.select(boundsRef.current)\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"focus\")\r\n\t\t\t.style(\"display\", \"none\");\r\n\t};\r\n\tconst focus = getFocus();\r\n\r\n\tconst getOverlay = () => {\r\n\t\treturn d3\r\n\t\t\t.select(boundsRef.current)\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"overlay\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height)\r\n\t\t\t.attr(\"opacity\", \"0\")\r\n\t\t\t.on(\"mouseover\", () => focus.style(\"display\", null));\r\n\t};\r\n\tconst overlay = getOverlay();\r\n\r\n    useEffect(() => {\r\n        // Scales\r\n        const xScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d.dayOfOutbreak))\r\n            .range([0, width]);\r\n        const yScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d.casesPerThousand))\r\n            .range([height, 0]);\r\n\r\n        // Axes\r\n        const yAxisGenerator = d3.axisLeft().scale(yScale);\r\n        const xAxisGenerator = d3.axisBottom().scale(xScale);\r\n        d3.select(xAxisRef.current).call(xAxisGenerator);\r\n        d3.select(yAxisRef.current).call(yAxisGenerator);\r\n\t}, [dataStates]);\r\n\r\n    return (\r\n\t\t<>\r\n\t\t\t<svg \r\n\t\t\t\tid=\"line-app\" \r\n\t\t\t\theight={wrapperHeight} \r\n\t\t\t\twidth={wrapperWidth} \r\n\t\t\t\tref={svgRef}\r\n\t\t\t\tclassName={classes.rootSVG}\r\n\t\t\t\tviewBox={`0 0 ${wrapperWidth} ${wrapperHeight}`}\r\n\t\t\t\t// preserveAspectRatio=\"xMinYMin meet\"\r\n\t\t\t>\r\n                <text\r\n                    className={classes.title}\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    textAnchor=\"middle\"\r\n                    transform={`translate (${\r\n                        margin.left + width / 2\r\n                    }, ${margin.top / 2})`}\r\n                >\r\n                    COVID-19 US State Comparison\r\n                </text>\r\n                <text\r\n                    className={classes.axisLabel}\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    textAnchor=\"middle\"\r\n                    transform={`translate(${margin.left + width / 2}, ${\r\n                        height + margin.top + 40\r\n                    })`}\r\n                >\r\n                    Day of Outbreak\r\n                </text>\r\n                <text\r\n                    className={classes.axisLabel}\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    textAnchor=\"middle\"\r\n                    transform={`translate(${\r\n                        margin.left * .6\r\n                    }, ${height / 2}) rotate(-90)`}\r\n                >\r\n                    Cases per 1000 people\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    transform={`translate(${margin.left}, ${\r\n                        height + margin.top + 60\r\n                    })`}\r\n                >\r\n                    *Data from The New York Times, based on reports from state\r\n                    and local health agencies.\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    transform={`translate(${margin.left}, ${\r\n                        height + margin.top + 80\r\n                    })`}\r\n                >\r\n                    **Population data from US Census Bureau (2019).\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    transform={`translate(${margin.left}, ${\r\n                        height + margin.top + 100\r\n                    })`}\r\n                >\r\n                    ***2/27 is earliest possible 'Day 1,' since prior cases were\r\n                    isolated and may skew insights of \"community spread\"\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    transform={`translate(${margin.left}, ${\r\n                        height + margin.top + 120\r\n                    })`}\r\n                >\r\n                    Legend will display up to 24 states (alphabetical order)\r\n                </text>\r\n                <g\r\n                    id=\"bounds\"\r\n                    transform={`translate(${margin.left}, ${margin.top})`}\r\n                    ref={boundsRef}\r\n                >\r\n                    <g\r\n                        ref={yAxisRef}\r\n                        id=\"y-axis\"\r\n                        style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    />\r\n                    <g\r\n                        ref={xAxisRef}\r\n                        id=\"x-axis\"\r\n                        transform={`translate(0,${height})`}\r\n                        style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    />\r\n                    <Line focus={focus} overlay={overlay} {...props} />\r\n                </g>\r\n            </svg>\r\n\t\t</>\r\n    );\r\n};\r\n\r\nChartCovidCompare.propTypes = {\r\n\twrapper: PropTypes.object,\r\n\tbounds: PropTypes.object,\r\n};","// REUSABLE COMPONENT\r\n\r\nimport React, { forwardRef } from 'react';\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { MenuItem } from \"@material-ui/core\";\r\n\r\nexport const FilterValues = forwardRef((props, ref) => {\r\n\tconst { filterOptions, handleSelectedFilter, handleMenu } = props;\r\n\r\n\tconst handleMenuClick = (newFilter) => {\r\n\t\thandleMenu();\r\n\t\thandleSelectedFilter(newFilter);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{filterOptions.map(o => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\tkey={o.id}\r\n\t\t\t\t\t\tid={o.id}\r\n\t\t\t\t\t\tref={ref} \r\n\t\t\t\t\t\tonClick={() => handleMenuClick(o)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{o.name}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</>\r\n\t);\r\n});\r\n\r\nFilterValues.propTypes = {\r\n\tfilterOptions: PropTypes.arrayOf(PropTypes.shape({\r\n\t\tid: PropTypes.string.isRequired, // unique ID; html format \r\n\t\tname: PropTypes.string, // user-facing name of filter \r\n\t\ttype: PropTypes.string, // user-facing parameter being filtered (eg. \"GDP\")\r\n\t\tchartParam: PropTypes.string.isRequired, // match exact parameter name (eg. \"realGDP2019\")\r\n\t\tn: PropTypes.number.isRequired, // number of cases (ie. rows or documents) to filter\r\n\t\tsort: PropTypes.string.isRequired // \"ascending or descending\"\r\n\t})),\r\n};","// WRAPPER COMPONENT (FilterValues)\r\n\r\nimport React, { useState } from 'react';\r\nimport { FilterValues } from \"../components/FilterValues\";\r\n\r\nimport { Menu, Button } from \"@material-ui/core\";\r\n\r\nexport const FilterCases = (props) => {\r\n\tconst { nStates, handleSelectedFilter } = props;\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\t\r\n\tconst filterOptions = [\r\n\t\t{id: \"cases-high\", name: `Top ${nStates} (total)`, type: \"Cases\", chartParam: \"latestCaseCount\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"cases-low\", name: `Bottom ${nStates} (total)`, type: \"Cases\", chartParam: \"latestCaseCount\", sort: \"ascending\", n: nStates},\r\n\t\t{id: \"cases-per-1000-high\", name: `Top ${nStates} (per 1000)`, type: \"Cases\", chartParam: \"latestCaseCountPerThou\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"cases-per-1000-low\", name: `Bottom ${nStates} (per 1000)`, type: \"Cases\", chartParam: \"latestCaseCountPerThou\", sort: \"ascending\", n: nStates},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button id=\"cases-btn\" onClick={handleMenu}>\r\n\t\t\t\tFilter By Case\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"cases-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t<FilterValues \r\n\t\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t\t\thandleMenu={handleMenu}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n};\r\n","// WRAPPER COMPONENT (FilterValues)\r\n\r\nimport React, { useState } from 'react';\r\nimport { FilterValues } from \"../components/FilterValues\";\r\n\r\nimport { Menu, Button } from \"@material-ui/core\";\r\n\r\nexport const FilterPopulation = (props) => {\r\n\tconst { nStates, handleSelectedFilter } = props;\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\t\r\n\tconst filterOptions = [\r\n\t\t{id: \"pop-high\", name: `Top ${nStates} (pop. total)`, type: \"Pop.\", chartParam: \"population\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"pop-low\", name: `Bottom ${nStates} (pop. total)`, type: \"Pop.\", chartParam: \"population\", sort: \"ascending\", n: nStates},\r\n\t\t{id: \"pop-density-high\", name: `Top ${nStates} (pop. density)`, type: \"Pop.\", chartParam: \"populationDensity\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"pop-density-low\", name: `Bottom ${nStates} (pop. density)`, type: \"Pop.\", chartParam: \"populationDensity\", sort: \"ascending\", n: nStates}\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button id=\"population-btn\" onClick={handleMenu}>\r\n\t\t\t\tFilter By Population\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"population-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t<FilterValues \r\n\t\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t\t\thandleMenu={handleMenu}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n};\r\n","// REUSABLE COMPONENT\r\n\r\nimport React, {forwardRef} from 'react';\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { MenuItem } from \"@material-ui/core\";\r\n\r\nexport const FilterCategories = forwardRef((props, ref) => {\r\n\tconst { filterOptions, handleSelectedFilter, handleMenu } = props;\r\n\r\n\tconst handleMenuClick = (newFilter) => {\r\n\t\thandleMenu();\r\n\t\thandleSelectedFilter(newFilter);\r\n\t}; \r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{filterOptions.map(o => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\tkey={o.id}\r\n\t\t\t\t\t\tid={o.id} \r\n\t\t\t\t\t\tref={ref}\r\n\t\t\t\t\t\tonClick={() => handleMenuClick(o)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{o.name}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</>\r\n\t);\r\n});\r\n\r\nFilterCategories.propTypes = {\r\n\tfilterOptions: PropTypes.arrayOf(PropTypes.shape({\r\n\t\tid: PropTypes.string.isRequired, // unique ID; html format \r\n\t\tname: PropTypes.string, // user-facing name of filter \r\n\t\ttype: PropTypes.string, // user-facing parameter being filtered (eg. \"Region\")\r\n\t\tchartParam: PropTypes.string.isRequired, // match exact parameter name (eg. \"region\")\r\n\t})),\r\n};","// WRAPPER COMPONENT (FilterCategories)\r\n\r\nimport React, { useState } from 'react';\r\n\r\n// components\r\nimport { FilterCategories } from \"../components/FilterCategories\";\r\n\r\nimport { Menu, Button } from \"@material-ui/core\";\r\n\r\nexport const FilterRegion = (props) => {\r\n\tconst { handleSelectedFilter } = props;\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\t\r\n\tconst filterOptions = [\r\n\t\t{id: \"northeast\", name: \"Northeast\", type: \"Region\", chartParam: \"region\"},\r\n\t\t{id: \"midwest\", name: \"Midwest\", type: \"Region\", chartParam: \"region\"},\r\n\t\t{id: \"south\", name: \"South\", type: \"Region\", chartParam: \"region\"},\r\n\t\t{id: \"west\", name: \"West\", type: \"Region\", chartParam: \"region\"}\r\n\t];\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button id=\"region-btn\" onClick={handleMenu}>\r\n\t\t\t\tFilter By Region\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"region-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t<FilterCategories \r\n\t\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t\t\thandleMenu={handleMenu}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useMediaQuery, Grid } from \"@material-ui/core\";\r\n\r\n// components\r\nimport { FilterCases } from \"./FilterCases\";\r\nimport { FilterPopulation } from \"./FilterPopulation\";\r\nimport { FilterRegion } from \"./FilterRegion\";\r\n\r\n// context\r\nimport { statesContext } from \"../../../context/statesContext\";\r\n\r\n// styles\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\trootContainer: {\r\n\t\tmaxWidth: 550,\r\n\t\tminWidth: 175,\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\tpadding: 0,\r\n\t\tmargin: 0,\r\n\t},\r\n    tab: {\r\n        opacity: 0.7,\r\n    },\r\n    menuItem: {\r\n        opacity: 0.7,\r\n        \"&:hover\": {\r\n            opacity: 1,\r\n        },\r\n    },\r\n}));\r\n\r\nexport const BatchSelect = props => {\r\n    const { selectedStates, setSelectedStates } = props;\r\n\r\n    // ref and context\r\n\tconst { infoStates } = useContext(statesContext);\r\n\r\n    // assign\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const [selectedFilter, setSelectedFilter] = useState(null);\r\n\r\n\t// style\r\n\tconst theme = useTheme();\r\n\tconst classes = useStyles();\r\n\tconst mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\t\r\n\tconst handleSelectedFilter = (newSelectedFilter) => {\r\n\t\tsetSelectedFilter(newSelectedFilter);\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\tconst handleFilterCategories = (newFilter, info) => {\r\n        const filtered = Object.keys(info).filter(\r\n            s => info[s][newFilter.chartParam] === newFilter.name\r\n\t\t);\r\n\r\n\t\tlet newSelection = {};\r\n\t\tObject.keys(info).forEach(s => {\r\n\t\t\tif (filtered.includes(s)) {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: true}\r\n\t\t\t} else {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: false}\r\n\t\t\t}\r\n\t\t});\r\n\r\n        return newSelection;\r\n    };\r\n\t\r\n    const handleFilterValues = (newFilter, info) => {\r\n\t\tconst n = newFilter.n;\r\n\t\tlet filtered;\r\n\r\n\t\tfiltered = Object.keys(info)\r\n\t\t.sort((a, b) =>\r\n\t\t\tnewFilter.sort === \"descending\"\r\n\t\t\t\t? info[b][newFilter.chartParam] -\r\n\t\t\t\t\tinfo[a][newFilter.chartParam]\r\n\t\t\t\t: info[a][newFilter.chartParam] -\r\n\t\t\t\t\tinfo[b][newFilter.chartParam]\r\n\t\t)\r\n\t\t.slice(0, n);\r\n\t\t\t\r\n\t\tlet newSelection = {};\r\n\t\tObject.keys(info).forEach(s => {\r\n\t\t\tif (filtered.includes(s)) {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: true}\r\n\t\t\t} else {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: false}\r\n\t\t\t}\r\n\t\t});\r\n\r\n        return newSelection;\r\n    };\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (selectedFilter) {\r\n\t\t\tconst newSelection = selectedFilter.n \r\n\t\t\t\t? handleFilterValues(selectedFilter, infoStates)\r\n\t\t\t\t: handleFilterCategories(selectedFilter, infoStates);\r\n\t\t\tsetSelectedStates(newSelection);\r\n\t\t}\r\n\t},[selectedFilter]);\r\n\r\n    return (\r\n\t\t<Grid container className={classes.rootContainer}\r\n\t\t\tstyle={mqSmall\r\n\t\t\t? {flexDirection: \"column\", alignItems: \"center\"}\r\n\t\t\t: {flexDirection: \"row\"}}\r\n\t\t>\r\n\t\t\t<FilterCases\r\n\t\t\t\taria-controls=\"cases-btn\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tclassName={classes.tab}\r\n\t\t\t\tnStates={12}\r\n\t\t\t\tselectedStates={selectedStates}\r\n\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t/>\r\n\t\t\t<FilterPopulation\r\n\t\t\t\taria-controls=\"population-btn\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tclassName={classes.tab}\r\n\t\t\t\tnStates={12}\r\n\t\t\t\tselectedStates={selectedStates}\r\n\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t/>\r\n\t\t\t<FilterRegion\r\n\t\t\t\taria-controls=\"region-btn\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tclassName={classes.tab}\r\n\t\t\t\tselectedStates={selectedStates}\r\n\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t/>\r\n        </Grid>\r\n    );\r\n};","import React from \"react\";\r\n\r\n// components\r\nimport { SectionTitle } from \"../../sharedComponents/SectionTitle\";\r\n\r\n// styles\r\nimport {\r\n    IconButton,\r\n    FormControlLabel,\r\n    FormGroup,\r\n    Checkbox,\r\n    Divider,\r\n} from \"@material-ui/core\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tsectionTitleTypography: {\r\n\t\tcolor: theme.palette.text.primary,\r\n\t\tfontWeight: 700\r\n\t},\r\n\tdrawerBody: {\r\n\t\talignText: \"left\",\r\n\t\tpaddingLeft: theme.spacing(3),\r\n\t},\r\n\tselectAllButton: {\r\n\t\tcolor: \"green\",\r\n\t\t\"&:hover\": {\r\n\t\t\tbackgroundColor: \"transparent\"\r\n\t\t},\r\n\t},\r\n\tdeselectAllButton: {\r\n\t\tcolor: \"red\",\r\n\t\t\"&:hover\": {\r\n\t\t\tbackgroundColor: \"transparent\"\r\n\t\t},\r\n\t},\r\n\tstateLabelSelected: {\r\n\t\tfontSize: \".9rem\",\r\n\t},\r\n\tstateLabelNotSelected: {\r\n\t\tcolor: \"gray\",\r\n\t\topacity: 0.7,\r\n\t\tfontSize: \".9rem\",\r\n\t},\r\n}))\r\n\r\nexport const Dashboard = props => {\r\n    const {\r\n        selectedStates,\r\n        handleSelectedStates,\r\n        handleSelectAllStates,\r\n        handleDeselectAllStates,\r\n    } = props;\r\n\r\n\tconst classes = useStyles();\r\n    const theme = useTheme();\r\n\r\n    return (\r\n        <div>\r\n\t\t\t<SectionTitle divider classes={{typography: classes.sectionTitleTypography}}>\r\n\t\t\t\tSelections\r\n\t\t\t</SectionTitle>\r\n            <FormGroup className={classes.drawerBody}>\r\n                <FormControlLabel\r\n                    id=\"select-all\"\r\n                    label=\"Select All\"\r\n                    name=\"Select All\"\r\n                    onClick={handleSelectAllStates}\r\n                    control={\r\n                        <IconButton\r\n                            id=\"selector-all\"\r\n                            name=\"select-all\"\r\n                            className={classes.selectAllButton}\r\n                        >\r\n                            <CheckIcon />\r\n                        </IconButton>\r\n                    }\r\n                />\r\n                <FormControlLabel\r\n                    id=\"deselect-all\"\r\n                    label=\"Deselect All\"\r\n                    name=\"Deselect All\"\r\n                    onClick={handleDeselectAllStates}\r\n                    control={\r\n                        <IconButton\r\n                            id=\"deselector-all\"\r\n                            name=\"deselect-all\"\r\n                            className={classes.deselectAllButton}\r\n                        >\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                    }\r\n                />\r\n                <Divider className={classes.divider} />\r\n                {selectedStates ? (\r\n                    Object.keys(selectedStates)\r\n                        .sort()\r\n                        .filter(s => selectedStates[s].selected === true)\r\n                        .map((state, i) => {\r\n                            return (\r\n                                <FormControlLabel\r\n                                    key={i}\r\n                                    id={selectedStates[state].htmlFormat}\r\n                                    name={state}\r\n                                    checked={selectedStates[state].selected}\r\n\t\t\t\t\t\t\t\t\tonChange={handleSelectedStates}\r\n\t\t\t\t\t\t\t\t\tclasses={{label: classes.stateLabelSelected}}\r\n                                    control={\r\n                                        <Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\tname={state}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.stateLabelSelected}\r\n                                            style={{\r\n                                                color:\r\n                                                    selectedStates[state].color,\r\n                                            }}\r\n                                        />\r\n                                    }\r\n                                    label={`${state} (${selectedStates[state].abbreviation})`}\r\n                                />\r\n                            );\r\n                        })\r\n                ) : (\r\n                    <div />\r\n                )}\r\n                <Divider className={classes.divider} />\r\n                {selectedStates ? (\r\n                    Object.keys(selectedStates)\r\n                        .sort()\r\n                        .filter(s => selectedStates[s].selected === false)\r\n                        .map((state, i) => {\r\n                            return (\r\n                                <FormControlLabel\r\n                                    key={i}\r\n                                    id={selectedStates[state].htmlFormat}\r\n                                    name={state}\r\n                                    checked={selectedStates[state].selected}\r\n\t\t\t\t\t\t\t\t\tonChange={handleSelectedStates}\r\n\t\t\t\t\t\t\t\t\tclasses={{label: classes.stateLabelNotSelected}}\r\n                                    control={\r\n                                        <Checkbox\r\n                                            name={state}\r\n                                            className={classes.stateLabelNotSelected}\r\n                                        />\r\n                                    }\r\n                                    label={`${state} (${selectedStates[state].abbreviation})`}\r\n                                />\r\n                            );\r\n                        })\r\n                ) : (\r\n                    <div />\r\n                )}\r\n            </FormGroup>\r\n        </div>\r\n    );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n    AppBar,\r\n    Toolbar,\r\n    IconButton,\r\n    ClickAwayListener,\r\n    Drawer,\r\n    Divider,\r\n    Menu,\r\n\tTooltip,\r\n\tuseMediaQuery\r\n} from \"@material-ui/core\";\r\nimport clsx from \"clsx\";\r\n\r\n// components\r\nimport { BatchSelect } from \"../pickers/BatchSelect\";\r\nimport { Dashboard } from \"../pickers/Dashboard\";\r\nimport { Settings } from \"../../Settings\";\r\nimport { ChartPicker } from \"../../sharedComponents/ChartPicker\";\r\n\r\n// styles\r\nimport { Button, MenuList } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n\t\tdisplay: \"flex\",\r\n    },\r\n    appBar: {\r\n\t\tbackgroundColor: theme.palette.background.dark,\r\n\t\tcolor: theme.palette.text.primary,\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    menuButton: {\r\n        color: theme.palette.text.primary,\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n    hide: {\r\n        display: \"none\",\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n\t\tflexShrink: 1,\r\n\t\tbackgroundColor: theme.palette.background.default,\r\n\t\tcolor: theme.palette.text.primary,\r\n\t},\r\n    drawerPaper: {\r\n\t\twidth: drawerWidth,\r\n\t\tbackgroundColor: theme.palette.background.default,\r\n    },\r\n    drawerHeader: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        padding: theme.spacing(0, 1),\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: \"flex-end\",\r\n        backgroundColor: theme.palette.background.default,\r\n    },\r\n    tab: {\r\n        opacity: 0.7,\r\n    },\r\n    menuItem: {\r\n        opacity: 0.7,\r\n        \"&:hover\": {\r\n            opacity: 1,\r\n        },\r\n    },\r\n}));\r\n\r\nexport const Navbar = props => {\r\n    const [open, setOpen] = useState(false);\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\tconst [mobileOpen, setMobileOpen] = useState(false);\r\n\t\r\n\tconst theme = useTheme();\r\n\tconst classes = useStyles();\r\n\tconst mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n\t};\r\n\r\n\tconst handleOptions = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\r\n    const handleClickAway = e => {\r\n        if (e.x > drawerWidth && e.y > 70 && open) {\r\n            setOpen(false);\r\n        }\r\n    };\r\n\r\n    const handleFilterMenu = e => {\r\n        !anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar\r\n                position=\"relative\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar>\r\n                    <IconButton\r\n                        onClick={handleDrawerOpen}\r\n                        className={clsx(\r\n                            classes.menuButton,\r\n                            open && classes.hide\r\n                        )}\r\n                        disableRipple\r\n                    >\r\n                        <MenuIcon className={classes.menuButton} />\r\n                    </IconButton>\r\n\t\t\t\t\t{mqSmall\r\n\t\t\t\t\t\t? <>\r\n\t\t\t\t\t\t\t<Tooltip title=\"Chart filters\"> \r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tid=\"filters-btn-cc\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleFilterMenu}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<AssessmentIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"filters-btn-cc\") : false}\r\n\t\t\t\t\t\t\t\tonClose={handleFilterMenu}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<BatchSelect handleFilterMenu={handleFilterMenu} {...props} />\r\n\t\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t\t</> \r\n\t\t\t\t\t\t: <BatchSelect {...props} />\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t<span style={{ marginLeft: \"auto\" }}>\r\n\t\t\t\t\t\t<Button id=\"options-btn-cc\" onClick={handleOptions}>\r\n\t\t\t\t\t\t\tOptions\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"options-btn-cc\") : false}\r\n\t\t\t\t\t\t\tonClose={handleOptions}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<MenuList style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t\t\t\t<ChartPicker />\r\n\t\t\t\t\t\t\t\t<Settings />\r\n\t\t\t\t\t\t\t</MenuList>\r\n\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t</span>\r\n\r\n                </Toolbar>\r\n            </AppBar>\r\n            <ClickAwayListener onClickAway={handleClickAway}>\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    anchor=\"left\"\r\n                    open={open}\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                >\r\n                    <div\r\n                        className={classes.drawerHeader}\r\n                    >\r\n                        <IconButton\r\n                            color=\"inherit\"\r\n                            edge=\"end\"\r\n                            onClick={handleDrawerClose}\r\n                            style={{\r\n                                color: theme.palette.primary.contrastText,\r\n                            }}\r\n                        >\r\n                            <ChevronLeftIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <Dashboard {...props} />\r\n                </Drawer>\r\n            </ClickAwayListener>\r\n\t\t</div>\r\n    );\r\n};\r\n","// Chart params: define params for drawing axes and chart\r\nexport const chartParams = {\r\n\tchartType: \"line\",\r\n\ttoTimestamp: null,\r\n\tmultiple: true,\r\n\tnormalize: true,\r\n\txParam: { // x-axis\r\n\t\ttype: 'linear',\r\n\t\tformat: 'number',\r\n\t\tselected: 'dayOfOutbreak',\r\n\t\talt1: null,\r\n\t\toptions: [\r\n\t\t\t\"dayOfOutbreak\",\r\n\t\t]\r\n\t},\r\n\tyParam: { // y-axis\r\n\t\ttype: 'linear',\r\n\t\tformat: 'number',\r\n\t\tselected: 'casesPerThousand',\r\n\t\talt1: 'deathsPerThousand',\r\n\t\toptions: [ \r\n\t\t\t\"casesPerThousand\",\r\n\t\t\t\"cases\",\r\n\t\t\t\"deathsPerThousand\",\r\n\t\t\t\"deaths\"\r\n\t\t],\r\n\t},\r\n\tzParam: {// z-axis (3rd dimension) (eg. size)\r\n\t\ttype: null,\r\n\t\tformat: null,\r\n\t\tselected: null,\r\n\t\toptions: [ \r\n\t\t\tnull\r\n\t\t]\r\n\t},\r\n\tcParam: { // color axis (categorical/ordinal data) (eg. gender, birthplace, etc.)\r\n\t\ttype: \"categorical\",\r\n\t\tselected: \"region\",\r\n\t\toptions: [ \r\n\t\t\t\"region\",\r\n\t\t\t\"division\",\r\n\t\t\t\"governor\"\r\n\t\t],\r\n\t},\r\n\ttParam: { // time axis (4th dimension) (ie. for animated charts)\r\n\t\ttype: null,\r\n\t\tselected: null,\r\n\t\toptions: [\r\n\t\t\tnull\r\n\t\t]\r\n\t},\r\n};\r\n\r\n// Label params:\r\nexport const labelParams = {\r\n\tchartTitle: \"COVID-19 State Comparison\",\r\n\txLabel: \"Cases per Thousand\",\r\n\tyLabel: \"Deaths per Thousand\"\r\n};","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\n\r\n// components\r\nimport { ChartCovidCompare } from \"./chart/ChartCovidCompare\";\r\nimport { Navbar } from './interface/Navbar';\r\n\r\n// params\r\nimport { chartParams, labelParams } from \"./appParams\";\r\n\r\n// context\r\nimport { statesContext } from \"../../context/statesContext\";\r\n\r\n// styles\r\nimport { Grid, useMediaQuery } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const AppCovidCompare = ({ wrapper, bounds }) => {\r\n\tconst { infoStates } = useContext(statesContext);\r\n\r\n\tconst [selectedStates, setSelectedStates] = useState(null);\r\n\r\n\tconst mqOrientPortrait = useMediaQuery(\"(orientation: portrait)\");\r\n\r\n\tconst useStyles = makeStyles((theme) => ({\r\n\t\tcontainer: {\r\n\t\t\tpadding: 0,\r\n\t\t\twidth: \"100%\",\r\n\t\t\theight: \"100%\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: () => mqOrientPortrait\r\n\t\t\t\t\t? \"row\"\r\n\t\t\t\t\t: \"column\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t},\r\n\t\titem: {\r\n\t\t\twidth: \"100%\",\r\n\t\t\tflexBasis: \"100%\"\r\n\t\t}\r\n\t}));\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleSelectedStates = (e) => {\r\n        setSelectedStates({\r\n            ...selectedStates,\r\n            [e.target.name]: {\r\n                ...selectedStates[e.target.name],\r\n                selected: e.target.checked\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleSelectAllStates = (e) => {\r\n        const revisedStates = {}\r\n        Object.keys(selectedStates).forEach((s,i) => {\r\n            revisedStates[s] = {\r\n                ...selectedStates[s],\r\n                selected: true\r\n            }\r\n        });\r\n        setSelectedStates(revisedStates);\r\n    };\r\n\r\n    const handleDeselectAllStates = (e) => {\r\n        const revisedStates = {}\r\n        Object.keys(selectedStates).forEach((s,i) => {\r\n            revisedStates[s] = {\r\n                ...selectedStates[s],\r\n                selected: false\r\n            }\r\n         });\r\n        setSelectedStates(revisedStates);\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (infoStates) {\r\n\t\t\tsetSelectedStates(infoStates);\r\n\t\t}\r\n\t }, [infoStates]);\r\n\r\n  return (\r\n    <Grid className={classes.container}>\r\n\t\t<MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n\t\t\t<Grid item className={classes.item}>\r\n\t\t\t\t<Navbar \r\n\t\t\t\t\tstyle={{width: \"100%\"}}\r\n\t\t\t\t\tchartParams={chartParams}\r\n\t\t\t\t\tselectedStates={selectedStates} \r\n\t\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\t\thandleSelectedStates={handleSelectedStates}\r\n\t\t\t\t\thandleSelectAllStates={handleSelectAllStates}\r\n\t\t\t\t\thandleDeselectAllStates={handleDeselectAllStates}\r\n\t\t\t\t/>\r\n\t\t\t\t<ChartCovidCompare\r\n\t\t\t\t\tchartParams={chartParams}\r\n\t\t\t\t\tlabelParams={labelParams}\r\n\t\t\t\t\tselectedStates={selectedStates} \r\n\t\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\t\twrapper={wrapper}\r\n\t\t\t\t\tbounds={bounds}\r\n\t\t\t\t/>\r\n\t\t\t</Grid>\r\n\t\t</MuiPickersUtilsProvider>\r\n    </Grid>\r\n  );\r\n};","export const wrapper = {\r\n\twrapperWidth: window.innerWidth * .9,\r\n\twrapperHeight: window.innerHeight * .9,\r\n\tmargin: { \r\n\t\ttop: 40,\r\n\t\tright: 40,\r\n\t\tbottom: 130,\r\n\t\tleft: 60\r\n\t}\r\n  };\r\n  \r\nexport const bounds = {\r\n\twidth: wrapper.wrapperWidth - wrapper.margin.left - wrapper.margin.right,\r\n\theight: wrapper.wrapperHeight - wrapper.margin.top - wrapper.margin.bottom,\r\n};","import { createMuiTheme } from \"@material-ui/core/styles\";\r\n\r\nconst lightTheme = {\r\n\tpalette: {\r\n\t\ttype: \"light\",\r\n\t\tprimary: {\r\n\t\t\tmain: \"#03a9f4\",\r\n\t\t\tcontrastText: \"#29293d\",\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#ff9800\",\r\n\t\t},\r\n\t\tbackground: {\r\n\t\t\tdefault: \"#fff\",\r\n\t\t\tpaper: \"#fff\",\r\n\t\t\tlight: \"#fff\",\r\n\t\t\tdark: \"#fff\",\r\n\t\t},\r\n\t\ttext: {\r\n\t\t\tprimary: \"#29293d\",\r\n\t\t},\r\n\t},\r\n};\r\n\r\nconst darkTheme = {\r\n\tpalette: {\r\n\t\ttype: \"dark\",\r\n\t\tprimary: {\r\n\t\t\tmain: \"#4db6ac\",\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#ffa07a\",\r\n\t\t},\r\n\t\tbackground: {\r\n\t\t\tdefault: \"#29293d\",\r\n\t\t\tpaper: \"#29293d\",\r\n\t\t\tlight: \"#493f5e\",\r\n\t\t\tdark: \"#000018\",\r\n\t\t},\r\n\t\ttext: {\r\n\t\t\tprimary: \"#fff\",\r\n\t\t},\r\n\t},\r\n};\r\n\r\nexport const theme = createMuiTheme({\r\n    typography: {\r\n        fontFamily: [\"ralewaymedium\", \"Helvetica\", \"Arial\", \"sans-serif\"].join(\r\n            \",\"\r\n        ),\r\n    },\r\n    overrides: {\r\n        MuiInputBase: {\r\n            root: {\r\n\t\t\t\tcolor: \"#fff\",\r\n                maxWidth: 115,\r\n                paddingLeft: 10,\r\n            },\r\n        },\r\n    },\r\n});\r\n\r\nexport const getTheme = (theme, darkMode) => {\r\n\tif (darkMode) {\r\n \t\treturn createMuiTheme({\r\n\t\t\t...theme,\r\n\t\t\tpalette: {\r\n\t\t\t\t...darkTheme.palette,\r\n\t\t\t},\r\n\t\t});\t\t\r\n\t} else {\r\n\t\treturn createMuiTheme({\r\n\t\t\t...theme,\r\n\t\t\tpalette: {\r\n\t\t\t\t...lightTheme.palette,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n  }","export const colors = [\r\n\t\"#7FFFD4\",\r\n\t\"#8EE5EE\",\r\n\t\"#76EE00\",\r\n\t\"#D2691E\",\r\n\t\"#FF7F50\",\r\n\t\"#00CDCD\",\r\n\t\"#DC143C\",\r\n\t\"#00EE00\",\r\n\t\"#00EE76\",\r\n\t\"#8B5A2B\",\r\n\t\"#EE5C42\",\r\n\t\"#00C5CD\",\r\n\t\"#EE3A8C\",\r\n\t\"#9ACD32\",\r\n\t\"#43CD80\",\r\n\t\"#EE0000\",\r\n\t\"#7D26CD\",\r\n\t\"#EE9A00\",\r\n\t\"#C71585\",\r\n\t\"#9F79EE\",\r\n\t\"#8B5742\",\r\n\t\"#CDC673\",\r\n\t\"#218868\",\r\n\t\"#CD5555\",\r\n\t\"#CD9B1D\",\r\n\t\"#79CDCD\",\r\n\t\"#9BCD9B\",\r\n\t\"#FF7F00\",\r\n\t\"#EE3B3B\",\r\n\t\"#BF3EFF\",\r\n\t\"#00CED1\",\r\n\t\"#EE1289\",\r\n\t\"#228B22\",\r\n\t\"#CDAD00\",\r\n\t\"#00CD00\",\r\n\t\"#EE6AA7\",\r\n\t\"#CD5555\",\r\n\t\"#CD8C95\",\r\n\t\"#20B2AA\",\r\n\t\"#CD8162\",\r\n\t\"#CDCDB4\",\r\n\t\"#CD00CD\",\r\n\t\"#E066FF\",\r\n\t\"#00FA9A\",\r\n\t\"#C71585\",\r\n\t\"#FF4500\",\r\n\t\"#EE799F\",\r\n\t\"#CD96CD\",\r\n\t\"#912CEE\",\r\n\t\"#EEB4B4\",\r\n\t\"#4EEE94\"\r\n  ];","import React, { useState, useEffect } from \"react\";\r\nimport { Route, Redirect, Switch } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\n\r\n// data\r\nimport USStates from \"./data/us-states.csv\";\r\nimport stateInfo from \"./data/stateInfo.json\";\r\n\r\n// components\r\nimport { AppGapminder } from \"./components/appGapminder/AppGapminder\";\r\nimport { AppCovidCompare } from \"./components/appCovidCompare/AppCovidCompare\";\r\n\r\n// context\r\nimport { dataContext } from \"./context/dataContext\";\r\nimport { statesContext } from \"./context/statesContext\";\r\nimport { ThemeContext } from \"./context/ThemeContext\";\r\n\r\n// styles\r\nimport { wrapper, bounds } from \"./styles/dimensions\";\r\nimport { theme, getTheme } from \"./styles/theme\";\r\nimport { colors } from \"./styles/colors\";\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { CssBaseline } from \"@material-ui/core\";\r\n\r\nfunction App() {\r\n    const [dataStates, setDataStates] = useState([]);\r\n    const [infoStates, setInfoStates] = useState(null);\r\n\tconst [darkMode, setDarkMode] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // clean stateInfo data and assign selectedStates\r\n        const dateParser = d3.timeParse(\"%m-%d-%y\");\r\n        const revisedStates = {};\r\n\r\n        Object.keys(stateInfo).forEach((s, i) => {\r\n            revisedStates[s] = {\r\n                ...stateInfo[s],\r\n                lockdown: stateInfo[s].lockdown.startsWith(\"none\")\r\n                    ? stateInfo[s].lockdown\r\n                    : dateParser(stateInfo[s].lockdown),\r\n                lockdownEnd: stateInfo[s].lockdownEnd.startsWith(\"none\")\r\n                    ? stateInfo[s].lockdownEnd\r\n                    : dateParser(stateInfo[s].lockdownEnd),\r\n                color: colors[i],\r\n            };\r\n        });\r\n\r\n        const nested = d3\r\n            .nest()\r\n            .key(d => d.state)\r\n            .entries(dataStates);\r\n\r\n        Object.keys(nested).forEach(i => {\r\n            const s = nested[i].key;\r\n\r\n            const lastIndex = nested[i].values.length - 1;\r\n            const latestCaseCount = nested[i].values[lastIndex].cases;\r\n            const latestCaseCountPerThou =\r\n                (nested[i].values[lastIndex].cases / stateInfo[s].population) *\r\n                1000;\r\n\r\n            revisedStates[s] = {\r\n                ...revisedStates[s],\r\n                latestCaseCount: latestCaseCount,\r\n                latestCaseCountPerThou: latestCaseCountPerThou,\r\n            };\r\n        });\r\n        setInfoStates(revisedStates);\r\n    }, [dataStates]);\r\n\r\n    useEffect(() => {\r\n        // get COVID-19 state data\r\n        d3.csv(USStates).then(data => {\r\n            // clean data\r\n            const dateParser = d3.timeParse(\"%Y-%m-%d\");\r\n\r\n            data.forEach(d => {\r\n                d.date = dateParser(d.date);\r\n                d.fips = parseInt(d.fips);\r\n                d.cases = parseInt(d.cases);\r\n                d.deaths = parseInt(d.deaths);\r\n            });\r\n\r\n            // Filter data:\r\n            // Prior to 02-27-20, Washington had 1 or 2 cases from January.\r\n            // However, these were isolated cases and this graph is trying to track Covid-19 spread\r\n            // Also filter out territories Guam, Puerto Rico, etc.\r\n            data = data.filter(\r\n                d =>\r\n                    d.date > new Date(2020, 1, 26) &&\r\n                    Object.keys(stateInfo).includes(d.state)\r\n            );\r\n\r\n            // Normalize data:\r\n            // Add \"dayOfOutbreak\" to show elapsed time\r\n            // Add state population\r\n            // Add \"casesPerThousand\", \"deathsPerThousand\", \"mortalityRate\"\r\n            Object.keys(stateInfo).forEach(state => {\r\n                const stateData = data.filter(d => d.state === state);\r\n                stateData.forEach(d => {\r\n                    d.dayOfOutbreak =\r\n                        (d.date - stateData[0].date) /\r\n                            (24 * 60 * 60 * 10 * 10 * 10) +\r\n                        1; // day - day one, convert ms to days\r\n                    d.casesPerThousand =\r\n                        (d.cases / stateInfo[state].population) * 1000;\r\n                    d.deathsPerThousand =\r\n                        (d.deaths / stateInfo[state].population) * 1000;\r\n                    d.mortalityRate = (d.deaths / d.cases) * 100;\r\n                });\r\n            });\r\n            setDataStates(data);\r\n            console.log(\"imported dataset\");\r\n        });\r\n\t}, []);\r\n\r\n    return (\r\n        <>\r\n\t\t\t<ThemeContext.Provider value={{ darkMode, setDarkMode }}>\r\n            <ThemeProvider theme={getTheme(theme, darkMode)}>\r\n                <CssBaseline />\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                    <dataContext.Provider value={{ dataStates, setDataStates }}>\r\n                        <statesContext.Provider\r\n                            value={{ infoStates, setInfoStates }}\r\n                        >\r\n\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\tpath=\"/line-app\"\r\n\t\t\t\t\t\t\t\tclassName=\"line-app\"\r\n\t\t\t\t\t\t\t\tcomponent={() => <AppCovidCompare wrapper={wrapper} bounds={bounds} />}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\tpath=\"/gapminder-app\"\r\n\t\t\t\t\t\t\t\tclassName=\"gapminder-app\"\r\n\t\t\t\t\t\t\t\trender={() => <AppGapminder />}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t<Redirect exact from=\"/\" to=\"/gapminder-app\" />\r\n\t\t\t\t\t\t\t</Switch>\r\n                        </statesContext.Provider>\r\n                    </dataContext.Provider>\r\n                </MuiPickersUtilsProvider>\r\n            </ThemeProvider>\r\n\t\t\t</ThemeContext.Provider>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n    <HashRouter>\r\n        <App />\r\n    </HashRouter>,\r\n    document.getElementById(\"root\")\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}