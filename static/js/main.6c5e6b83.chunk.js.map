{"version":3,"sources":["data/us-states.csv","components/Footnotes.js","components/appGapminder/appParams.js","context/dataContext.js","context/statesContext.js","context/selectionContext.js","components/appGapminder/chart/CirclesGapminder.js","components/appGapminder/interface/OpacitySlider.js","components/appGapminder/interface/DayCounterSlider.js","components/appGapminder/chart/ChartGapminder.js","components/appGapminder/pickers/ParamPicker.js","components/appGapminder/interface/ParamDashboard.js","components/appGapminder/interface/ChartPicker.js","components/appGapminder/pickers/DeselectAll.js","components/appGapminder/pickers/FilterRegion.js","components/appGapminder/pickers/FilterGovernor.js","components/appGapminder/pickers/FilterPopulation.js","components/appGapminder/pickers/FilterGdp.js","components/appGapminder/pickers/FilterBatch.js","components/appGapminder/pickers/SelectedStatus.js","components/appGapminder/pickers/NumberPicker.js","components/appGapminder/interface/FilterDashboard.js","components/appGapminder/interface/MenuDrawer.js","components/appGapminder/interface/Navbar.js","components/appGapminder/gapminderData.js","components/appGapminder/styles/dimensions.js","components/appGapminder/AppGapminder.js","components/util/constants.js","components/util/MouseMove.js","components/appCovidCompare/chart/Line.js","components/appCovidCompare/chart/ChartCovidCompare.js","components/appCovidCompare/components/FilterValues.js","components/appCovidCompare/pickers/FilterCases.js","components/appCovidCompare/pickers/FilterPopulation.js","components/appCovidCompare/components/FilterCategories.js","components/appCovidCompare/pickers/FilterRegion.js","components/appCovidCompare/pickers/BatchSelect.js","components/appCovidCompare/pickers/Dashboard.js","components/appCovidCompare/interface/Navbar.js","components/appCovidCompare/appParams.js","components/appCovidCompare/AppCovidCompare.js","styles/dimensions.js","styles/theme.js","styles/colors.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Footnotes","props","darkMode","setDarkMode","classes","makeStyles","theme","rootGrid","maxWidth","window","innerWidth","margin","footerButton","color","palette","text","secondary","marginRight","useStyles","useTheme","pathArray","location","href","split","queryID","length","Grid","container","className","item","Tooltip","title","placement","IconButton","onClick","saveSvgAsPng","document","querySelector","backgroundColor","background","default","encoderOptions","fonts","url","format","chartParams","chartType","toTimestamp","multiple","normalize","xParam","output","type","selected","alt1","options","yParam","zParam","cParam","tParam","cParamCategories","region","division","governor","dataContext","React","createContext","statesContext","selectionContext","CirclesGapminder","data","dayCounter","selector","scales","opacityNotSel","xScale","yScale","colorScale","infoStates","useContext","selectedCircles","setSelectedCircles","circlesRef","useRef","circle","stroke","opacity","circleSelected","strokeWidth","circleLabel","fill","primary","fontSize","bisectDay","d3","left","dataAt","day","map","d","state","valueAt","values","i","a","b","t","useEffect","current","selectAll","join","sort","attr","htmlFormat","includes","call","append","casesPerThousand","toFixed","cases","toLocaleString","deathsPerThousand","deaths","on","mouseOverCircle","style","mouseOutCircle","notSelected","filter","s","label","abbreviation","ref","OpacitySlider","setOpacityNotSel","Typography","variant","Slider","id","value","valueLabelDisplay","step","min","max","onChange","e","newVal","DayCounterSlider","setDayCounter","ChartGapminder","wrapper","bounds","wrapperWidth","wrapperHeight","width","height","dataStates","useState","setScales","mqSmall","useMediaQuery","breakpoints","down","rootSVG","display","position","verticalAlign","overflow","chartTitle","textAnchor","fontWeight","chartSubtitle","chartWrapper","top","axes","legend","contrastText","sliderContainer","flexDirection","justifyContent","alignItems","slider","svgRef","boundsRef","yAxisRef","xAxisRef","legendRef","domain","range","yAxisGenerator","scale","xAxisGenerator","axis","enter","transition","duration","update","exit","remove","renderChart","viewBox","transform","rootContainer","minWidth","padding","filterSelector","filterMenuItem","ParamPicker","handleSelector","Object","keys","p","FormControl","key","InputLabel","Select","name","o","MenuItem","menuButton","ParamDashboard","handleParamMenu","anchorEl","Menu","open","Boolean","onClose","List","ChartPicker","component","DeselectAll","handleDeselectAll","FormControlLabel","deselectAll","control","deselectAllButton","regionOptions","chartParam","FilterRegion","forwardRef","handleFilter","setAnchorEl","handleMenu","currentTarget","dense","marginLeft","FilterGovernor","FilterPopulation","nStates","populationOptions","n","FilterGdp","gdpOptions","button","chipContainer","listStyle","main","chip","spacing","FilterBatch","filters","handleDeleteFilter","handleFilters","currSelection","forEach","newFilter","filtered","handleFilterCategories","slice","handleFilterValues","prevState","all","Button","MenuList","Paper","f","Chip","size","onDelete","SelectedStatus","handleChange","dashboardTitle","Divider","dashboardDivider","checked","Checkbox","NumberPicker","setNStates","TextField","InputProps","inputProps","defaultValue","target","marginBottom","filterBatch","FilterDashboard","setFilters","FormGroup","deletedFilter","newFilterList","drawer","flexShrink","drawerPaper","paddingLeft","drawerHeader","mixins","toolbar","MenuDrawer","handleDrawer","handleClickAway","ClickAwayListener","onClickAway","Drawer","anchor","paper","edge","root","appBar","transitions","create","easing","sharp","leavingScreen","appBarShift","easeOut","enteringScreen","hide","Navbar","setOpen","AppBar","clsx","Toolbar","disableRipple","x","y","gapminderData","stateInfo","newData","eachState","push","innerHeight","right","bottom","AppGapminder","setData","setSelector","navbar","then","res","Provider","param","date","dateFormatter","dateParser","dimensions","MouseMove","focus","overlay","linesStates","selectedStates","dayOfOutbreak","x0","invert","this","bisectDate","dataEachState","stateHTML","dataEachStateRangeY","dataEachStateRangeX","dataEachStateRangeDate","dataEachStateRangeCases","frozen","select","Line","mqMedium","up","mqLarge","setLinesStates","filterStates","statesObject","lineGenerator","linesObject","lastDayOfOutbreak","lastCasesPerThousand","lockdownDay","lockdown","lockdownDayDatum","line","lineLabelX","lineLabelY","lockdownMarkerX","lockdownMarkerY","xShift","yShift","strokeLinejoin","strokeLinecap","r","cx","cy","fontFamily","ChartCovidCompare","axisLabel","footnotes","FilterValues","filterOptions","handleSelectedFilter","FilterCases","FilterCategories","tab","menuItem","BatchSelect","setSelectedStates","selectedFilter","setSelectedFilter","newSelectedFilter","newSelection","info","aria-controls","aria-haspopup","Dashboard","handleSelectedStates","handleSelectAllStates","handleDeselectAllStates","handleFilterMenu","labelParams","xLabel","yLabel","AppCovidCompare","mqOrientPortrait","flexBasis","utils","DateFnsUtils","revisedStates","createMuiTheme","contrastThreshold","typography","overrides","MuiFormControlLabel","textColor","MuiButton","MuiBase","MuiInputBase","MuiPickersCalendarHeader","switchHeader","MuiPickersDay","daySelected","dayDisabled","getTheme","input","colors","App","setDataStates","setInfoStates","startsWith","lockdownEnd","nested","entries","lastIndex","latestCaseCount","latestCaseCountPerThou","population","USStates","fips","parseInt","Date","stateData","mortalityRate","console","log","ThemeProvider","CssBaseline","path","render","exact","from","to","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.6c5e6b83.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/us-states.410e7b08.csv\";","import React from \"react\";\r\nimport { saveSvgAsPng } from \"save-svg-as-png\";\r\n\r\n// styles\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport \"../styles/styles.css\";\r\nimport { IconButton, Tooltip, Grid } from \"@material-ui/core\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport Brightness7Icon from \"@material-ui/icons/Brightness7\";\r\n\r\nexport const Footnotes = props => {\r\n    const { darkMode, setDarkMode } = props;\r\n\t\r\n    const useStyles = makeStyles(theme => ({\r\n        rootGrid: {\r\n            maxWidth: window.innerWidth,\r\n\t\t\tmargin: \"0 auto\",\r\n        },\r\n        footerButton: {\r\n            color: theme.palette.text.secondary,\r\n            marginRight: \"auto\",\r\n        },\r\n    }));\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n\r\n    const pathArray = window.location.href.split(\"/\");\r\n    const queryID = `#${pathArray[pathArray.length - 1]}`;\r\n\r\n    const saveImage = () => {\r\n        saveSvgAsPng(document.querySelector(queryID), \"covid-19_chart.png\", {\r\n            backgroundColor: theme.palette.background.default,\r\n            encoderOptions: 1,\r\n            fonts: [\r\n                {\r\n                    url:\r\n                        \"../../styles/ralewaymedium/raleway-medium-webfont.woff\",\r\n                    format: \"application/font-woff\",\r\n                    text:\r\n                        \"@font-face {font-family: 'ralewaymedium'; src: url('./ralewaymedium/raleway-medium-webfont.woff2') format('woff2'), url('./ralewaymedium/raleway-medium-webfont.woff') format('woff'); font-weight: normal;font-style: normal;}\",\r\n                },\r\n            ],\r\n        });\r\n\t};\r\n\r\n    return (\r\n        <Grid container className={classes.rootGrid}>\r\n            <Grid item>\r\n                <Tooltip title=\"Save chart as image\" placement=\"right\">\r\n                    <IconButton\r\n                        onClick={saveImage}\r\n                        className={classes.footerButton}\r\n                    >\r\n                        <SaveIcon />\r\n                    </IconButton>\r\n                </Tooltip>\r\n            </Grid>\r\n            <Grid item>\r\n                <Tooltip title=\"Toggle dark/light theme\" placement=\"right\">\r\n                    <IconButton\r\n                        onClick={() => setDarkMode(!darkMode)}\r\n                        className={classes.footerButton}\r\n                    >\r\n                        <Brightness7Icon />\r\n                    </IconButton>\r\n                </Tooltip>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};","export const chartParams = {\r\n\tchartType: \"bubble\",\r\n\ttoTimestamp: null,\r\n\tmultiple: true,\r\n\tnormalize: true,\r\n\txParam: { // x-axis\r\n\t\toutput: 'x-axis',\r\n\t\ttype: 'linear',\r\n\t\tformat: 'none',\r\n\t\tselected: 'casesPerThousand',\r\n\t\talt1: 'cases',\r\n\t\toptions: [\r\n\t\t\t\"casesPerThousand\",\r\n\t\t\t\"cases\",\r\n\t\t\t\"deathsPerThousand\",\r\n\t\t\t\"deaths\"\r\n\t\t]\r\n\t},\r\n\tyParam: { // y-axis\r\n\t\toutput: 'y-axis',\r\n\t\ttype: 'linear',\r\n\t\tformat: 'none',\r\n\t\tselected: 'deathsPerThousand',\r\n\t\talt1: 'deaths',\r\n\t\toptions: [ \r\n\t\t\t\"casesPerThousand\",\r\n\t\t\t\"cases\",\r\n\t\t\t\"deathsPerThousand\",\r\n\t\t\t\"deaths\"\r\n\t\t], \r\n\t},\r\n\tzParam: {// z-axis (3rd dimension) (eg. size)\r\n\t\toutput: 'circle-area',\r\n\t\ttype: \"linear\",\r\n\t\tformat: \"none\",\r\n\t\tselected: \"population\",\r\n\t\toptions: [ \r\n\t\t\t\"population\",\r\n\t\t\t\"populationDensity\",\r\n\t\t\t\"gdp\",\r\n\t\t\t\"none\"\r\n\t\t]\r\n\t},\r\n\tcParam: { // color axis (categorical/ordinal data) (eg. gender, birthplace, etc.)\r\n\t\toutput: 'color-grouping',\r\n\t\ttype: \"categorical\",\r\n\t\tselected: \"region\",\r\n\t\toptions: [ \r\n\t\t\t\"region\",\r\n\t\t\t\"division\",\r\n\t\t\t\"governor\"\r\n\t\t],\r\n\t},\r\n\ttParam: { // time axis (4th dimension) (ie. for animated charts)\r\n\t\toutput: 'time',\r\n\t\ttype: 'time',\r\n\t\tselected: \"dayOfOutbreak\",\r\n\t\toptions: [\r\n\t\t\t\"dayOfOutbreak\",\r\n\t\t\t\"date\"\r\n\t\t]\r\n\t},\r\n};\r\n\r\n// Label params:\r\nexport const labelParams = {\r\n\tchartTitle: \"COVID-19 State Comparison\",\r\n\txLabel: \"Cases per Thousand\",\r\n\tyLabel: \"Deaths per Thousand\"\r\n};\r\n\r\n// color param categories\r\nexport const cParamCategories = {\r\n    region: [\"Northeast\", \"Midwest\", \"South\", \"West\"],\r\n    division: [\r\n        \"New England\",\r\n        \"Mid-Atlantic\",\r\n        \"East North Central\",\r\n        \"West North Central\",\r\n        \"South Atlantic\",\r\n        \"East South Central\",\r\n        \"West South Central\",\r\n        \"Mountain\",\r\n        \"Pacific\",\r\n    ],\r\n    governor: [\"Republican\", \"Democrat\", \"n/a\"],\r\n};","import React from 'react';\r\n\r\nconst dataContext = React.createContext();\r\n\r\nexport { dataContext };","import React from 'react';\r\n\r\nconst statesContext = React.createContext();\r\n\r\nexport { statesContext };","import React from 'react';\r\n\r\nexport const selectionContext = React.createContext();\r\n","import React, { useEffect, useContext, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\n// context\r\nimport { statesContext } from '../../../context/statesContext';\r\nimport { selectionContext } from '../../../context/selectionContext';\r\n\r\n// style \r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\n\r\nexport const CirclesGapminder = (props) => {\r\n\tconst { data, dayCounter, selector, scales, opacityNotSel } = props;\r\n\tconst { xParam, yParam, zParam, cParam } = selector;\r\n\tconst { xScale, yScale, colorScale } = scales;\r\n\r\n\t// context and ref\r\n\tconst { infoStates } = useContext(statesContext);\r\n\tconst { selectedCircles, setSelectedCircles } = useContext(selectionContext); \r\n\tconst circlesRef = useRef(null);\r\n\r\n\t// styles\r\n\tconst useStyles = makeStyles((theme) => ({\r\n\t\tcircle: {\r\n\t\t\tstroke: 'none',\r\n\t\t\topacity: opacityNotSel\r\n\t\t},\r\n\t\tcircleSelected: {\r\n\t\t\tstroke: \"#e91e63\",\r\n\t\t\tstrokeWidth: 2,\r\n\t\t\topacity: .8,\r\n\t\t},\r\n\t\tcircleLabel: {\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontSize: \".6rem\",\r\n\t\t},\r\n\t}));\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\r\n\tconst bisectDay = d3.bisector(([d]) => d).left;\r\n\r\n\tfunction dataAt(day) {\r\n\t\treturn data.map(d => ({\r\n\t\t\tstate: d.state,\r\n\t\t\tregion: d.region,\r\n\t\t\t[xParam.selected]: valueAt(d[xParam.selected], day),\r\n\t\t\t[yParam.selected]: valueAt(d[yParam.selected], day)\r\n\t\t}));\r\n\t};\r\n\r\n\tfunction valueAt(values, day) {\r\n\t\tconst i = bisectDay(values, day, 0, values.length - 1);\r\n\t\tconst a = values[i];\r\n\r\n\t\tif (i > 0) {\r\n\t\t\tconst b = values[i - 1];\r\n\t\t\tconst t = (day - a[0]) / (b[0] - a[0]);\r\n\t\t\treturn a[1] * (1 - t) + b[1] * t;\r\n\t\t}\r\n\t\treturn a[1];\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (data) {\r\n\t\t\tconst circle = d3.select(circlesRef.current).selectAll('circle')\r\n\t\t\t.data(dataAt(dayCounter), d => d)\r\n\t\t\t.join('circle')\r\n\t\t\t\t// .sort((a,b) => d3.descending(a[zParam.selected], b[zParam.selected]))\r\n\t\t\t\t.sort((a,b) => d3.descending(infoStates[a.state][zParam.selected], infoStates[b.state][zParam.selected]))\r\n\t\t\t\t.attr('r', d => zParam.selected === \"population\" \r\n\t\t\t\t\t? infoStates[d.state][zParam.selected] / 1000000 \r\n\t\t\t\t\t: zParam.selected === \"populationDensity\"\r\n\t\t\t\t\t? infoStates[d.state][zParam.selected] / 100\r\n\t\t\t\t\t: zParam.selected === \"gdp\"\r\n\t\t\t\t\t? infoStates[d.state][zParam.selected] / 100000\r\n\t\t\t\t\t: 5\r\n\t\t\t\t)\r\n\t\t\t\t.attr('cx', d => xScale(d[xParam.selected]))\r\n\t\t\t\t.attr('cy', d => yScale(d[yParam.selected]))\r\n\t\t\t\t.attr('fill', d => colorScale(infoStates[d.state][cParam.selected]))\r\n\t\t\t\t.attr('id', d => `circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\t.attr('class', d =>\r\n\t\t\t\t\tselectedCircles.selected.includes(d.state) \r\n\t\t\t\t\t\t? classes.circleSelected\r\n\t\t\t\t\t\t: classes.circle\r\n\t\t\t\t)\r\n\t\t\t\t.call(circle => circle\r\n\t\t\t\t\t.append('title')\r\n\t\t\t\t\t.text(d => [\r\n\t\t\t\t\t\td.state,\r\n\t\t\t\t\t\t`Day ${dayCounter}`,\r\n\t\t\t\t\t\txParam.selected === \"casesPerThousand\"\r\n\t\t\t\t\t\t\t? `Cases/1000: ${d.casesPerThousand && d.casesPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: xParam.selected === \"cases\"\r\n\t\t\t\t\t\t\t? `Cases: ${d.cases && d.cases.toLocaleString()}`\r\n\t\t\t\t\t\t\t: xParam.selected === \"deathsPerThousand\"\r\n\t\t\t\t\t\t\t? `Deaths/1000: ${d.deathsPerThousand && d.deathsPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: xParam.selected === \"deaths\"\r\n\t\t\t\t\t\t\t? `Deaths: ${d.deaths && d.deaths.toLocaleString()}`\r\n\t\t\t\t\t\t\t: \"error\",\r\n\t\t\t\t\t\tyParam.selected === \"casesPerThousand\" \r\n\t\t\t\t\t\t\t? `Cases/1000: ${d.casesPerThousand && d.casesPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: yParam.selected === \"cases\"\r\n\t\t\t\t\t\t\t? `Cases: ${d.cases && d.cases.toLocaleString()}`\r\n\t\t\t\t\t\t\t: yParam.selected === \"deathsPerThousand\"\r\n\t\t\t\t\t\t\t? `Deaths/1000: ${d.deathsPerThousand && d.deathsPerThousand.toFixed(2)}`\r\n\t\t\t\t\t\t\t: yParam.selected === \"deaths\"\r\n\t\t\t\t\t\t\t? `Deaths: ${d.deaths && d.deaths.toLocaleString()}`\r\n\t\t\t\t\t\t\t: \"error\"\r\n\t\t\t\t\t\t].join(\"\\n\")\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\r\n\t\t\tcircle.on('mouseover', d => {\r\n\t\t\t\tconst mouseOverCircle = d3.select(`#circle-${infoStates[d.state].htmlFormat}`)\t\t\t\r\n\t\t\t\tif (opacityNotSel !== 0 || selectedCircles.selected.includes(d.state)) {\r\n\t\t\t\t\tmouseOverCircle\r\n\t\t\t\t\t\t.attr('cursor', 'pointer')\r\n\t\t\t\t\t\t.style(\"opacity\", .9)\r\n\t\t\t\t\t\t.style(\"stroke\", \"#e91e63\")\r\n\t\t\t\t\t\t.style(\"stroke-width\", 2)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcircle.on('mouseout', d => { \r\n\t\t\t\tconst mouseOutCircle = d3.select(`#circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\tif (selectedCircles.notSelected.includes(d.state)) {\r\n\t\t\t\t\tmouseOutCircle\r\n\t\t\t\t\t\t.style(\"opacity\", opacityNotSel)\r\n\t\t\t\t\t\t.style(\"stroke\", \"none\")\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcircle.on('click', d => { \r\n\t\t\t\tif (selectedCircles.selected.includes(d.state)) {\r\n\t\t\t\t\tsetSelectedCircles({\r\n\t\t\t\t\t\t...selectedCircles,\r\n\t\t\t\t\t\tselected: selectedCircles.selected.filter(s => s !== d.state),\r\n\t\t\t\t\t\tnotSelected: [...selectedCircles.notSelected, d.state]\r\n\t\t\t\t\t})\r\n\t\t\t\t\td3.select(`#circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\t\t\t.style(\"opacity\", opacityNotSel)\r\n\t\t\t\t\t\t.style(\"stroke\", \"none\")\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetSelectedCircles({\r\n\t\t\t\t\t\t...selectedCircles,\r\n\t\t\t\t\t\tselected: [...selectedCircles.selected, d.state],\r\n\t\t\t\t\t\tnotSelected: selectedCircles.notSelected.filter(s => s !== d.state)\r\n\t\t\t\t\t})\r\n\t\t\t\t\td3.select(`#circle-${infoStates[d.state].htmlFormat}`)\r\n\t\t\t\t\t\t.style(\"opacity\", .9)\r\n\t\t\t\t\t\t.style(\"stroke\", \"#e91e63\")\r\n\t\t\t\t\t\t.style(\"stroke-width\", 2)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\td3.select(circlesRef.current).selectAll(\"text\")\r\n\t\t\t\t.data(dataAt(dayCounter), d => d)\r\n\t\t\t\t.join(\"text\")\r\n\t\t\t\t\t.call(label => {\r\n\t\t\t\t\t\tconst length = d => {\r\n\t\t\t\t\t\t\tif (zParam.selected === \"population\") {\r\n\t\t\t\t\t\t\t\treturn infoStates[d.state][zParam.selected] / 1000000\r\n\t\t\t\t\t\t\t} else if (zParam.selected === \"populationDensity\") {\r\n\t\t\t\t\t\t\t\treturn infoStates[d.state][zParam.selected] / 100\r\n\t\t\t\t\t\t\t} else if (zParam.selected === \"gdp\") {\r\n\t\t\t\t\t\t\t\treturn infoStates[d.state][zParam.selected] / 100000\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn 4 \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tlabel\r\n\t\t\t\t\t\t\t.attr(\"x\", d => xScale(d[xParam.selected]) + length(d))\r\n\t\t\t\t\t\t\t.attr(\"y\", d => yScale(d[yParam.selected]) - length(d))\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.attr(\"opacity\", d => selectedCircles.selected.includes(d.state)\r\n\t\t\t\t\t\t? .8\r\n\t\t\t\t\t\t: 0)\r\n\t\t\t\t\t.attr(\"class\", classes.circleLabel)\r\n\t\t\t\t\t.attr('cursor', 'context-menu')\r\n\t\t\t\t\t.text(d => infoStates[d.state].abbreviation);\r\n\t\t};\r\n\t}, [dayCounter, selector, scales, selectedCircles, opacityNotSel, theme]);\r\n\r\n\treturn (\r\n\t\t<>\t\t\r\n\t\t\t<g ref={circlesRef} />\r\n\t\t</>\r\n\t)\r\n};","import React from 'react';\r\nimport { Slider, Typography } from \"@material-ui/core\";\r\n\r\nexport const OpacitySlider = (props) => {\r\n\tconst { opacityNotSel, setOpacityNotSel } = props;\r\n\r\n\treturn (\r\n\t\t<>\t\r\n\t\t\t<Typography variant=\"caption\">Non-selected opacity</Typography>\r\n\t\t\t<Slider \r\n\t\t\t\tid=\"opacity-slider\"\r\n\t\t\t\tvalue={opacityNotSel}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tstep={.1}\r\n\t\t\t\tmin={0}\r\n\t\t\t\tmax={1}\r\n\t\t\t\tonChange={(e, newVal) => setOpacityNotSel(newVal)}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n};\r\n\r\n","import React from 'react';\r\nimport { Slider, Typography } from \"@material-ui/core\";\r\n\r\nexport const DayCounterSlider = (props) => {\r\n\tconst { dayCounter, setDayCounter } = props;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Typography variant=\"caption\">Day of Outbreak</Typography>\r\n\t\t\t<Slider \r\n\t\t\t\tid=\"day-counter-slider\"\r\n\t\t\t\tvalue={dayCounter}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tstep={1}\r\n\t\t\t\tmin={1}\r\n\t\t\t\tmax={60}\r\n\t\t\t\tonChange={(e, newVal) => setDayCounter(newVal)}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n};\r\n\r\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\n// context\r\nimport { dataContext } from \"../../../context/dataContext\";\r\n\r\n// components\r\nimport { CirclesGapminder } from \"./CirclesGapminder\";\r\nimport { OpacitySlider } from \"../interface/OpacitySlider\";\r\nimport { DayCounterSlider } from \"../interface/DayCounterSlider\";\r\n\r\n// style\r\nimport { Grid, useMediaQuery } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nexport const ChartGapminder = props => {\r\n\tconst { cParamCategories, data, selector, wrapper, bounds } = props;\r\n    const { xParam, yParam, cParam } = selector;\r\n    const { wrapperWidth, wrapperHeight, margin } = wrapper;\r\n    const { width, height } = bounds;\r\n\r\n    const { dataStates } = useContext(dataContext);\r\n    const [scales, setScales] = useState(null);\r\n    const [dayCounter, setDayCounter] = useState(1);\r\n    const [opacityNotSel, setOpacityNotSel] = useState(0.6);\r\n\r\n    const theme = useTheme();\r\n    const mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n    const useStyles = makeStyles(theme => ({\r\n        rootSVG: {\r\n            display: \"inline-block\",\r\n            position: \"relative\",\r\n            width: \"100%\",\r\n            verticalAlign: \"middle\",\r\n            overflow: \"hidden\",\r\n\t\t},\r\n\t\tchartTitle: {\r\n\t\t\ttextAnchor: \"middle\",\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontWeight: 700,\r\n\t\t\tfontSize: \"1rem\",\r\n\t\t}, \r\n\t\tchartSubtitle: {\r\n\t\t\ttextAnchor: \"middle\",\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontSize: \".6rem\",\r\n\t\t},\r\n        chartWrapper: {\r\n            display: \"inline-block\",\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n        },\r\n        bounds: {\r\n            width: width,\r\n            height: height,\r\n        },\r\n        axes: {\r\n            color: theme.palette.text.primary,\r\n        },\r\n        legend: {\r\n            color: theme.palette.primary.contrastText,\r\n            fontWeight: 700,\r\n            fontSize: \".8rem\",\r\n        },\r\n        sliderContainer: {\r\n            flexDirection: () => (mqSmall ? \"column\" : \"row\"),\r\n            justifyContent: () => (mqSmall ? \"center\" : \"space-between\"),\r\n            maxWidth: width,\r\n            margin: \"0 auto\",\r\n            alignItems: \"center\",\r\n        },\r\n        slider: {\r\n            width: () => (mqSmall ? \"95%\" : \"45%\"),\r\n        },\r\n    }));\r\n\r\n    const classes = useStyles();\r\n\r\n\tconst svgRef = useRef(null);\r\n    const boundsRef = useRef(null);\r\n    const yAxisRef = useRef(null);\r\n    const xAxisRef = useRef(null);\r\n    const legendRef = useRef(null);\r\n\r\n    const renderChart = () => {\r\n        const xScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d[xParam.selected]))\r\n            .range([0, width]);\r\n        const yScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d[yParam.selected]))\r\n            .range([height, 0]);\r\n        let colorScale;\r\n\r\n        if (cParam.selected === \"region\") {\r\n            colorScale = d3\r\n                .scaleOrdinal()\r\n                .domain(cParamCategories.region)\r\n                .range(d3.schemePaired);\r\n        } else if (cParam.selected === \"division\") {\r\n            colorScale = d3\r\n                .scaleOrdinal()\r\n                .domain(cParamCategories.division)\r\n                .range(d3.schemePaired);\r\n        } else if (cParam.selected === \"governor\") {\r\n            colorScale = d3\r\n                .scaleOrdinal()\r\n                .domain(cParamCategories.governor)\r\n                .range([\"#B61515\", \"#2E84D5\", \"#009C72\"]);\r\n        }\r\n\r\n        setScales({\r\n            xScale: xScale,\r\n            yScale: yScale,\r\n            colorScale: colorScale,\r\n        });\r\n\r\n        // Axes\r\n        const yAxisGenerator = d3.axisLeft().scale(yScale);\r\n        const xAxisGenerator = d3.axisBottom().scale(xScale);\r\n\r\n        const xAxis = d3\r\n            .select(xAxisRef.current)\r\n            .call(xAxisGenerator)\r\n            .call(axis => {\r\n                axis.append(\"text\").attr(\"class\", \"xLabel\");\r\n                axis.append(\"text\").attr(\"class\", \"counter-display\");\r\n            });\r\n\r\n        xAxis\r\n            .selectAll(\".xLabel\")\r\n            .data(xParam.selected, d => d)\r\n            .join(\"text\")\r\n            .attr(\"x\", width)\r\n            .attr(\"y\", 40)\r\n            .attr(\"text-anchor\", \"end\")\r\n            .attr(\"class\", \"xLabel\")\r\n            .attr(\"fill\", theme.palette.text.primary)\r\n            .text(xParam.selected);\r\n\r\n        const yAxis = d3\r\n            .select(yAxisRef.current)\r\n            .call(yAxisGenerator)\r\n            .call(axis => axis.append(\"text\").attr(\"class\", \"yLabel\"));\r\n\r\n        yAxis\r\n            .selectAll(\".yLabel\")\r\n            .data(yParam.selected, d => d)\r\n            .join(\"text\")\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", -40)\r\n            .attr(\"text-anchor\", \"end\")\r\n            .attr(\"transform\", \"rotate(-90)\")\r\n            .attr(\"class\", \"yLabel\")\r\n            .attr(\"fill\", theme.palette.text.primary)\r\n\t\t\t.text(yParam.selected);\r\n\r\n        // legend\r\n        d3.select(legendRef.current)\r\n            .selectAll(\"text\")\r\n            .data(cParamCategories[cParam.selected], d => d)\r\n            .join(\r\n                enter =>\r\n                    enter\r\n                        .append(\"text\")\r\n                        .attr(\"x\", \"1rem\")\r\n                        .attr(\"y\", -1000)\r\n                        .attr(\"fill\", d => colorScale(d))\r\n                        .attr(\"text-anchor\", \"start\")\r\n                        .text(d => d)\r\n                        .call(enter =>\r\n                            enter\r\n                                .transition()\r\n                                .duration(750)\r\n                                .attr(\"y\", (d, i) => -height + 10 + 20 * i)\r\n                        ),\r\n                update =>\r\n                    update\r\n                        .append(\"text\")\r\n                        .attr(\"fill\", d => colorScale(d))\r\n                        .attr(\"text-anchor\", \"start\")\r\n                        .attr(\"y\", 60)\r\n                        .text(d => d)\r\n                        .call(update => update.transition().duration(750)),\r\n                exit =>\r\n                    exit\r\n                        .attr(\"fill\", \"gray\")\r\n                        .attr(\"text-anchor\", \"start\")\r\n                        .text(d => d)\r\n                        .call(exit =>\r\n                            exit\r\n                                .transition()\r\n                                .duration(750)\r\n                                .attr(\"y\", 0)\r\n                                .remove()\r\n                        )\r\n            );\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (dataStates) {\r\n            renderChart();\r\n        }\r\n    }, [dataStates, selector, theme]);\r\n\r\n    useEffect(() => {\r\n        d3.select(boundsRef.current)\r\n            .selectAll(\".counter-display\")\r\n            .join(\"text\")\r\n            .attr(\"text-anchor\", \"end\")\r\n            .attr(\"x\", width)\r\n            .attr(\"y\", -40)\r\n            .attr(\"class\", \"counter-display\")\r\n            .style(\"fill\", theme.palette.text.primary)\r\n            .text(`Day ${dayCounter}`);\r\n    }, [dayCounter, theme]);\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <svg\r\n\t\t\t\t\tref={svgRef}\r\n                    id=\"gapminder-app\"\r\n                    height={wrapperHeight}\r\n                    width={wrapperWidth}\r\n                    className={classes.rootSVG}\r\n                    viewBox={`0 0 ${wrapperWidth} ${wrapperHeight}`}\r\n                >\r\n                    <g\r\n                        ref={boundsRef}\r\n                        className={classes.bounds}\r\n                        transform={`translate(${margin.left}, ${margin.top})`}\r\n                    >\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\ttransform={`translate(${width / 2})`}\r\n\t\t\t\t\t\t\tclassName={classes.chartTitle}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tCOVID-19 in the United States\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\ttransform={`translate(${width / 2}, 24)`}\r\n\t\t\t\t\t\t\tclassName={classes.chartTitle}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tOutbreak Days 1 - 60\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\ttransform={`translate(${width / 2}, 44)`}\r\n\t\t\t\t\t\t\tclassName={classes.chartSubtitle}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t*data from the New York Times\r\n\t\t\t\t\t\t</text>\r\n                        <g\r\n                            ref={xAxisRef}\r\n                            transform={`translate(0, ${height})`}\r\n                            className={classes.axes}\r\n                        />\r\n                        <g ref={yAxisRef} className={classes.axes} />\r\n                        <g\r\n                            ref={legendRef}\r\n                            transform={`translate(0, ${height})`}\r\n                            className={classes.legend}\r\n                        />\r\n                        {data && scales ? (\r\n                            <CirclesGapminder\r\n                                {...props}\r\n                                scales={scales}\r\n                                dayCounter={dayCounter}\r\n                                opacityNotSel={opacityNotSel}\r\n                            />\r\n                        ) : (\r\n                            <></>\r\n                        )}\r\n                    </g>\r\n                </svg>\r\n            </div>\r\n            <Grid container className={classes.sliderContainer}>\r\n                <Grid item className={classes.slider}>\r\n                    <DayCounterSlider\r\n                        dayCounter={dayCounter}\r\n                        setDayCounter={setDayCounter}\r\n                    />\r\n                </Grid>\r\n                <Grid item className={classes.slider}>\r\n                    <OpacitySlider\r\n                        opacityNotSel={opacityNotSel}\r\n                        setOpacityNotSel={setOpacityNotSel}\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n        </>\r\n    );\r\n};\r\n\r\nChartGapminder.propTypes = {\r\n\tcParamCategories: PropTypes.object,\r\n\tdata: PropTypes.arrayOf(PropTypes.object),\r\n\tselector: PropTypes.object,\r\n\twrapper: PropTypes.object,\r\n\tbounds: PropTypes.object,\r\n};","import React from \"react\";\r\n\r\n// style\r\nimport { FormControl, InputLabel, Select, MenuItem, Grid, useMediaQuery } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\trootContainer: {\r\n\t\tmaxWidth: 750,\r\n\t\tminWidth: 175,\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\tpadding: 0,\r\n\t\tmargin: 0,\r\n\t},\r\n\tfilterSelector: {\r\n        minWidth: 150,\r\n        fontWeight: 500,\r\n        fontSize: \".8rem\",\r\n    },\r\n    filterMenuItem: {\r\n        color: theme.palette.text.primary,\r\n        fontWeight: 500,\r\n        fontSize: \".8rem\",\r\n    },\r\n}));\r\n\r\nexport const ParamPicker = (props) => {\r\n\tconst { selector, handleSelector } = props;\r\n\tconst theme = useTheme();\r\n\r\n\tconst mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\tconst classes = useStyles();\r\n\r\n    return (\r\n\t\t<Grid container className={classes.rootContainer} style={mqSmall \r\n\t\t\t? {flexDirection: \"column\", alignItems: \"center\"} \r\n\t\t\t: {flexDirection: \"row\"}}\r\n\t\t>\r\n            {Object.keys(selector).map((p) => {\r\n                return (\r\n                    <FormControl key={selector[p].output}>\r\n                        <InputLabel>{selector[p].output}</InputLabel>\r\n                        <Select\r\n                            name={p}\r\n                            value={selector[p].selected}\r\n                            onChange={handleSelector}\r\n                            className={classes.filterSelector}\r\n                        >\r\n                            {selector[p].options.map((o) => {\r\n                                return (\r\n                                    <MenuItem\r\n                                        key={o}\r\n                                        value={o}\r\n                                        className={classes.filterMenuItem}\r\n                                    >\r\n                                        {o}\r\n                                    </MenuItem>\r\n                                );\r\n                            })}\r\n                        </Select>\r\n                    </FormControl>\r\n                );\r\n            })}\r\n        </Grid>\r\n    );\r\n};\r\n","import React from \"react\";\r\n\r\n// components\r\nimport { ParamPicker } from \"../pickers/ParamPicker\";\r\n\r\n// style\r\nimport { IconButton, Tooltip, Menu, List } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport AssessmentIcon from \"@material-ui/icons/Assessment\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    menuButton: {\r\n        color: theme.palette.primary.contrastText,\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n}));\r\n\r\nexport const ParamDashboard = props => {\r\n    const {\r\n        mqSmall,\r\n        data,\r\n        selector,\r\n        handleSelector,\r\n        handleParamMenu,\r\n        anchorEl,\r\n    } = props;\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            {mqSmall ? (\r\n                <span>\r\n                    <Tooltip title=\"Chart parameters\">\r\n                        <IconButton\r\n                            id=\"parameters-btn\"\r\n                            className={classes.menuButton}\r\n                            onClick={handleParamMenu}\r\n                        >\r\n                            <AssessmentIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Menu\r\n                        anchorEl={anchorEl}\r\n                        open={\r\n                            anchorEl\r\n                                ? Boolean(anchorEl.id === \"parameters-btn\")\r\n                                : false\r\n                        }\r\n                        onClose={handleParamMenu}\r\n                    >\r\n                        <List>\r\n                            <ParamPicker\r\n                                data={data}\r\n                                selector={selector}\r\n                                handleSelector={handleSelector}\r\n                            />\r\n                        </List>\r\n                    </Menu>\r\n                </span>\r\n            ) : (\r\n                <ParamPicker\r\n                    data={data}\r\n                    selector={selector}\r\n                    handleSelector={handleSelector}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};","import React from \"react\";\r\n\r\n// style\r\nimport { IconButton, Tooltip } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport BubbleChartIcon from \"@material-ui/icons/BubbleChart\";\r\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    menuButton: {\r\n        color: theme.palette.primary.contrastText,\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n}));\r\n\r\nexport const ChartPicker = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <Tooltip title=\"Line chart\">\r\n                <IconButton\r\n                    component=\"a\"\r\n                    href=\"/covidcompare/#/line-app\"\r\n                    className={classes.menuButton}\r\n                >\r\n                    <TimelineIcon />\r\n                </IconButton>\r\n            </Tooltip>\r\n            <Tooltip title=\"Gapminder chart\">\r\n                <IconButton\r\n                    component=\"a\"\r\n                    href=\"/covidcompare/#/gapminder-app\"\r\n                    className={classes.menuButton}\r\n                >\r\n                    <BubbleChartIcon />\r\n                </IconButton>\r\n            </Tooltip>\r\n        </>\r\n    );\r\n};\r\n","import React from \"react\";\r\n\r\n// style\r\nimport { IconButton, FormControlLabel } from \"@material-ui/core\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\n\r\nexport const DeselectAll = (props) => {\r\n\tconst { handleDeselectAll, classes } = props;\r\n\r\n\treturn (\r\n\t\t<FormControlLabel\r\n\t\t\tid=\"deselect-all\"\r\n\t\t\tlabel=\"Deselect All\"\r\n\t\t\tname=\"Deselect All\"\r\n\t\t\tclassName={classes.deselectAll}\r\n\t\t\tonClick={handleDeselectAll}\r\n\t\t\tcontrol={\r\n\t\t\t\t<IconButton\r\n\t\t\t\t\tid=\"deselector-all\"\r\n\t\t\t\t\tname=\"deselect-all\"\r\n\t\t\t\t\tclassName={classes.deselectAllButton}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ClearIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n};","import React, { useState, useContext, forwardRef } from \"react\";\r\n\r\n// context\r\nimport { statesContext } from \"../../../context/statesContext\";\r\n\r\n// style\r\nimport { Menu, MenuItem } from \"@material-ui/core\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nconst regionOptions = [\r\n    {\r\n        id: \"northeast\",\r\n        name: \"Northeast\",\r\n        type: \"Region\",\r\n        chartParam: \"region\",\r\n    },\r\n    { id: \"midwest\", name: \"Midwest\", type: \"Region\", chartParam: \"region\" },\r\n    { id: \"south\", name: \"South\", type: \"Region\", chartParam: \"region\" },\r\n    { id: \"west\", name: \"West\", type: \"Region\", chartParam: \"region\" },\r\n];\r\n\r\nexport const FilterRegion = forwardRef((props, ref) => {\r\n    const { handleFilter } = props;\r\n\r\n    const { infoStates } = useContext(statesContext);\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n    const handleMenu = e => {\r\n        !anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <MenuItem id=\"region-btn\" ref={ref} dense={true} onClick={handleMenu}>\r\n            Region\r\n            <ChevronRightIcon style={{ marginLeft: \"auto\" }} />\r\n            <Menu\r\n                anchorEl={anchorEl}\r\n                open={anchorEl ? Boolean(anchorEl.id === \"region-btn\") : false}\r\n                onClose={handleMenu}\r\n            >\r\n                {infoStates &&\r\n                    regionOptions.map(o => {\r\n                        return (\r\n                            <MenuItem\r\n                                key={o.id}\r\n                                id={o.id}\r\n                                onClick={() => handleFilter(o)}\r\n                                onClose={handleMenu}\r\n                            >\r\n                                {o.name}\r\n                            </MenuItem>\r\n                        );\r\n                    })}\r\n            </Menu>\r\n        </MenuItem>\r\n    );\r\n});\r\n","import React, { useState, useContext, forwardRef } from 'react'\r\n\r\n// context\r\nimport { statesContext } from '../../../context/statesContext';\r\n\r\n// style\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nconst regionOptions = [\r\n\t{id: \"democrat\", name: \"Democrat\", type: \"Governor\", chartParam: \"governor\"},\r\n\t{id: \"republican\", name: \"Republican\", type: \"Governor\", chartParam: \"governor\"},\r\n];\r\n\r\nexport const FilterGovernor = forwardRef((props, ref) => {\r\n\tconst { handleFilter } = props;\r\n\r\n\tconst { infoStates } = useContext(statesContext);\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MenuItem id=\"governor-btn\" dense={true} onClick={handleMenu}>\r\n\t\t\tGov. party\r\n\t\t\t<ChevronRightIcon style={{marginLeft: \"auto\"}}/>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"governor-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t{infoStates \r\n\t\t\t\t\t&& regionOptions.map(o => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\t\t\tkey={o.id} \r\n\t\t\t\t\t\t\t\tid={o.id} \r\n\t\t\t\t\t\t\t\tonClick={() => handleFilter(o)}\r\n\t\t\t\t\t\t\t\tonClose={handleMenu}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{o.name}\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</Menu>\r\n\t\t</MenuItem>\r\n\t)\r\n});","import React, { useState, forwardRef } from 'react';\r\n\r\n// style\r\nimport { Menu, MenuItem, Button } from '@material-ui/core';\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nexport const FilterPopulation = forwardRef((props, ref) => {\r\n\tconst { handleFilter, nStates } = props;\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\t\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\r\n\tconst populationOptions = [\r\n\t\t{id: \"pop-high\", name: `Top ${nStates} (pop. total)`, type: \"Pop.\", chartParam: \"population\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"pop-low\", name: `Bottom ${nStates} (pop. total)`, type: \"Pop.\", chartParam: \"population\", sort: \"ascending\", n: nStates},\r\n\t\t{id: \"pop-density-high\", name: `Top ${nStates} (pop. density)`, type: \"Pop.\", chartParam: \"populationDensity\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"pop-density-low\", name: `Bottom ${nStates} (pop. density)`, type: \"Pop.\", chartParam: \"populationDensity\", sort: \"ascending\", n: nStates}\r\n\t];\r\n\r\n\treturn (\r\n\t\t<MenuItem id=\"pop-btn\" dense={true} onClick={handleMenu}>\r\n\t\t\tPopulation\r\n\t\t\t<ChevronRightIcon style={{marginLeft: \"auto\"}}/>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"pop-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t{populationOptions.map(o => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\t\tkey={o.id} \r\n\t\t\t\t\t\t\tid={o.id}\r\n\t\t\t\t\t\t\tonClick={() => handleFilter(o)}\r\n\t\t\t\t\t\t\tonClose={handleMenu}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{o.name}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</Menu>\r\n\t\t</MenuItem>\r\n\t);\r\n});","import React, { useState, forwardRef } from \"react\";\r\n\r\n// style\r\nimport { Menu, MenuItem } from \"@material-ui/core\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nexport const FilterGdp = forwardRef((props, ref) => {\r\n    const { handleFilter, nStates } = props;\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n    const handleMenu = e => {\r\n        !anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n    };\r\n\r\n    const gdpOptions = [\r\n        {\r\n            id: \"gdp-high\",\r\n            name: `Top ${nStates} (2019 GDP)`,\r\n            type: \"GDP\",\r\n            chartParam: \"gdp\",\r\n            sort: \"descending\",\r\n            n: nStates,\r\n        },\r\n        {\r\n            id: \"gdp-low\",\r\n            name: `Bottom ${nStates} (2019 GDP)`,\r\n            type: \"GDP\",\r\n            chartParam: \"gdp\",\r\n            sort: \"ascending\",\r\n            n: nStates,\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <MenuItem id=\"gdp-btn\" dense={true} onClick={handleMenu}>\r\n            GDP\r\n            <ChevronRightIcon style={{ marginLeft: \"auto\" }} />\r\n            <Menu\r\n                anchorEl={anchorEl}\r\n                open={anchorEl ? Boolean(anchorEl.id === \"gdp-btn\") : false}\r\n                onClose={handleMenu}\r\n            >\r\n                {gdpOptions.map(o => {\r\n                    return (\r\n                        <MenuItem\r\n                            key={o.id}\r\n                            id={o.id}\r\n                            onClick={() => handleFilter(o)}\r\n                            onClose={handleMenu}\r\n                        >\r\n                            {o.name}\r\n                        </MenuItem>\r\n                    );\r\n                })}\r\n            </Menu>\r\n        </MenuItem>\r\n    );\r\n});\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\n// context\r\nimport { selectionContext } from \"../../../context/selectionContext\";\r\nimport { statesContext } from \"../../../context/statesContext\";\r\n\r\n// components\r\nimport { FilterRegion } from \"./FilterRegion\";\r\nimport { FilterGovernor } from \"./FilterGovernor\";\r\nimport { FilterPopulation } from \"./FilterPopulation\";\r\nimport { FilterGdp } from \"./FilterGdp\";\r\n\r\n// style\r\nimport { Typography, Menu, Button, Chip, Paper, MenuList } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    button: {\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n    chipContainer: {\r\n        listStyle: \"none\",\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n    chip: {\r\n\t\tcolor: theme.palette.primary.main,\r\n        backgroundColor: theme.palette.primary.contrastText,\r\n        padding: theme.spacing(0.5),\r\n        margin: theme.spacing(0.5),\r\n        fontSize: \".7rem\",\r\n    },\r\n}));\r\n\r\nexport const FilterBatch = props => {\r\n    const {\r\n        filters,\r\n        handleDeleteFilter,\r\n        handleFilter,\r\n        nStates,\r\n    } = props;\r\n    const { setSelectedCircles } = useContext(\r\n        selectionContext\r\n    );\r\n    const { infoStates } = useContext(statesContext);\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const classes = useStyles();\r\n\r\n    const handleMenu = e => {\r\n        !anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n    };\r\n\r\n    const handleFilterCategories = newFilter => {\r\n        const filtered = Object.keys(infoStates).filter(\r\n            s => infoStates[s][newFilter.chartParam] === newFilter.name\r\n\t\t);\r\n\r\n        setAnchorEl(null);\r\n        return filtered;\r\n    };\r\n\r\n    const handleFilterValues = newFilter => {\r\n        const n = newFilter.n;\r\n        const filtered = Object.keys(infoStates)\r\n            .sort((a, b) =>\r\n                newFilter.sort === \"descending\"\r\n                    ? infoStates[b][newFilter.chartParam] -\r\n                      infoStates[a][newFilter.chartParam]\r\n                    : infoStates[a][newFilter.chartParam] -\r\n                      infoStates[b][newFilter.chartParam]\r\n            )\r\n            .slice(0, n);\r\n\r\n        setAnchorEl(null);\r\n        return filtered;\r\n    };\r\n\r\n    const handleFilters = () => {\r\n        let selected = [];\r\n        let currSelection = [];\r\n        filters.forEach((d, i) => {\r\n            if (d.type === \"Region\" || d.type === \"Governor\") {\r\n                currSelection = handleFilterCategories(d);\r\n            } else if (d.type === \"Pop.\" || d.type === \"GDP\") {\r\n                currSelection = handleFilterValues(d);\r\n            }\r\n\r\n            selected =\r\n                selected.length < 1\r\n                    ? currSelection\r\n                    : currSelection.filter(s => selected.includes(s));\r\n        });\r\n\r\n        setSelectedCircles(prevState => ({\r\n            ...prevState,\r\n            selected: selected,\r\n            notSelected: prevState.all.filter(s => !selected.includes(s)),\r\n        }));\r\n    };\r\n\r\n    useEffect(() => {\r\n        filters.length > 0\r\n            ? handleFilters()\r\n            : setSelectedCircles(prevState => ({\r\n                  ...prevState,\r\n                  selected: [],\r\n                  notSelected: prevState.all,\r\n              }));\r\n    }, [filters]);\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                id=\"select-filter\"\r\n                onClick={handleMenu}\r\n                className={classes.button}\r\n            >\r\n                New Filter\r\n                <ChevronRightIcon style={{ marginLeft: \"auto\" }} />\r\n            </Button>\r\n            <Menu\r\n                anchorEl={anchorEl}\r\n                open={anchorEl ? Boolean(anchorEl.id === \"select-filter\") : false}\r\n                onClose={handleMenu}\r\n            >\r\n\t\t\t\t<MenuList>\r\n\t\t\t\t\t<FilterRegion handleFilter={handleFilter} />\r\n\t\t\t\t\t<FilterGovernor handleFilter={handleFilter} />\r\n\t\t\t\t\t<FilterPopulation handleFilter={handleFilter} nStates={nStates} />\r\n\t\t\t\t\t<FilterGdp handleFilter={handleFilter} nStates={nStates} />\r\n\t\t\t\t</MenuList>\r\n            </Menu>\r\n            <Paper component=\"ul\" className={classes.chipContainer}>\r\n                {filters.length > 0 ? (\r\n                    filters.map(f => {\r\n                        return (\r\n                            <li key={f.id}>\r\n                                <Chip\r\n                                    size=\"small\"\r\n                                    className={classes.chip}\r\n                                    label={f.name}\r\n                                    onDelete={() => handleDeleteFilter(f)}\r\n                                />\r\n                            </li>\r\n                        );\r\n                    })\r\n                ) : (\r\n                    <Typography>No filters</Typography>\r\n                )}\r\n            </Paper>\r\n        </>\r\n    );\r\n};\r\n","import React, { useContext } from \"react\";\r\n\r\n// context\r\nimport { selectionContext } from \"../../../context/selectionContext\";\r\n\r\n// style\r\nimport { FormControlLabel, Checkbox, Typography, Divider } from \"@material-ui/core\";\r\n\r\nexport const SelectedStatus = props => {\r\n    const { handleChange, theme, classes } = props;\r\n    const { selectedCircles } = useContext(selectionContext);\r\n\r\n    return (\r\n        <>\r\n            <Typography className={classes.dashboardTitle}>Selected</Typography>\r\n            <Divider className={classes.dashboardDivider} />\r\n            {selectedCircles.selected &&\r\n                selectedCircles.selected.sort().map((state, i) => {\r\n                    return (\r\n                        <FormControlLabel\r\n                            key={i}\r\n                            name={state}\r\n                            checked={selectedCircles.selected.includes(state)}\r\n                            onChange={handleChange}\r\n                            control={\r\n                                <Checkbox\r\n                                    name={state}\r\n                                    style={{\r\n                                        color:\r\n                                            theme.palette.primary.contrastText,\r\n                                    }}\r\n                                />\r\n                            }\r\n                            label={state}\r\n                        />\r\n                    );\r\n                })}\r\n            <br />\r\n            <Typography className={classes.dashboardTitle}>\r\n                Not Selected\r\n            </Typography>\r\n            <Divider className={classes.dashboardDivider} />\r\n            {selectedCircles.notSelected &&\r\n                selectedCircles.notSelected.sort().map((state, i) => {\r\n                    return (\r\n                        <FormControlLabel\r\n                            key={i}\r\n                            name={state}\r\n                            checked={selectedCircles.selected.includes(state)}\r\n                            onChange={handleChange}\r\n                            control={\r\n                                <Checkbox\r\n                                    name={state}\r\n                                    style={{\r\n                                        color:\r\n                                            theme.palette.primary.contrastText,\r\n                                    }}\r\n                                />\r\n                            }\r\n                            label={state}\r\n                        />\r\n                    );\r\n                })}\r\n        </>\r\n    );\r\n};\r\n","import React from 'react';\r\n\r\n// style\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nexport const NumberPicker = (props) => {\r\n\tconst { nStates, setNStates } = props;\r\n\r\n\treturn (\r\n\t\t<TextField\r\n\t\t\tid=\"n-states\"\r\n\t\t\tvariant=\"outlined\"\r\n\t\t\tsize=\"small\"\r\n\t\t\ttype=\"number\"\r\n\t\t\tlabel=\"Filter n states\"\r\n\t\t\tInputProps={{\r\n\t\t\t\tinputProps: {\r\n\t\t\t\t\tmin: 1,\r\n\t\t\t\t\tmax: 50\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t\tdefaultValue={nStates}\r\n\t\t\tonChange={(e) => setNStates(e.target.value)}\r\n\t\t/>\r\n\t)\r\n};","import React, { useState, useContext } from \"react\";\r\nimport {\r\n    FormGroup,\r\n    Typography,\r\n\tDivider,\r\n} from \"@material-ui/core\";\r\n\r\n// components\r\nimport { DeselectAll } from \"../pickers/DeselectAll\";\r\nimport {FilterBatch} from \"../pickers/FilterBatch\";\r\nimport { SelectedStatus } from \"../pickers/SelectedStatus\";\r\nimport { NumberPicker } from \"../pickers/NumberPicker\";\r\n\r\n// context\r\nimport { selectionContext } from \"../../../context/selectionContext\";\r\n\r\n// styles\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tdeselectAll: {\r\n\t\tmarginBottom: \"1.5rem\",\r\n\t},\r\n\tdeselectAllButton: {\r\n\t\tcolor: \"#e32636\",\r\n\t\t\"&:hover\": {\r\n\t\t\tbackgroundColor: \"transparent\",\r\n\t\t},\r\n\t},\r\n\tdashboardTitle: {\r\n\t\tcolor: theme.palette.primary.contrastText,\r\n\t\tfontWeight: 700,\r\n\t\tfontSize: \"1.2rem\" \r\n\t},\r\n\tdashboardDivider: {\r\n\t\tbackgroundColor: theme.palette.primary.contrastText,\r\n\t\tmarginBottom: \".2rem\",\r\n\t},\r\n\tfilterBatch: {\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\tcolor: theme.palette.text.primary,\r\n\t},\r\n}));\r\n\r\nexport const FilterDashboard = (props) => {\r\n    const { selectedCircles, setSelectedCircles } = useContext(selectionContext);\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\r\n\tconst [filters, setFilters] = useState([]);\r\n\tconst [nStates, setNStates] = useState(12);\r\n\r\n    const handleChange = e => {\r\n        const state = e.target.name;\r\n\r\n        if (selectedCircles.selected.includes(state)) {\r\n            setSelectedCircles({\r\n                ...selectedCircles,\r\n                selected: selectedCircles.selected.filter(d => d !== state),\r\n                notSelected: [...selectedCircles.notSelected, state],\r\n            });\r\n        } else {\r\n            setSelectedCircles({\r\n                ...selectedCircles,\r\n                selected: [...selectedCircles.selected, state],\r\n                notSelected: selectedCircles.notSelected.filter(\r\n                    d => d !== state\r\n                ),\r\n            });\r\n        }\r\n\t};\r\n\r\n\tconst handleFilter = (newFilter) => {\r\n\t\tif (filters.length > 0) {\r\n\t\t\tsetFilters(prevState => [...prevState, newFilter])\r\n\t\t} else (\r\n\t\t\tsetFilters([newFilter])\r\n\t\t)\t\r\n\t};\r\n\t\r\n\tconst handleDeleteFilter = deletedFilter => {\r\n        const newFilterList = filters.filter(f => f.id !== deletedFilter.id);\r\n        setFilters(newFilterList);\r\n    };\r\n\r\n    const handleDeselectAll = () => {\r\n\t\tsetFilters([]);\r\n        setSelectedCircles(prevState => ({\r\n            ...prevState,\r\n            selected: [],\r\n            notSelected: prevState.all,\r\n        }));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <FormGroup>\r\n\t\t\t\t<DeselectAll handleDeselectAll={handleDeselectAll} classes={classes} />\r\n\t\t\t\t<NumberPicker nStates={nStates} setNStates={setNStates} />\r\n\t\t\t\t<Typography className={classes.dashboardTitle}>\r\n\t\t\t\t\tFilters\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Divider className={classes.dashboardDivider} />\r\n\t\t\t\t<FilterBatch \r\n\t\t\t\t\tclassName={classes.filterBatch}\r\n\t\t\t\t\tnStates={nStates}\r\n\t\t\t\t\tsetNStates={setNStates}\r\n\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\tsetFilters={setFilters}\r\n\t\t\t\t\thandleDeleteFilter={handleDeleteFilter}\r\n\t\t\t\t\thandleFilter={handleFilter}\r\n\t\t\t\t/>\r\n\t\t\t\t<SelectedStatus \r\n\t\t\t\t\thandleChange={handleChange} \r\n\t\t\t\t\tclasses={classes} \r\n\t\t\t\t\ttheme={theme}\r\n\t\t\t\t/>\r\n            </FormGroup>\r\n        </>\r\n    );\r\n};\r\n","import React from \"react\";\r\n\r\n// components\r\nimport { FilterDashboard } from \"./FilterDashboard\";\r\n\r\n// style\r\nimport { IconButton, Drawer, ClickAwayListener } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 1,\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        alignItems: \"left\",\r\n        backgroundColor: theme.palette.primary.main,\r\n        color: theme.palette.text.primary,\r\n        paddingLeft: \"1rem\",\r\n    },\r\n    drawerHeader: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        padding: theme.spacing(0, 1),\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: \"flex-end\",\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n}));\r\n\r\nexport const MenuDrawer = props => {\r\n    const { data, handleDrawer, open, handleClickAway } = props;\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n\r\n    return (\r\n        <ClickAwayListener onClickAway={handleClickAway}>\r\n            <Drawer\r\n                className={classes.drawer}\r\n                variant=\"persistent\"\r\n                anchor=\"left\"\r\n                open={open}\r\n                classes={{\r\n                    paper: classes.drawerPaper,\r\n                }}\r\n            >\r\n                <div className={classes.drawerHeader}>\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        edge=\"end\"\r\n                        onClick={handleDrawer}\r\n                        style={{\r\n                            color: theme.palette.primary.contrastText,\r\n                        }}\r\n                    >\r\n                        <ChevronLeftIcon />\r\n                    </IconButton>\r\n                </div>\r\n                <FilterDashboard data={data} />\r\n            </Drawer>\r\n        </ClickAwayListener>\r\n    );\r\n};","import React, { useState } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\n// components\r\nimport { ParamDashboard } from \"./ParamDashboard\";\r\nimport { ChartPicker } from \"./ChartPicker\";\r\nimport { MenuDrawer } from \"./MenuDrawer\";\r\n\r\n// style\r\nimport { AppBar, Toolbar, IconButton, useMediaQuery } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: \"flex\",\r\n    },\r\n    appBar: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        color: theme.palette.primary.contrastText,\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    menuButton: {\r\n        color: theme.palette.primary.contrastText,\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n    hide: {\r\n        display: \"none\",\r\n    },\r\n}));\r\n\r\nexport const Navbar = props => {\r\n    const { data, selector, handleSelector } = props;\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\r\n    const handleDrawer = () => {\r\n        setOpen(!open);\r\n    };\r\n\r\n    const handleParamMenu = e => {\r\n        !anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n    };\r\n\r\n    const handleClickAway = e => {\r\n        if (e.x > drawerWidth && e.y > 70 && open) {\r\n            setOpen(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <AppBar\r\n                position=\"relative\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar className={classes.toolbar}>\r\n                    <IconButton\r\n                        onClick={handleDrawer}\r\n                        edge=\"start\"\r\n                        disableRipple\r\n                        className={clsx(\r\n                            classes.menuButton,\r\n                            open && classes.hide\r\n                        )}\r\n                    >\r\n                        <MenuIcon className={classes.menuButton} />\r\n                    </IconButton>\r\n                    <ParamDashboard\r\n                        mqSmall={mqSmall}\r\n                        data={data}\r\n                        selector={selector}\r\n                        handleSelector={handleSelector}\r\n                        handleParamMenu={handleParamMenu}\r\n                        anchorEl={anchorEl}\r\n                    />\r\n                    <span style={{ marginLeft: \"auto\" }}>\r\n                        <ChartPicker />\r\n                    </span>\r\n                </Toolbar>\r\n                <MenuDrawer\r\n                    data={data}\r\n                    handleDrawer={handleDrawer}\r\n                    open={open}\r\n                    handleClickAway={handleClickAway}\r\n                />\r\n            </AppBar>\r\n        </>\r\n    );\r\n};\r\n","export const gapminderData = async (data, stateInfo, chartParams) => {\r\n\tconst { xParam, yParam, tParam } = chartParams;\r\n\tlet newData = [];\r\n\tObject.keys(stateInfo).forEach((state,i) => {\r\n\t\tlet eachState = {\r\n\t\t\tstate: state,\r\n\t\t\tregion: stateInfo[state].region,\r\n\t\t\t[tParam.selected]: [],\r\n\t\t\t[xParam.selected]: [],\r\n\t\t\t[xParam.alt1]: [],\r\n\t\t\t[yParam.selected]: [],\r\n\t\t\t[yParam.alt1]: [],\r\n\t\t};\r\n\r\n\t\tconst filtered = data.filter(d => d.state === state);\r\n\t\tfiltered.forEach((d,i) => {\r\n\t\t\teachState[tParam.selected].push([d[tParam.selected], d[tParam.selected]]);\r\n\t\t\teachState[xParam.selected].push([d[tParam.selected], d[xParam.selected]]);\r\n\t\t\teachState[yParam.selected].push([d[tParam.selected], d[yParam.selected]]);\r\n\t\t\teachState[xParam.alt1].push([d[tParam.selected], d[xParam.alt1]]);\r\n\t\t\teachState[yParam.alt1].push([d[tParam.selected], d[yParam.alt1]]);\r\n\t\t});\r\n\t\tnewData.push(eachState);\r\n\t});\r\n\r\n\treturn newData;\r\n};","export const wrapper = {\r\n\twrapperWidth: window.innerWidth * .8,\r\n\twrapperHeight: window.innerHeight * .8,\r\n\tmargin: { \r\n\t\ttop: 40,\r\n\t\tright: 40,\r\n\t\tbottom: 60,\r\n\t\tleft: 60\r\n\t}\r\n  };\r\n  \r\nexport const bounds = {\r\n\twidth: wrapper.wrapperWidth - wrapper.margin.left - wrapper.margin.right,\r\n\theight: wrapper.wrapperHeight - wrapper.margin.top - wrapper.margin.bottom,\r\n};","import React, { useState, useEffect, useContext } from 'react';\r\n\r\n// params\r\nimport { chartParams, cParamCategories } from \"./appParams\";\r\n\r\n// components\r\nimport { ChartGapminder } from './chart/ChartGapminder'; \r\nimport { Navbar } from './interface/Navbar';\r\n\r\n// context\r\nimport { dataContext } from '../../context/dataContext';\r\nimport { selectionContext } from '../../context/selectionContext';\r\n\r\n// data\r\nimport stateInfo from '../../data/stateInfo.json';\r\nimport { gapminderData } from './gapminderData';\r\n\r\n// style\r\nimport { wrapper, bounds } from \"./styles/dimensions\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const AppGapminder = () => {\r\n\tconst { margin } = wrapper;\r\n\tconst { width } = bounds;\r\n\r\n\tconst {dataStates} = useContext(dataContext);\r\n\tconst [data, setData] = useState(null);\r\n\tconst [selector, setSelector] = useState({\r\n\t\txParam: chartParams.xParam, \r\n\t\tyParam: chartParams.yParam, \r\n\t\tzParam: chartParams.zParam, \r\n\t\tcParam: chartParams.cParam, \r\n\t});\r\n\tconst [selectedCircles, setSelectedCircles] = useState({\r\n\t\tselected: [], \r\n\t\tnotSelected: Object.keys(stateInfo), \r\n\t\tall: Object.keys(stateInfo)\r\n\t});\r\n\r\n\t// style\r\n\tconst useStyles = makeStyles((theme) => ({\r\n\t\tnavbar: {\r\n\t\t\twidth: width,\r\n\t\t\tmarginLeft: margin.left,\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tjustifyContent: 'flex-start',\r\n\t\t}\r\n\t}));\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleSelector = (e) => {\r\n\t\tconst param = e.target.name;\r\n\r\n\t\tsetSelector({\r\n\t\t\t...selector,\r\n\t\t\t[param]: {\r\n\t\t\t\t...selector[param],\r\n\t\t\t\tselected: e.target.value\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (dataStates.length > 0) {\r\n\t\t\tgapminderData(dataStates, stateInfo, chartParams)\r\n\t\t\t\t.then(res => setData(res))\r\n\t\t}\r\n\t}, [dataStates]);\r\n\r\n\treturn (\r\n\t\t<selectionContext.Provider value={{selectedCircles, setSelectedCircles}}>\r\n\t\t\t<Navbar \t\t\t\t\t\t\t\t\r\n\t\t\t\tdata={data} \r\n\t\t\t\tselector={selector} \r\n\t\t\t\thandleSelector={handleSelector}\r\n\t\t\t\tclassName={classes.navbar}\r\n\t\t\t/>\r\n\t\t\t<div transform={`translate(${margin.left}, ${margin.top})`}>\r\n\t\t\t\t{data \r\n\t\t\t\t\t&& <ChartGapminder\r\n\t\t\t\t\t\tcParamCategories={cParamCategories} \r\n\t\t\t\t\t\tselector={selector}\r\n\t\t\t\t\t\tdata={data}\r\n\t\t\t\t\t\twrapper={wrapper} \r\n\t\t\t\t\t\tbounds={bounds} \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</selectionContext.Provider>\r\n\t)\r\n};\r\n","import * as d3 from \"d3\";\r\n\r\nconst date = {\r\n  dateFormatter: d3.timeFormat(\"%m-%d-%y\"),\r\n  dateParser: d3.timeParse(\"%m-%d-%y\"),\r\n};\r\n\r\nconst dimensions = {\r\n  width: window.innerWidth,\r\n  height: 750,\r\n  margin: {\r\n    top: 80,\r\n    right: 100,\r\n    bottom: 140,\r\n    left: 100,\r\n  },\r\n};\r\n\r\nconst bounded = {\r\n  width: dimensions.width - dimensions.margin.left - dimensions.margin.right,\r\n  height: dimensions.height - dimensions.margin.top - dimensions.margin.bottom,\r\n};\r\n\r\nexport { date, dimensions, bounded };\r\n","import { useEffect, useContext } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\n// context\r\nimport { dataContext } from '../../context/dataContext';\r\n\r\n// constants\r\nimport { date } from '../util/constants';\r\n\r\nexport const MouseMove = (props) => {\r\n\tconst { focus, overlay, linesStates, selectedStates, bounds } = props;\r\n    const { width, height } = bounds;\r\n\tconst { dataStates } = useContext(dataContext);\r\n\t\r\n    const xScale = d3.scaleLinear().domain(d3.extent(dataStates, d => d.dayOfOutbreak)).range([0, width]);\r\n    const yScale = d3.scaleLinear().domain(d3.extent(dataStates, d => d.casesPerThousand)).range([height, 0]);\r\n\r\n    useEffect(() => {\r\n        if (overlay && selectedStates) {\r\n\t\t\t\r\n            overlay.on('mousemove', mousemove);\r\n\r\n            let frozen = false;\r\n\r\n            function mousemove() {\r\n                let x0 = xScale.invert(d3.mouse(this)[0]);\r\n\t\t\t\tconst bisectDate = d3.bisector(d => d.dayOfOutbreak).left;\r\n\r\n                Object.keys(selectedStates).sort()\r\n                    .filter(s => selectedStates[s].selected === true)\r\n                    .forEach(state => {\r\n                        const dataEachState = dataStates.filter(d => d.state === state);\r\n                        const stateHTML = selectedStates[state].htmlFormat;\r\n                        const i = bisectDate(dataEachState, x0, 0);\r\n\r\n                        let dataEachStateRangeY = dataEachState[i]\r\n                            ? dataEachState[i].casesPerThousand \r\n                            : dataEachState[dataEachState.length - 1].casesPerThousand;\r\n                        let dataEachStateRangeX = dataEachState[i] \r\n                            ? dataEachState[i].dayOfOutbreak \r\n                            : dataEachState[dataEachState.length - 1].dayOfOutbreak;\r\n                        let dataEachStateRangeDate = dataEachState[i] \r\n                            ? date.dateFormatter(dataEachState[i].date) \r\n                            : date.dateFormatter(dataEachState[dataEachState.length - 1].date);\r\n                        let dataEachStateRangeCases = dataEachState[i]\r\n                            ? dataEachState[i].cases \r\n                            : dataEachState[dataEachState.length - 1].cases;\r\n\r\n                        const toggleFreeze = () => {\r\n\t\t\t\t\t\t\tfrozen = !frozen;\r\n                        };\r\n\r\n                        overlay.on('click', toggleFreeze);\r\n\r\n                        if (!frozen) {\r\n                            focus.select(`#circle-${stateHTML}`)\r\n                                .attr('cy', yScale(dataEachStateRangeY))\r\n                                .attr('cx', xScale(dataEachStateRangeX));\r\n\r\n                            focus.select(`#d-label-${stateHTML}`)\r\n                                .text(`${selectedStates[state].abbreviation} => Day ${dataEachStateRangeX} (${dataEachStateRangeDate.split(\"-\").slice(0,2).join(\"-\")})`)\r\n\t\t\t\t\t\t\t\t.attr('fill', selectedStates[state].color)\r\n\r\n                            focus.select(`#d-label-b-${stateHTML}`)\r\n                                .text(`${dataEachStateRangeY.toFixed(3)} (${dataEachStateRangeCases} tot.)`)\r\n                                .attr('fill', selectedStates[state].color)\r\n                        } \r\n                    });\r\n                }\r\n\t\t\t}\r\n\t}, [linesStates]);\r\n\t\r\n    return null;\r\n};","import React, { useState, useContext, useEffect, Fragment } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\n// functions\r\nimport { MouseMove } from \"../../util/MouseMove\";\r\n\r\n// context\r\nimport { dataContext } from \"../../../context/dataContext\";\r\nimport { statesContext } from \"../../../context/statesContext\";\r\n\r\n// style\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport { useMediaQuery } from \"@material-ui/core\";\r\n\r\nexport const Line = props => {\r\n    const {\r\n        focus,\r\n\t\toverlay,\r\n        selectedStates,\r\n\t\tbounds,\r\n    } = props;\r\n    const { width, height } = bounds;\r\n\r\n    // context\r\n    const { dataStates } = useContext(dataContext);\r\n\tconst { infoStates } = useContext(statesContext);\r\n\r\n    // style\r\n    const theme = useTheme();\r\n\tconst mqMedium = useMediaQuery(theme.breakpoints.up(\"md\"));\r\n\tconst mqLarge = useMediaQuery(theme.breakpoints.up(\"lg\"));\r\n\r\n\tconst [linesStates, setLinesStates] = useState([]);\r\n\r\n\tconst filterStates = statesObject => {\r\n\t\tlet filtered = Object.keys(statesObject)\r\n\t\t\t.sort()\r\n\t\t\t.filter(s => statesObject[s].selected === true);\r\n\t\treturn filtered;\r\n\t};\r\n\r\n    useEffect(() => {\r\n        if (selectedStates && dataStates.length > 0) {\r\n\t\t\t// Scales\r\n            const xScale = d3\r\n                .scaleLinear()\r\n                .domain(d3.extent(dataStates, d => d.dayOfOutbreak))\r\n                .range([0, width]);\r\n            const yScale = d3\r\n                .scaleLinear()\r\n                .domain(d3.extent(dataStates, d => d.casesPerThousand))\r\n                .range([height, 0]);\r\n\r\n            // Lines\r\n            const lineGenerator = d3\r\n                .line()\r\n                .x(d => xScale(d.dayOfOutbreak))\r\n                .y(d => yScale(d.casesPerThousand));\r\n\r\n            const linesObject = {};\r\n\r\n\t\t\tconst filtered = filterStates(selectedStates)\r\n\t\t\tfiltered\r\n                .forEach((state, i) => {\r\n                    const dataEachState = dataStates.filter(\r\n                        d => d.state === state\r\n                    );\r\n                    // Line label placement\r\n                    const lastDayOfOutbreak =\r\n                        dataEachState[dataEachState.length - 1].dayOfOutbreak;\r\n                    const lastCasesPerThousand =\r\n                        dataEachState[dataEachState.length - 1]\r\n                            .casesPerThousand;\r\n\r\n                    // markers for lockdown date\r\n                    const lockdownDate = selectedStates[state].lockdown;\r\n                    const lockdownDay =\r\n                        (lockdownDate - dataEachState[0].date) /\r\n                            (24 * 60 * 60 * 10 * 10 * 10) +\r\n                        1;\r\n                    const lockdownDayDatum = dataEachState.filter(\r\n                        d => d.dayOfOutbreak === lockdownDay\r\n                    )[0];\r\n\r\n                    if (lockdownDayDatum) {\r\n                        linesObject[state] = {\r\n                            line: lineGenerator(dataEachState),\r\n                            lineLabelX: xScale(lastDayOfOutbreak) + 3,\r\n                            lineLabelY: yScale(lastCasesPerThousand),\r\n                            lockdownMarkerX: xScale(lockdownDay),\r\n                            lockdownMarkerY: yScale(\r\n                                lockdownDayDatum.casesPerThousand\r\n                            ),\r\n                        };\r\n                    } else {\r\n                        linesObject[state] = {\r\n                            line: lineGenerator(dataEachState),\r\n                            lineLabelX: xScale(lastDayOfOutbreak) + 3,\r\n                            lineLabelY: yScale(lastCasesPerThousand),\r\n                        };\r\n                    }\r\n                });\r\n            setLinesStates(linesObject);\r\n        };\r\n\t}, [dataStates, selectedStates, theme]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (selectedStates) {\r\n\t\t\tconst filtered = filterStates(selectedStates);\r\n\r\n\t\t\tfiltered\r\n\t\t\t.forEach((state, i) => {\r\n\t\t\t\tconst stateHTML = infoStates[state].htmlFormat;\r\n\t\t\t\t// for mousemove\r\n\t\t\t\tlet xShift = 0;\r\n\t\t\t\tlet yShift = 0;\r\n\r\n\t\t\t\tif (i > 11) {\r\n\t\t\t\t\tif (mqLarge) {\r\n\t\t\t\t\t\txShift = 180;\r\n\t\t\t\t\t\tyShift = 12 * 40;\r\n\t\t\t\t\t} else if (mqMedium) {\r\n\t\t\t\t\t\txShift = 120;\r\n\t\t\t\t\t\tyShift = 12 * 40;\r\n\t\t\t\t\t} \r\n\t\t\t\t}\r\n\r\n\t\t\t\tfocus\r\n\t\t\t\t\t.append(\"circle\")\r\n\t\t\t\t\t.attr(\"id\", `circle-${stateHTML}`)\r\n\t\t\t\t\t.attr(\"r\", 5)\r\n\t\t\t\t\t.attr(\"fill\", selectedStates[state].color)\r\n\t\t\t\t\t.attr(\"stroke\", theme.palette.text.primary);\r\n\r\n\t\t\t\tif (mqMedium ? i < 24 : i < 12) {\r\n\t\t\t\t\tfocus\r\n\t\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t\t.attr(\"id\", `d-label-${stateHTML}`)\r\n\t\t\t\t\t\t.attr(\"x\", 10 + xShift)\r\n\t\t\t\t\t\t.attr(\"y\", d => mqMedium ? 10 + i * 40 - yShift : 10 + i * 30)\r\n\t\t\t\t\t\t.style(\"font-size\", d => mqLarge ? \".8rem\" : \".6rem\")\r\n\t\t\t\t\t\t.style(\r\n\t\t\t\t\t\t\t\"font-family\",\r\n\t\t\t\t\t\t\t\"ralewaymedium, Helvetica, Arial, sans-serif\"\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\tfocus\r\n\t\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t\t.attr(\"id\", `d-label-b-${stateHTML}`)\r\n\t\t\t\t\t\t.attr(\"x\", 10 + xShift)\r\n\t\t\t\t\t\t.attr(\"y\", d => mqMedium ? 25 + i * 40 - yShift : 25 + i * 30)\r\n\t\t\t\t\t\t.style(\"font-size\", d => mqLarge ? \".8rem\" : \".6rem\")\r\n\t\t\t\t\t\t.style(\r\n\t\t\t\t\t\t\t\"font-family\",\r\n\t\t\t\t\t\t\t\"ralewaymedium, Helvetica, Arial, sans-serif\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tfocus.selectAll(\"circle\").remove();\r\n\t\t\tfocus.selectAll(\"text\").remove();\r\n        };\r\n\t}, [linesStates]);\r\n\r\n    return (\r\n        <>\t\r\n            <MouseMove\r\n                focus={focus}\r\n\t\t\t\toverlay={overlay}\r\n\t\t\t\tlinesStates={linesStates}\r\n\t\t\t\tbounds={bounds}\r\n                {...props}\r\n            />\r\n            {dataStates.length > 0 ? (\r\n                Object.keys(linesStates)\r\n                    .sort()\r\n                    .map((state, i) => {\r\n                        const stateHTML = infoStates[state].htmlFormat;\r\n\r\n                        return (\r\n\t\t\t\t\t\t\t<Fragment key={state}>\r\n\t\t\t\t\t\t\t\t<g id={`bounds-render-${stateHTML}`}>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tstroke={selectedStates[state].color}\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2.5}\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\td={linesStates[state].line}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<circle\r\n\t\t\t\t\t\t\t\t\t\tid=\"line-marker-lockdown\"\r\n\t\t\t\t\t\t\t\t\t\tr={4}\r\n\t\t\t\t\t\t\t\t\t\tfill={\r\n\t\t\t\t\t\t\t\t\t\t\tlinesStates[state].lockdownMarkerX\r\n\t\t\t\t\t\t\t\t\t\t\t\t? selectedStates[state].color\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"none\"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tcx={linesStates[state].lockdownMarkerX}\r\n\t\t\t\t\t\t\t\t\t\tcy={linesStates[state].lockdownMarkerY}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\tid={`line-label-${stateHTML}`}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"line-label\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tfill: theme.palette.text.primary,\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\t\t\t\t\t\t\t\tfontFamily:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"ralewaymedium, Helvetica, Arial, sans-serif\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tx={linesStates[state].lineLabelX}\r\n\t\t\t\t\t\t\t\t\t\ty={linesStates[state].lineLabelY}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{selectedStates[state].abbreviation}\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t</Fragment>\r\n                        );\r\n                    })\r\n            ) : (\r\n                <g></g>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","import React, { useContext, useEffect, useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as d3 from \"d3\";\r\n\r\n// Components\r\nimport { Line } from \"./Line\";\r\n\r\n// Context\r\nimport { dataContext } from \"../../../context/dataContext\";\r\n\r\n// Styles\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const ChartCovidCompare = props => {\r\n\tconst { wrapper, bounds } = props;\r\n\tconst { wrapperWidth, wrapperHeight, margin } = wrapper;\r\n\tconst { width, height } = bounds;\r\n\tconst { dataStates } = useContext(dataContext);\r\n\r\n\tconst useStyles = makeStyles(theme => ({\r\n\t\trootSVG: {\r\n\t\t\tdisplay: \"inline-block\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tverticalAlign: \"middle\",\r\n\t\t\toverflow: \"hidden\",\r\n\t\t},\r\n\t\tbounds: {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontSize: \"1.2rem\",\r\n\t\t},\r\n\t\taxes: {\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t},\r\n\t\taxisLabel: {\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontSize: \".8rem\",\r\n\t\t},\r\n\t\tfootnotes: {\r\n\t\t\tfill: theme.palette.text.primary,\r\n\t\t\tfontSize: \".6rem\",\r\n\t\t},\r\n\t}));\r\n\tlet classes = useStyles();\r\n\r\n    const yAxisRef = useRef(null);\r\n    const xAxisRef = useRef(null);\r\n    const svgRef = useRef(null);\r\n\tconst boundsRef = useRef(null);\r\n\r\n\tconst getFocus = () => {\r\n\t\treturn d3\r\n\t\t\t.select(boundsRef.current)\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"focus\")\r\n\t\t\t.style(\"display\", \"none\");\r\n\t};\r\n\tconst focus = getFocus();\r\n\r\n\tconst getOverlay = () => {\r\n\t\treturn d3\r\n\t\t\t.select(boundsRef.current)\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"overlay\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height)\r\n\t\t\t.attr(\"opacity\", \"0\")\r\n\t\t\t.on(\"mouseover\", () => focus.style(\"display\", null));\r\n\t};\r\n\tconst overlay = getOverlay();\r\n\r\n    useEffect(() => {\r\n        // Scales\r\n        const xScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d.dayOfOutbreak))\r\n            .range([0, width]);\r\n        const yScale = d3\r\n            .scaleLinear()\r\n            .domain(d3.extent(dataStates, d => d.casesPerThousand))\r\n            .range([height, 0]);\r\n\r\n        // Axes\r\n        const yAxisGenerator = d3.axisLeft().scale(yScale);\r\n        const xAxisGenerator = d3.axisBottom().scale(xScale);\r\n        d3.select(xAxisRef.current).call(xAxisGenerator);\r\n        d3.select(yAxisRef.current).call(yAxisGenerator);\r\n\t}, [dataStates]);\r\n\r\n    return (\r\n\t\t<>\r\n\t\t\t<svg \r\n\t\t\t\tid=\"line-app\" \r\n\t\t\t\theight={wrapperHeight} \r\n\t\t\t\twidth={wrapperWidth} \r\n\t\t\t\tref={svgRef}\r\n\t\t\t\tclassName={classes.rootSVG}\r\n\t\t\t\tviewBox={`0 0 ${wrapperWidth} ${wrapperHeight}`}\r\n\t\t\t\t// preserveAspectRatio=\"xMinYMin meet\"\r\n\t\t\t>\r\n                <text\r\n                    className={classes.title}\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    textAnchor=\"middle\"\r\n                    transform={`translate (${\r\n                        margin.left + width / 2\r\n                    }, ${margin.top / 2})`}\r\n                >\r\n                    COVID-19 US State Comparison\r\n                </text>\r\n                <text\r\n                    className={classes.axisLabel}\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    textAnchor=\"middle\"\r\n                    transform={`translate(${margin.left + width / 2}, ${\r\n                        height + margin.top + 40\r\n                    })`}\r\n                >\r\n                    Day of Outbreak\r\n                </text>\r\n                <text\r\n                    className={classes.axisLabel}\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    textAnchor=\"middle\"\r\n                    transform={`translate(${\r\n                        margin.left * .6\r\n                    }, ${height / 2}) rotate(-90)`}\r\n                >\r\n                    Cases per 1000 people\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    transform={`translate(${margin.left}, ${\r\n                        height + margin.top + 60\r\n                    })`}\r\n                >\r\n                    *Data from The New York Times, based on reports from state\r\n                    and local health agencies.\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    transform={`translate(${margin.left}, ${\r\n                        height + margin.top + 80\r\n                    })`}\r\n                >\r\n                    **Population data from US Census Bureau (2019).\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    transform={`translate(${margin.left}, ${\r\n                        height + margin.top + 100\r\n                    })`}\r\n                >\r\n                    ***2/27 is earliest possible 'Day 1,' since prior cases were\r\n                    isolated and may skew insights of \"community spread\"\r\n                </text>\r\n                <text\r\n                    className={classes.footnotes}\r\n                    textAnchor=\"left\"\r\n                    style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    transform={`translate(${margin.left}, ${\r\n                        height + margin.top + 120\r\n                    })`}\r\n                >\r\n                    †Legend will display up to 24 states (alphabetical order)\r\n                </text>\r\n                <g\r\n                    id=\"bounds\"\r\n                    transform={`translate(${margin.left}, ${margin.top})`}\r\n                    ref={boundsRef}\r\n                >\r\n                    <g\r\n                        ref={yAxisRef}\r\n                        id=\"y-axis\"\r\n                        style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    />\r\n                    <g\r\n                        ref={xAxisRef}\r\n                        id=\"x-axis\"\r\n                        transform={`translate(0,${height})`}\r\n                        style={{fontFamily: \"ralewaymedium, Helvetica, Arial, sans-serif\"}}\r\n                    />\r\n                    <Line focus={focus} overlay={overlay} {...props} />\r\n                </g>\r\n            </svg>\r\n\t\t</>\r\n    );\r\n};\r\n\r\nChartCovidCompare.propTypes = {\r\n\twrapper: PropTypes.object,\r\n\tbounds: PropTypes.object,\r\n};","// REUSABLE COMPONENT\r\n\r\nimport React, { forwardRef } from 'react';\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { MenuItem } from \"@material-ui/core\";\r\n\r\nexport const FilterValues = forwardRef((props, ref) => {\r\n\tconst { filterOptions, handleSelectedFilter, handleMenu } = props;\r\n\r\n\tconst handleMenuClick = (newFilter) => {\r\n\t\thandleMenu();\r\n\t\thandleSelectedFilter(newFilter);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{filterOptions.map(o => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\tkey={o.id}\r\n\t\t\t\t\t\tid={o.id}\r\n\t\t\t\t\t\tref={ref} \r\n\t\t\t\t\t\tonClick={() => handleMenuClick(o)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{o.name}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</>\r\n\t);\r\n});\r\n\r\nFilterValues.propTypes = {\r\n\tfilterOptions: PropTypes.arrayOf(PropTypes.shape({\r\n\t\tid: PropTypes.string.isRequired, // unique ID; html format \r\n\t\tname: PropTypes.string, // user-facing name of filter \r\n\t\ttype: PropTypes.string, // user-facing parameter being filtered (eg. \"GDP\")\r\n\t\tchartParam: PropTypes.string.isRequired, // match exact parameter name (eg. \"realGDP2019\")\r\n\t\tn: PropTypes.number.isRequired, // number of cases (ie. rows or documents) to filter\r\n\t\tsort: PropTypes.string.isRequired // \"ascending or descending\"\r\n\t})),\r\n};","// WRAPPER COMPONENT (FilterValues)\r\n\r\nimport React, { useState } from 'react';\r\nimport { FilterValues } from \"../components/FilterValues\";\r\n\r\nimport { Menu, Button } from \"@material-ui/core\";\r\n\r\nexport const FilterCases = (props) => {\r\n\tconst { nStates, handleSelectedFilter } = props;\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\t\r\n\tconst filterOptions = [\r\n\t\t{id: \"cases-high\", name: `Top ${nStates} (total)`, type: \"Cases\", chartParam: \"latestCaseCount\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"cases-low\", name: `Bottom ${nStates} (total)`, type: \"Cases\", chartParam: \"latestCaseCount\", sort: \"ascending\", n: nStates},\r\n\t\t{id: \"cases-per-1000-high\", name: `Top ${nStates} (per 1000)`, type: \"Cases\", chartParam: \"latestCaseCountPerThou\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"cases-per-1000-low\", name: `Bottom ${nStates} (per 1000)`, type: \"Cases\", chartParam: \"latestCaseCountPerThou\", sort: \"ascending\", n: nStates},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button id=\"cases-btn\" onClick={handleMenu}>\r\n\t\t\t\tFilter By Case\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"cases-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t<FilterValues \r\n\t\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t\t\thandleMenu={handleMenu}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n};\r\n","// WRAPPER COMPONENT (FilterValues)\r\n\r\nimport React, { useState } from 'react';\r\nimport { FilterValues } from \"../components/FilterValues\";\r\n\r\nimport { Menu, Button } from \"@material-ui/core\";\r\n\r\nexport const FilterPopulation = (props) => {\r\n\tconst { nStates, handleSelectedFilter } = props;\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\t\r\n\tconst filterOptions = [\r\n\t\t{id: \"pop-high\", name: `Top ${nStates} (pop. total)`, type: \"Pop.\", chartParam: \"population\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"pop-low\", name: `Bottom ${nStates} (pop. total)`, type: \"Pop.\", chartParam: \"population\", sort: \"ascending\", n: nStates},\r\n\t\t{id: \"pop-density-high\", name: `Top ${nStates} (pop. density)`, type: \"Pop.\", chartParam: \"populationDensity\", sort: \"descending\", n: nStates},\r\n\t\t{id: \"pop-density-low\", name: `Bottom ${nStates} (pop. density)`, type: \"Pop.\", chartParam: \"populationDensity\", sort: \"ascending\", n: nStates}\r\n\t];\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button id=\"population-btn\" onClick={handleMenu}>\r\n\t\t\t\tFilter By Population\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"population-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t<FilterValues \r\n\t\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t\t\thandleMenu={handleMenu}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n};\r\n","// REUSABLE COMPONENT\r\n\r\nimport React, {forwardRef} from 'react';\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { MenuItem } from \"@material-ui/core\";\r\n\r\nexport const FilterCategories = forwardRef((props, ref) => {\r\n\tconst { filterOptions, handleSelectedFilter, handleMenu } = props;\r\n\r\n\tconst handleMenuClick = (newFilter) => {\r\n\t\thandleMenu();\r\n\t\thandleSelectedFilter(newFilter);\r\n\t}; \r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{filterOptions.map(o => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MenuItem \r\n\t\t\t\t\t\tkey={o.id}\r\n\t\t\t\t\t\tid={o.id} \r\n\t\t\t\t\t\tref={ref}\r\n\t\t\t\t\t\tonClick={() => handleMenuClick(o)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{o.name}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</>\r\n\t);\r\n});\r\n\r\nFilterCategories.propTypes = {\r\n\tfilterOptions: PropTypes.arrayOf(PropTypes.shape({\r\n\t\tid: PropTypes.string.isRequired, // unique ID; html format \r\n\t\tname: PropTypes.string, // user-facing name of filter \r\n\t\ttype: PropTypes.string, // user-facing parameter being filtered (eg. \"Region\")\r\n\t\tchartParam: PropTypes.string.isRequired, // match exact parameter name (eg. \"region\")\r\n\t})),\r\n};","// WRAPPER COMPONENT (FilterCategories)\r\n\r\nimport React, { useState } from 'react';\r\n\r\n// components\r\nimport { FilterCategories } from \"../components/FilterCategories\";\r\n\r\nimport { Menu, Button } from \"@material-ui/core\";\r\n\r\nexport const FilterRegion = (props) => {\r\n\tconst { handleSelectedFilter } = props;\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleMenu = (e) => {\r\n\t\t!anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n\t};\r\n\t\r\n\tconst filterOptions = [\r\n\t\t{id: \"northeast\", name: \"Northeast\", type: \"Region\", chartParam: \"region\"},\r\n\t\t{id: \"midwest\", name: \"Midwest\", type: \"Region\", chartParam: \"region\"},\r\n\t\t{id: \"south\", name: \"South\", type: \"Region\", chartParam: \"region\"},\r\n\t\t{id: \"west\", name: \"West\", type: \"Region\", chartParam: \"region\"}\r\n\t];\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button id=\"region-btn\" onClick={handleMenu}>\r\n\t\t\t\tFilter By Region\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"region-btn\") : false}\r\n\t\t\t\tonClose={handleMenu}\r\n\t\t\t>\r\n\t\t\t\t<FilterCategories \r\n\t\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t\t\thandleMenu={handleMenu}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t)\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useMediaQuery, Grid } from \"@material-ui/core\";\r\n\r\n// components\r\nimport { FilterCases } from \"./FilterCases\";\r\nimport { FilterPopulation } from \"./FilterPopulation\";\r\nimport { FilterRegion } from \"./FilterRegion\";\r\n\r\n// context\r\nimport { statesContext } from \"../../../context/statesContext\";\r\n\r\n// styles\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\trootContainer: {\r\n\t\tmaxWidth: 550,\r\n\t\tminWidth: 175,\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\tpadding: 0,\r\n\t\tmargin: 0,\r\n\t},\r\n    tab: {\r\n        opacity: 0.7,\r\n    },\r\n    menuItem: {\r\n        opacity: 0.7,\r\n        \"&:hover\": {\r\n            opacity: 1,\r\n        },\r\n    },\r\n}));\r\n\r\nexport const BatchSelect = props => {\r\n    const { selectedStates, setSelectedStates } = props;\r\n\r\n    // ref and context\r\n\tconst { infoStates } = useContext(statesContext);\r\n\r\n    // assign\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const [selectedFilter, setSelectedFilter] = useState(null);\r\n\r\n\t// style\r\n\tconst theme = useTheme();\r\n\tconst classes = useStyles();\r\n\tconst mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\t\r\n\tconst handleSelectedFilter = (newSelectedFilter) => {\r\n\t\tsetSelectedFilter(newSelectedFilter);\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\tconst handleFilterCategories = (newFilter, info) => {\r\n        const filtered = Object.keys(info).filter(\r\n            s => info[s][newFilter.chartParam] === newFilter.name\r\n\t\t);\r\n\r\n\t\tlet newSelection = {};\r\n\t\tObject.keys(info).forEach(s => {\r\n\t\t\tif (filtered.includes(s)) {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: true}\r\n\t\t\t} else {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: false}\r\n\t\t\t}\r\n\t\t});\r\n\r\n        return newSelection;\r\n    };\r\n\t\r\n    const handleFilterValues = (newFilter, info) => {\r\n\t\tconst n = newFilter.n;\r\n\t\tlet filtered;\r\n\r\n\t\tfiltered = Object.keys(info)\r\n\t\t.sort((a, b) =>\r\n\t\t\tnewFilter.sort === \"descending\"\r\n\t\t\t\t? info[b][newFilter.chartParam] -\r\n\t\t\t\t\tinfo[a][newFilter.chartParam]\r\n\t\t\t\t: info[a][newFilter.chartParam] -\r\n\t\t\t\t\tinfo[b][newFilter.chartParam]\r\n\t\t)\r\n\t\t.slice(0, n);\r\n\t\t\t\r\n\t\tlet newSelection = {};\r\n\t\tObject.keys(info).forEach(s => {\r\n\t\t\tif (filtered.includes(s)) {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: true}\r\n\t\t\t} else {\r\n\t\t\t\tnewSelection[s] = {...info[s], selected: false}\r\n\t\t\t}\r\n\t\t});\r\n\r\n        return newSelection;\r\n    };\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (selectedFilter) {\r\n\t\t\tconst newSelection = selectedFilter.n \r\n\t\t\t\t? handleFilterValues(selectedFilter, infoStates)\r\n\t\t\t\t: handleFilterCategories(selectedFilter, infoStates);\r\n\t\t\tsetSelectedStates(newSelection);\r\n\t\t}\r\n\t},[selectedFilter]);\r\n\r\n    return (\r\n\t\t<Grid container className={classes.rootContainer}\r\n\t\t\tstyle={mqSmall\r\n\t\t\t? {flexDirection: \"column\", alignItems: \"center\"}\r\n\t\t\t: {flexDirection: \"row\"}}\r\n\t\t>\r\n\t\t\t<FilterCases\r\n\t\t\t\taria-controls=\"cases-btn\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tclassName={classes.tab}\r\n\t\t\t\tnStates={12}\r\n\t\t\t\tselectedStates={selectedStates}\r\n\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t/>\r\n\t\t\t<FilterPopulation\r\n\t\t\t\taria-controls=\"population-btn\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tclassName={classes.tab}\r\n\t\t\t\tnStates={12}\r\n\t\t\t\tselectedStates={selectedStates}\r\n\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t/>\r\n\t\t\t<FilterRegion\r\n\t\t\t\taria-controls=\"region-btn\"\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\tclassName={classes.tab}\r\n\t\t\t\tselectedStates={selectedStates}\r\n\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\thandleSelectedFilter={handleSelectedFilter}\r\n\t\t\t/>\r\n        </Grid>\r\n    );\r\n};","import React from \"react\";\r\nimport {\r\n    IconButton,\r\n    FormControlLabel,\r\n    FormGroup,\r\n    Checkbox,\r\n    Typography,\r\n    Divider,\r\n} from \"@material-ui/core\";\r\n\r\n// styles\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\n\r\nexport const Dashboard = props => {\r\n    const {\r\n        selectedStates,\r\n        handleSelectedStates,\r\n        handleSelectAllStates,\r\n        handleDeselectAllStates,\r\n    } = props;\r\n\r\n    const theme = useTheme();\r\n\r\n    return (\r\n        <div>\r\n            <FormGroup\r\n                style={{\r\n                    alignItems: \"left\",\r\n                    backgroundColor: theme.palette.primary.main,\r\n                    color: theme.palette.text.primary,\r\n                }}\r\n            >\r\n                <FormControlLabel\r\n                    id=\"select-all\"\r\n                    label=\"Select All\"\r\n                    name=\"Select All\"\r\n                    onClick={handleSelectAllStates}\r\n                    control={\r\n                        <IconButton\r\n                            id=\"selector-all\"\r\n                            name=\"select-all\"\r\n                            style={{ color: \"white\" }}\r\n                        >\r\n                            <CheckIcon />\r\n                        </IconButton>\r\n                    }\r\n                />\r\n                <FormControlLabel\r\n                    id=\"deselect-all\"\r\n                    label=\"Deselect All\"\r\n                    name=\"Deselect All\"\r\n                    onClick={handleDeselectAllStates}\r\n                    control={\r\n                        <IconButton\r\n                            id=\"deselector-all\"\r\n                            name=\"deselect-all\"\r\n                            style={{ color: \"red\" }}\r\n                        >\r\n                            <ClearIcon />\r\n                        </IconButton>\r\n                    }\r\n                />\r\n                <br />\r\n                <Typography\r\n                    variant=\"h6\"\r\n                    style={{ color: theme.palette.primary.contrastText }}\r\n                >\r\n                    Selected\r\n                </Typography>\r\n                <Divider\r\n                    style={{\r\n                        backgroundColor: theme.palette.primary.contrastText,\r\n                    }}\r\n                />\r\n                {selectedStates ? (\r\n                    Object.keys(selectedStates)\r\n                        .sort()\r\n                        .filter(s => selectedStates[s].selected === true)\r\n                        .map((state, i) => {\r\n                            return (\r\n                                <FormControlLabel\r\n                                    key={i}\r\n                                    id={selectedStates[state].htmlFormat}\r\n                                    name={state}\r\n                                    checked={selectedStates[state].selected}\r\n                                    onChange={handleSelectedStates}\r\n                                    control={\r\n                                        <Checkbox\r\n                                            name={state}\r\n                                            style={{\r\n                                                color:\r\n                                                    selectedStates[state].color,\r\n                                            }}\r\n                                        />\r\n                                    }\r\n                                    label={`${state} (${selectedStates[state].abbreviation})`}\r\n                                />\r\n                            );\r\n                        })\r\n                ) : (\r\n                    <div />\r\n                )}\r\n                <br />\r\n                <Typography\r\n                    variant=\"h6\"\r\n                    style={{ color: theme.palette.primary.contrastText }}\r\n                >\r\n                    Not Selected\r\n                </Typography>\r\n                <Divider\r\n                    style={{\r\n                        backgroundColor: theme.palette.primary.contrastText,\r\n                    }}\r\n                />\r\n                {selectedStates ? (\r\n                    Object.keys(selectedStates)\r\n                        .sort()\r\n                        .filter(s => selectedStates[s].selected === false)\r\n                        .map((state, i) => {\r\n                            return (\r\n                                <FormControlLabel\r\n                                    key={i}\r\n                                    id={selectedStates[state].htmlFormat}\r\n                                    name={state}\r\n                                    checked={selectedStates[state].selected}\r\n                                    onChange={handleSelectedStates}\r\n                                    control={\r\n                                        <Checkbox\r\n                                            name={state}\r\n                                            style={{\r\n                                                color:\r\n                                                    selectedStates[state].color,\r\n                                            }}\r\n                                        />\r\n                                    }\r\n                                    label={`${state} (${selectedStates[state].abbreviation})`}\r\n                                />\r\n                            );\r\n                        })\r\n                ) : (\r\n                    <div />\r\n                )}\r\n            </FormGroup>\r\n        </div>\r\n    );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n    AppBar,\r\n    Toolbar,\r\n    IconButton,\r\n    ClickAwayListener,\r\n    Drawer,\r\n    Divider,\r\n    Menu,\r\n\tTooltip,\r\n\tuseMediaQuery\r\n} from \"@material-ui/core\";\r\nimport clsx from \"clsx\";\r\n\r\n// components\r\nimport { BatchSelect } from \"../pickers/BatchSelect\";\r\nimport { Dashboard } from \"../pickers/Dashboard\";\r\n\r\n// styles\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\r\nimport BubbleChartIcon from \"@material-ui/icons/BubbleChart\";\r\nimport AssessmentIcon from '@material-ui/icons/Assessment';\r\n\r\nconst drawerWidth = 250;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n\t\tdisplay: \"flex\",\r\n    },\r\n    appBar: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: theme.palette.primary.contrastText,\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create([\"margin\", \"width\"], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    menuButton: {\r\n        color: theme.palette.primary.contrastText,\r\n        \"&:hover\": {\r\n            backgroundColor: \"transparent\",\r\n        },\r\n    },\r\n    hide: {\r\n        display: \"none\",\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 1,\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n    },\r\n    drawerHeader: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        padding: theme.spacing(0, 1),\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: \"flex-end\",\r\n        backgroundColor: theme.palette.background.default,\r\n    },\r\n    tab: {\r\n        opacity: 0.7,\r\n    },\r\n    menuItem: {\r\n        opacity: 0.7,\r\n        \"&:hover\": {\r\n            opacity: 1,\r\n        },\r\n    },\r\n}));\r\n\r\nexport const Navbar = props => {\r\n    const [open, setOpen] = useState(false);\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n\t\r\n\tconst theme = useTheme();\r\n\tconst classes = useStyles();\r\n\tconst mqSmall = useMediaQuery(theme.breakpoints.down(\"sm\"));\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleClickAway = e => {\r\n        if (e.x > drawerWidth && e.y > 70 && open) {\r\n            setOpen(false);\r\n        }\r\n    };\r\n\r\n    const handleFilterMenu = e => {\r\n        !anchorEl ? setAnchorEl(e.currentTarget) : setAnchorEl(null);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar\r\n                position=\"relative\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar>\r\n                    <IconButton\r\n                        onClick={handleDrawerOpen}\r\n                        className={clsx(\r\n                            classes.menuButton,\r\n                            open && classes.hide\r\n                        )}\r\n                        disableRipple\r\n                    >\r\n                        <MenuIcon className={classes.menuButton} />\r\n                    </IconButton>\r\n\t\t\t\t\t{mqSmall\r\n\t\t\t\t\t\t? <>\r\n\t\t\t\t\t\t\t<Tooltip title=\"Chart filters\"> \r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tid=\"filters-btn-cc\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleFilterMenu}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<AssessmentIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\t\t\t\topen={anchorEl ? Boolean(anchorEl.id === \"filters-btn-cc\") : false}\r\n\t\t\t\t\t\t\t\tonClose={handleFilterMenu}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<BatchSelect handleFilterMenu={handleFilterMenu} {...props} />\r\n\t\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t\t</> \r\n\t\t\t\t\t\t: <BatchSelect {...props} />\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<span style={{marginLeft: \"auto\"}}>\r\n\t\t\t\t\t\t<Tooltip title=\"Line chart\">\r\n\t\t\t\t\t\t\t<IconButton component=\"a\" href=\"/covidcompare/#/line-app\" className={classes.menuButton}>\r\n\t\t\t\t\t\t\t\t<TimelineIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t<Tooltip title=\"Gapminder chart\">\r\n\t\t\t\t\t\t\t<IconButton component=\"a\" href=\"/covidcompare/#/gapminder-app\" className={classes.menuButton}>\r\n\t\t\t\t\t\t\t\t<BubbleChartIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</span>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <ClickAwayListener onClickAway={handleClickAway}>\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    anchor=\"left\"\r\n                    open={open}\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    style={{ color: theme.palette.text.primary }}\r\n                >\r\n                    <div\r\n                        className={classes.drawerHeader}\r\n                        style={{ backgroundColor: theme.palette.primary.main }}\r\n                    >\r\n                        <IconButton\r\n                            color=\"inherit\"\r\n                            edge=\"end\"\r\n                            onClick={handleDrawerClose}\r\n                            style={{\r\n                                color: theme.palette.primary.contrastText,\r\n                            }}\r\n                        >\r\n                            <ChevronLeftIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    <Divider />\r\n                    <Dashboard {...props} />\r\n                </Drawer>\r\n            </ClickAwayListener>\r\n        </div>\r\n    );\r\n};\r\n","// Chart params: define params for drawing axes and chart\r\nexport const chartParams = {\r\n\tchartType: \"line\",\r\n\ttoTimestamp: null,\r\n\tmultiple: true,\r\n\tnormalize: true,\r\n\txParam: { // x-axis\r\n\t\ttype: 'linear',\r\n\t\tformat: 'number',\r\n\t\tselected: 'dayOfOutbreak',\r\n\t\talt1: null,\r\n\t\toptions: [\r\n\t\t\t\"dayOfOutbreak\",\r\n\t\t]\r\n\t},\r\n\tyParam: { // y-axis\r\n\t\ttype: 'linear',\r\n\t\tformat: 'number',\r\n\t\tselected: 'casesPerThousand',\r\n\t\talt1: 'deathsPerThousand',\r\n\t\toptions: [ \r\n\t\t\t\"casesPerThousand\",\r\n\t\t\t\"cases\",\r\n\t\t\t\"deathsPerThousand\",\r\n\t\t\t\"deaths\"\r\n\t\t],\r\n\t},\r\n\tzParam: {// z-axis (3rd dimension) (eg. size)\r\n\t\ttype: null,\r\n\t\tformat: null,\r\n\t\tselected: null,\r\n\t\toptions: [ \r\n\t\t\tnull\r\n\t\t]\r\n\t},\r\n\tcParam: { // color axis (categorical/ordinal data) (eg. gender, birthplace, etc.)\r\n\t\ttype: \"categorical\",\r\n\t\tselected: \"region\",\r\n\t\toptions: [ \r\n\t\t\t\"region\",\r\n\t\t\t\"division\",\r\n\t\t\t\"governor\"\r\n\t\t],\r\n\t},\r\n\ttParam: { // time axis (4th dimension) (ie. for animated charts)\r\n\t\ttype: null,\r\n\t\tselected: null,\r\n\t\toptions: [\r\n\t\t\tnull\r\n\t\t]\r\n\t},\r\n};\r\n\r\n// Label params:\r\nexport const labelParams = {\r\n\tchartTitle: \"COVID-19 State Comparison\",\r\n\txLabel: \"Cases per Thousand\",\r\n\tyLabel: \"Deaths per Thousand\"\r\n};","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\n\r\n// components\r\nimport { ChartCovidCompare } from \"./chart/ChartCovidCompare\";\r\nimport { Navbar } from './interface/Navbar';\r\n\r\n// params\r\nimport { chartParams, labelParams } from \"./appParams\";\r\n\r\n// context\r\nimport { statesContext } from \"../../context/statesContext\";\r\n\r\n// styles\r\nimport { Grid, useMediaQuery } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const AppCovidCompare = ({ wrapper, bounds }) => {\r\n\tconst { infoStates } = useContext(statesContext);\r\n\r\n\tconst [selectedStates, setSelectedStates] = useState(null);\r\n\r\n\tconst mqOrientPortrait = useMediaQuery(\"(orientation: portrait)\");\r\n\r\n\tconst useStyles = makeStyles((theme) => ({\r\n\t\tcontainer: {\r\n\t\t\tpadding: 0,\r\n\t\t\twidth: \"100%\",\r\n\t\t\theight: \"100%\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: () => mqOrientPortrait\r\n\t\t\t\t\t? \"row\"\r\n\t\t\t\t\t: \"column\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t},\r\n\t\titem: {\r\n\t\t\twidth: \"100%\",\r\n\t\t\tflexBasis: \"100%\"\r\n\t\t}\r\n\t}));\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleSelectedStates = (e) => {\r\n        setSelectedStates({\r\n            ...selectedStates,\r\n            [e.target.name]: {\r\n                ...selectedStates[e.target.name],\r\n                selected: e.target.checked\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleSelectAllStates = (e) => {\r\n        const revisedStates = {}\r\n        Object.keys(selectedStates).forEach((s,i) => {\r\n            revisedStates[s] = {\r\n                ...selectedStates[s],\r\n                selected: true\r\n            }\r\n        });\r\n        setSelectedStates(revisedStates);\r\n    };\r\n\r\n    const handleDeselectAllStates = (e) => {\r\n        const revisedStates = {}\r\n        Object.keys(selectedStates).forEach((s,i) => {\r\n            revisedStates[s] = {\r\n                ...selectedStates[s],\r\n                selected: false\r\n            }\r\n         });\r\n        setSelectedStates(revisedStates);\r\n\t};\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (infoStates) {\r\n\t\t\tsetSelectedStates(infoStates);\r\n\t\t}\r\n\t }, [infoStates]);\r\n\r\n  return (\r\n    <Grid className={classes.container}>\r\n\t\t<MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n\t\t\t<Grid item className={classes.item}>\r\n\t\t\t\t<Navbar \r\n\t\t\t\t\tstyle={{width: \"100%\"}}\r\n\t\t\t\t\tchartParams={chartParams}\r\n\t\t\t\t\tselectedStates={selectedStates} \r\n\t\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\t\thandleSelectedStates={handleSelectedStates}\r\n\t\t\t\t\thandleSelectAllStates={handleSelectAllStates}\r\n\t\t\t\t\thandleDeselectAllStates={handleDeselectAllStates}\r\n\t\t\t\t/>\r\n\t\t\t\t<ChartCovidCompare\r\n\t\t\t\t\tchartParams={chartParams}\r\n\t\t\t\t\tlabelParams={labelParams}\r\n\t\t\t\t\tselectedStates={selectedStates} \r\n\t\t\t\t\tsetSelectedStates={setSelectedStates}\r\n\t\t\t\t\twrapper={wrapper}\r\n\t\t\t\t\tbounds={bounds}\r\n\t\t\t\t/>\r\n\t\t\t</Grid>\r\n\t\t</MuiPickersUtilsProvider>\r\n    </Grid>\r\n  );\r\n};","export const wrapper = {\r\n\twrapperWidth: window.innerWidth * .9,\r\n\twrapperHeight: window.innerHeight * .9,\r\n\tmargin: { \r\n\t\ttop: 40,\r\n\t\tright: 40,\r\n\t\tbottom: 130,\r\n\t\tleft: 60\r\n\t}\r\n  };\r\n  \r\nexport const bounds = {\r\n\twidth: wrapper.wrapperWidth - wrapper.margin.left - wrapper.margin.right,\r\n\theight: wrapper.wrapperHeight - wrapper.margin.top - wrapper.margin.bottom,\r\n};","import { createMuiTheme } from \"@material-ui/core/styles\";\r\n\r\nconst darkPrimary = \"#000018\";\r\nconst darkSecondary = \"#1c847f\";\r\nconst darkText = \"#fff\";\r\nconst darkBackground = \"#29293d\";\r\n\r\nconst lightPrimary = \"#1c847f\";\r\nconst lightText = \"#29293d\";\r\nconst lightBackground = \"#fff\";\r\n\r\n\r\nexport const theme = createMuiTheme({\r\n    palette: {\r\n        type: \"dark\",\r\n        primary: {\r\n            main: \"#000018\",\r\n            contrastText: \"#fff\",\r\n        },\r\n        secondary: {\r\n            main: darkSecondary,\r\n            contrastText: darkText,\r\n        },\r\n        text: {\r\n            primary: \"#fff\",\r\n            secondary: \"#fff\",\r\n\t\t},\r\n\t\tbackground: {\r\n\t\t\tdefault: darkBackground,\r\n\t\t},\r\n        contrastThreshold: 3,\r\n    },\r\n    typography: {\r\n        fontFamily: [\"ralewaymedium\", \"Helvetica\", \"Arial\", \"sans-serif\"].join(\r\n            \",\"\r\n        ),\r\n    },\r\n    overrides: {\r\n        MuiFormControlLabel: {\r\n            root: {\r\n                color: \"#fff\",\r\n                textColor: \"#fff\",\r\n            },\r\n            label: {\r\n                color: \"#fff\",\r\n                textColor: \"#fff\",\r\n            },\r\n        },\r\n        MuiButton: {\r\n            root: {\r\n                color: \"#fff\",\r\n            },\r\n            label: {\r\n                color: \"#fff\",\r\n            },\r\n            text: {\r\n                color: \"#fff\",\r\n            },\r\n        },\r\n        MuiBase: {\r\n            root: {\r\n                color: \"#fff\",\r\n            },\r\n        },\r\n        MuiInputBase: {\r\n            root: {\r\n\t\t\t\tcolor: \"#fff\",\r\n                maxWidth: 115,\r\n                paddingLeft: 10,\r\n            },\r\n        },\r\n        MuiPickersCalendarHeader: {\r\n            switchHeader: {\r\n                backgroundColor: darkPrimary,\r\n            },\r\n        },\r\n        MuiPickersDay: {\r\n            day: {\r\n                color: \"#29293d\",\r\n            },\r\n            daySelected: {\r\n                backgroundColor: \"#29293d\",\r\n            },\r\n            dayDisabled: {\r\n                color: \"#29293d\",\r\n            },\r\n            current: {\r\n                color: \"#29293d\",\r\n            },\r\n        },\r\n    },\r\n});\r\n\r\nexport const getTheme = (theme, darkMode) => {\r\n\tif (darkMode) {\r\n \t\treturn createMuiTheme({\r\n\t\t\t...theme,\r\n\t\t\tpalette: {\r\n\t\t\t\t...theme.palette,\r\n\t\t\t\ttype: \"dark\",\r\n\t\t\t\tprimary: {\r\n\t\t\t\t\tmain: \"#000018\",\r\n\t\t\t\t\tcontrastText: \"#fff\",\r\n\t\t\t\t},\r\n\t\t\t\tbackground: {\r\n\t\t\t\t\tdefault: \"#29293d\",\r\n\t\t\t\t},\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tprimary: \"#fff\",\r\n\t\t\t\t\tsecondary: \"#fff\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\toverrides: {\r\n\t\t\t\t...theme.overrides,\r\n\t\t\t\tMuiButton: {\r\n\t\t\t\t\troot: {\r\n\t\t\t\t\t\tcolor: \"#fff\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\tcolor: \"#fff\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttext: {\r\n\t\t\t\t\t\tcolor: \"#fff\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t});\t\t\r\n\t} else {\r\n\t\treturn createMuiTheme({\r\n\t\t\t...theme,\r\n\t\t\tpalette: {\r\n\t\t\t\t...theme.palette,\r\n\t\t\t\ttype: \"light\",\r\n\t\t\t\tprimary: {\r\n\t\t\t\t\tmain: \"#1c847f\",\r\n\t\t\t\t\tcontrastText: \"#fff\",\r\n\t\t\t\t},\r\n\t\t\t\tbackground: {\r\n\t\t\t\t\tdefault: \"#fff\",\r\n\t\t\t\t},\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tprimary: \"#29293d\",\r\n\t\t\t\t\tsecondary: \"#000018\",\r\n        \t\t},\r\n\t\t\t},\r\n\t\t\toverrides: {\r\n\t\t\t\t...theme.overrides,\r\n\t\t\t\tMuiButton: {\r\n\t\t\t\t\troot: {\r\n\t\t\t\t\t\tcolor: \"#29293d\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\tcolor: \"#29293d\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttext: {\r\n\t\t\t\t\t\tcolor: \"#29293d\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tMuiInputBase: {\r\n\t\t\t\t\tinput: {\r\n\t\t\t\t\t\tcolor: \"#29293d\",\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n  }","export const colors = [\r\n\t\"#7FFFD4\",\r\n\t\"#8EE5EE\",\r\n\t\"#76EE00\",\r\n\t\"#D2691E\",\r\n\t\"#FF7F50\",\r\n\t\"#00CDCD\",\r\n\t\"#DC143C\",\r\n\t\"#00EE00\",\r\n\t\"#00EE76\",\r\n\t\"#8B5A2B\",\r\n\t\"#EE5C42\",\r\n\t\"#00C5CD\",\r\n\t\"#EE3A8C\",\r\n\t\"#9ACD32\",\r\n\t\"#43CD80\",\r\n\t\"#EE0000\",\r\n\t\"#7D26CD\",\r\n\t\"#EE9A00\",\r\n\t\"#C71585\",\r\n\t\"#9F79EE\",\r\n\t\"#8B5742\",\r\n\t\"#CDC673\",\r\n\t\"#218868\",\r\n\t\"#CD5555\",\r\n\t\"#CD9B1D\",\r\n\t\"#79CDCD\",\r\n\t\"#9BCD9B\",\r\n\t\"#FF7F00\",\r\n\t\"#EE3B3B\",\r\n\t\"#BF3EFF\",\r\n\t\"#00CED1\",\r\n\t\"#EE1289\",\r\n\t\"#228B22\",\r\n\t\"#CDAD00\",\r\n\t\"#00CD00\",\r\n\t\"#EE6AA7\",\r\n\t\"#CD5555\",\r\n\t\"#CD8C95\",\r\n\t\"#20B2AA\",\r\n\t\"#CD8162\",\r\n\t\"#CDCDB4\",\r\n\t\"#CD00CD\",\r\n\t\"#E066FF\",\r\n\t\"#00FA9A\",\r\n\t\"#C71585\",\r\n\t\"#FF4500\",\r\n\t\"#EE799F\",\r\n\t\"#CD96CD\",\r\n\t\"#912CEE\",\r\n\t\"#EEB4B4\",\r\n\t\"#4EEE94\"\r\n  ];","import React, { useState, useEffect } from \"react\";\r\nimport { Route, Redirect, Switch } from \"react-router-dom\";\r\nimport * as d3 from \"d3\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\n\r\n// data\r\nimport USStates from \"./data/us-states.csv\";\r\nimport stateInfo from \"./data/stateInfo.json\";\r\n\r\n// components\r\nimport { Footnotes } from \"./components/Footnotes\";\r\nimport { AppGapminder } from \"./components/appGapminder/AppGapminder\";\r\nimport { AppCovidCompare } from \"./components/appCovidCompare/AppCovidCompare\";\r\n\r\n// context\r\nimport { dataContext } from \"./context/dataContext\";\r\nimport { statesContext } from \"./context/statesContext\";\r\n\r\n// styles\r\nimport { wrapper, bounds } from \"./styles/dimensions\";\r\nimport { theme, getTheme } from \"./styles/theme\";\r\nimport { colors } from \"./styles/colors\";\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { CssBaseline } from \"@material-ui/core\";\r\n\r\nfunction App() {\r\n    const [dataStates, setDataStates] = useState([]);\r\n    const [infoStates, setInfoStates] = useState(null);\r\n\tconst [darkMode, setDarkMode] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // clean stateInfo data and assign selectedStates\r\n        const dateParser = d3.timeParse(\"%m-%d-%y\");\r\n        const revisedStates = {};\r\n\r\n        Object.keys(stateInfo).forEach((s, i) => {\r\n            revisedStates[s] = {\r\n                ...stateInfo[s],\r\n                lockdown: stateInfo[s].lockdown.startsWith(\"none\")\r\n                    ? stateInfo[s].lockdown\r\n                    : dateParser(stateInfo[s].lockdown),\r\n                lockdownEnd: stateInfo[s].lockdownEnd.startsWith(\"none\")\r\n                    ? stateInfo[s].lockdownEnd\r\n                    : dateParser(stateInfo[s].lockdownEnd),\r\n                color: colors[i],\r\n            };\r\n        });\r\n\r\n        const nested = d3\r\n            .nest()\r\n            .key(d => d.state)\r\n            .entries(dataStates);\r\n\r\n        Object.keys(nested).forEach(i => {\r\n            const s = nested[i].key;\r\n\r\n            const lastIndex = nested[i].values.length - 1;\r\n            const latestCaseCount = nested[i].values[lastIndex].cases;\r\n            const latestCaseCountPerThou =\r\n                (nested[i].values[lastIndex].cases / stateInfo[s].population) *\r\n                1000;\r\n\r\n            revisedStates[s] = {\r\n                ...revisedStates[s],\r\n                latestCaseCount: latestCaseCount,\r\n                latestCaseCountPerThou: latestCaseCountPerThou,\r\n            };\r\n        });\r\n        setInfoStates(revisedStates);\r\n    }, [dataStates]);\r\n\r\n    useEffect(() => {\r\n        // get COVID-19 state data\r\n        d3.csv(USStates).then(data => {\r\n            // clean data\r\n            const dateParser = d3.timeParse(\"%Y-%m-%d\");\r\n\r\n            data.forEach(d => {\r\n                d.date = dateParser(d.date);\r\n                d.fips = parseInt(d.fips);\r\n                d.cases = parseInt(d.cases);\r\n                d.deaths = parseInt(d.deaths);\r\n            });\r\n\r\n            // Filter data:\r\n            // Prior to 02-27-20, Washington had 1 or 2 cases from January.\r\n            // However, these were isolated cases and this graph is trying to track Covid-19 spread\r\n            // Also filter out territories Guam, Puerto Rico, etc.\r\n            data = data.filter(\r\n                d =>\r\n                    d.date > new Date(2020, 1, 26) &&\r\n                    Object.keys(stateInfo).includes(d.state)\r\n            );\r\n\r\n            // Normalize data:\r\n            // Add \"dayOfOutbreak\" to show elapsed time\r\n            // Add state population\r\n            // Add \"casesPerThousand\", \"deathsPerThousand\", \"mortalityRate\"\r\n            Object.keys(stateInfo).forEach(state => {\r\n                const stateData = data.filter(d => d.state === state);\r\n                stateData.forEach(d => {\r\n                    d.dayOfOutbreak =\r\n                        (d.date - stateData[0].date) /\r\n                            (24 * 60 * 60 * 10 * 10 * 10) +\r\n                        1; // day - day one, convert ms to days\r\n                    d.casesPerThousand =\r\n                        (d.cases / stateInfo[state].population) * 1000;\r\n                    d.deathsPerThousand =\r\n                        (d.deaths / stateInfo[state].population) * 1000;\r\n                    d.mortalityRate = (d.deaths / d.cases) * 100;\r\n                });\r\n            });\r\n            setDataStates(data);\r\n            console.log(\"imported dataset\");\r\n        });\r\n\t}, []);\r\n\r\n    return (\r\n        <>\r\n            <ThemeProvider theme={getTheme(theme, darkMode)}>\r\n                <CssBaseline />\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                    <dataContext.Provider value={{ dataStates, setDataStates }}>\r\n                        <statesContext.Provider\r\n                            value={{ infoStates, setInfoStates }}\r\n                        >\r\n\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\tpath=\"/line-app\"\r\n\t\t\t\t\t\t\t\tclassName=\"line-app\"\r\n\t\t\t\t\t\t\t\tcomponent={() => <AppCovidCompare wrapper={wrapper} bounds={bounds} />}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\tpath=\"/gapminder-app\"\r\n\t\t\t\t\t\t\t\tclassName=\"gapminder-app\"\r\n\t\t\t\t\t\t\t\trender={() => <AppGapminder />}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t<Redirect exact from=\"/\" to=\"/gapminder-app\" />\r\n\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t<Footnotes\r\n\t\t\t\t\t\t\t\tdarkMode={darkMode}\r\n\t\t\t\t\t\t\t\tsetDarkMode={setDarkMode}\r\n\t\t\t\t\t\t\t\twrapper={wrapper}\r\n\t\t\t\t\t\t\t\tbounds={bounds}\r\n\t\t\t\t\t\t\t/>\r\n                        </statesContext.Provider>\r\n                    </dataContext.Provider>\r\n                </MuiPickersUtilsProvider>\r\n            </ThemeProvider>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n    <HashRouter>\r\n        <App />\r\n    </HashRouter>,\r\n    document.getElementById(\"root\")\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}